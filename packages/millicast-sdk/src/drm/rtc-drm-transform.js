function e(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}const t=n;function n(e,t){const r=f();return(n=function(e,t){return r[e-=257]})(e,t)}var r;!function(){const e=n,t=f();for(;;)try{if(303379===parseInt(e(266))/1*(-parseInt(e(261))/2)+parseInt(e(258))/3*(-parseInt(e(264))/4)+-parseInt(e(267))/5*(parseInt(e(274))/6)+parseInt(e(260))/7*(parseInt(e(268))/8)+parseInt(e(270))/9+-parseInt(e(277))/10+parseInt(e(263))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const s=navigator&&navigator[t(276)]||"",i=navigator&&navigator.vendor||"",o=!!(null===window||void 0===window?void 0:window[t(273)]),a=s[t(278)](t(257)),c=!a&&i[t(278)](t(259)),l=!a&&!c&&s.includes(t(272)),u=!a&&!c&&!l&&s[t(278)](t(275)),d=(null===(r=null===navigator||void 0===navigator?void 0:navigator[t(262)])||void 0===r?void 0:r[t(271)])||(null===navigator||void 0===navigator?void 0:navigator[t(271)])||"";function f(){const e=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(f=function(){return e})()}const h={supportsRtpScriptTransform:o,isFirefox:a,isSafari:c,isEdge:l,isChrome:u,platform:d,isWindows:d===t(269)||d===t(265)},p=m;function m(e,t){const n=v();return(m=function(e,t){return n[e-=185]})(e,t)}!function(){const e=m,t=v();for(;;)try{if(657542===-parseInt(e(380))/1+-parseInt(e(354))/2+-parseInt(e(464))/3*(parseInt(e(486))/4)+-parseInt(e(253))/5+parseInt(e(377))/6+parseInt(e(321))/7*(-parseInt(e(285))/8)+-parseInt(e(444))/9*(-parseInt(e(279))/10))break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const y=h[p(496)];function w(e,t){const n=p;let r=new Uint8Array((0|e.byteLength)+(0|t[n(442)]));return r[n(311)](e,0),r[n(311)](t,0|e.byteLength),r}const g=(e,t,n,r)=>{const s=p,i=r[s(203)]||1;t*=i,n*=i;const o=(l=e)instanceof ArrayBuffer?l:l[p(492)],a=(e[s(447)]||0)+e[s(442)],c=(e[s(447)]||0)+t;var l;let u=Math[s(389)](0,Math[s(487)](c,a)),d=Math[s(487)](u+Math[s(389)](n,0),a);return u/=i,d/=i,new r(o,u,d-u)};function v(){const e=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(v=function(){return e})()}function b(e,t=0,n=1/0){return g(e,t,n,Uint8Array)}function S(e){const t=p,n=Array[t(436)](e)[t(467)]((e=>e[t(431)](0)));return new Uint8Array(n)}function E(e){const t=function(e){const t=p;let n="";for(let r=0;r<e.length;r+=16e3){const s=e[t(453)](r,r+16e3);n+=String[t(299)][t(187)](null,s)}return n}(b(e));return btoa(t)}window[p(455)]=(e,t,n="application/octet-stream")=>{const r=p,s=document[r(334)]("a"),i=new Blob([e],{type:n});s[r(337)]=URL[r(244)](i),s[r(418)]=t,s.click(),URL[r(235)](s[r(337)])};class A{static get[p(304)](){return 1}static get[p(323)](){return 5}static get[p(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[p(484)](){return 9}static get[p(481)](){const e=p;return{[A[e(323)]]:e(323),[A.SEI]:e(196),[A.SPS]:e(437),[A[e(309)]]:e(309),[A[e(304)]]:e(304),[A[e(484)]]:e(484)}}static type(e){const t=p;return e[t(405)]in A[t(481)]?A[t(481)][e[t(405)]]:t(263)}constructor(e){const t=p;this.payload=e,this[t(493)]=(96&this.payload[0])>>5,this[t(405)]=31&this[t(214)][0],this[t(495)]=1==this.ntype||5==this[t(405)],this[t(329)]="",this[t(387)]=!1}toString(){const e=p;return A[e(469)](this)+e(358)+this[e(416)]()}getNri(){return this[p(493)]}[p(469)](){return this[p(405)]}[p(459)](){const e=p;return this[e(405)]===A[e(323)]}[p(307)](){return this[p(214)]}[p(407)](){const e=p;return this[e(214)][e(442)]}getSize(){return 4+this[p(407)]()}[p(343)](){const e=p,t=new Uint8Array(this.getSize());return new DataView(t.buffer)[e(339)](0,this.getSize()-4),t[e(311)](this[e(307)](),4),t}}class I{constructor(e){const t=p;this[t(439)]=e,this[t(301)]=0,this.bitLength=8*e[t(442)]}[p(291)](e){const t=p;this.data=e,this[t(301)]=0,this[t(282)]=8*e[t(442)]}get[p(288)](){const e=p;return this[e(282)]-this[e(301)]}skipBits(e){if(this[p(288)]<e)return!1;this.index+=e}[p(208)](e,t=!0){return this.getBits(e,this.index,t)}[p(252)](e,t,n=!0){const r=p;if(this.bitsAvailable<e)return 0;const s=t%8,i=this[r(439)][t/8|0]&255>>>s,o=8-s;if(o>=e)return n&&(this.index+=e),i>>o-e;{n&&(this.index+=o);const s=e-o;return i<<s|this[r(252)](s,t+o,n)}}[p(438)](){const e=p;let t;for(t=0;t<this.bitLength-this[e(301)];++t)if(0!==this.getBits(1,this[e(301)]+t,!1))return this.index+=t,t;return t}[p(374)](){const e=p;this[e(457)](1+this[e(438)]())}[p(494)](){const e=p;this[e(457)](1+this[e(438)]())}readUEG(){const e=p,t=this[e(438)]();return this[e(208)](t+1)-1}readEG(){const e=this[p(193)]();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this[p(208)](1)}[p(295)](e=1){return this[p(208)](8*e)}readUShort(){return this[p(208)](16)}[p(419)](){return this[p(208)](32)}}class U{static[p(360)](e,t){const n=p;let r=[],s=!1,i=!1,o=!1,a=!1,c=0,l=0,u=0,d=[];for(;c<=e.byteLength;){if(c<e.byteLength){const t=e[c++];0!==t?(1===t&&l>1&&(u=l>2?4:3,d.push(c)),l=0):++l}else u=0,d.push(c++);if(d.length>1){const n=d.shift(),f=d[0]-u;if(n<f){let u=!1;const d=31&e[n];if(d===A.NDR?i=!0:d===A.IDR?s=!0:d===A.SPS?(u=o,o=!0):d===A.PPS&&(u=a,a=!0),!u)if(!t||d!==A.NDR&&d!==A.IDR)r.push(e.subarray(n,f));else{const t=new Uint8Array(f-n);let s=0;for(c=n,l=0;c<f;){let n=e[c++];l>1&&3===n&&(l=0,n=e[c++]),0!==n?l=0:++l,t[s++]=n}r.push(t.subarray(0,s))}}}}let f=!0,h=!1;return i||s?i&&s&&(console[n(230)](n(318)),f=!1):(console[n(230)]("[H264Parser] No VCL NALUs found"),f=!1),s&&(o&&a?h=!0:console[n(230)](n(242))),{valid:f,idr:h,nalus:r}}static skipScalingList(e,t){let n,r=8,s=8;for(let i=0;i<t;i++)0!==s&&(n=e.readEG(),s=(r+n+256)%256),r=0===s?r:s}static[p(330)](e){const t=p;let n,r,s,i,o,a,c=new I(e),l=0,u=0,d=0,f=0,h=1;if(c[t(295)](),n=c.readUByte(),c[t(208)](5),c[t(457)](3),c.readUByte(),c[t(374)](),100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n){var m=c[t(193)]();if(3===m&&c[t(457)](1),c.skipUEG(),c[t(374)](),c[t(457)](1),c[t(232)]()){a=3!==m?8:12;for(let e=0;e<a;++e)c[t(232)]()&&(e<6?U[t(347)](c,16):U[t(347)](c,64))}}c[t(374)]();var y=c.readUEG();if(0===y)c[t(193)]();else if(1===y){c.skipBits(1),c[t(494)](),c[t(494)](),r=c[t(193)]();for(let e=0;e<r;++e)c.skipEG()}if(c.skipUEG(),c[t(457)](1),s=c[t(193)](),i=c.readUEG(),o=c[t(208)](1),0===o&&c[t(457)](1),c[t(457)](1),c[t(232)]()&&(l=c[t(193)](),u=c[t(193)](),d=c[t(193)](),f=c.readUEG()),c.readBoolean()){if(c[t(232)]()){let e;switch(c[t(295)]()){case 1:e=[1,1];break;case 2:e=[12,11];break;case 3:e=[10,11];break;case 4:e=[16,11];break;case 5:e=[40,33];break;case 6:e=[24,11];break;case 7:e=[20,11];break;case 8:e=[32,11];break;case 9:e=[80,33];break;case 10:e=[18,11];break;case 11:e=[15,11];break;case 12:e=[64,33];break;case 13:e=[160,99];break;case 14:e=[4,3];break;case 15:e=[3,2];break;case 16:e=[2,1];break;case 255:e=[c[t(295)]()<<8|c.readUByte(),c[t(295)]()<<8|c[t(295)]()]}e&&e[0]>0&&e[1]>0&&(h=e[0]/e[1])}c.readBoolean()&&c[t(457)](1),c[t(232)]()&&(c.skipBits(4),c[t(232)]()&&c[t(457)](24)),c.readBoolean()&&(c.skipUEG(),c[t(374)]()),c.readBoolean()&&(c[t(419)](),c[t(419)](),c.readBoolean())}return{width:Math.ceil((16*(s+1)-2*l-2*u)*h),height:(2-o)*(i+1)*16-(o?2:4)*(d+f)}}static[p(448)](e){const t=p;let n=new I(e[t(307)]());n.readUByte(),e.isfmb=0===n[t(193)](),e.stype=n[t(193)]()}constructor(e){const t=p;this.remuxer=e,this[t(346)]=e[t(274)]}[p(471)](e){const t=p;var n=U[t(330)](new Uint8Array(e));this[t(346)][t(228)]=n[t(228)],this[t(346)][t(396)]=n[t(396)],this[t(346)].sps=[new Uint8Array(e)],this[t(346)][t(449)]=t(224);let r=new DataView(e.buffer,e[t(447)]+1,4);for(let e=0;e<3;++e){var s=r.getUint8(e)[t(262)](16);s.length<2&&(s="0"+s),this.track[t(449)]+=s}}[p(211)](e){this[p(346)].pps=[new Uint8Array(e)]}[p(368)](e){const t=p;if(!e)return!1;let n=!1;switch(e.type()){case A[t(323)]:case A[t(304)]:n=!0;break;case A[t(309)]:!this[t(346)][t(362)]&&(this.parsePPS(e[t(307)]()),!this[t(345)][t(435)]&&this[t(346)][t(362)]&&this[t(346)][t(259)]&&(this[t(345)][t(435)]=!0)),n=!0;break;case A[t(437)]:!this[t(346)][t(259)]&&(this[t(471)](e[t(307)]()),!this[t(345)][t(435)]&&this[t(346)][t(362)]&&this.track.sps&&(this[t(345)][t(435)]=!0)),n=!0;break;case A[t(484)]:break;case A[t(196)]:n=!0}return n}}class k{constructor(e){const t=p;this[t(465)]={},this[t(469)]=""|e}on(e,t){const n=p;return!this[n(465)][e]&&(this[n(465)][e]=[]),this[n(465)][e][n(462)](t),!0}[p(353)](e,t){const n=p;if(this[n(465)][e]){var r=this.listener[e][n(238)](t);return r>-1&&this[n(465)][e][n(280)](r,1),!0}return!1}[p(490)](){this[p(465)]={}}[p(255)](e,t){const n=p;return!!this.listener[e]&&(this[n(465)][e][n(467)]((e=>{e[n(187)](null,[t])})),!0)}}class T{constructor(e){const t=p;this[t(432)]=e,this[t(199)]={video:e[t(366)][t(434)]?.encryption===t(306)?16:0,audio:e[t(366)][t(451)]?.encryption===t(306)?16:0},T.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let e in T[t(204)])T[t(204)][e]=[e[t(431)](0),e[t(431)](1),e.charCodeAt(2),e[t(431)](3)];const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);T[t(476)]={video:n,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);T[t(443)]=T[t(268)]=T[t(463)]=i,T[t(348)]=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),T[t(217)]=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),T.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),T[t(320)]=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);T[t(341)]=T[t(411)](T[t(204)][t(367)],o,c,o,a),T.DINF=T[t(411)](T[t(204)][t(272)],T[t(411)](T[t(204)].dref,s))}static[p(411)](e,...t){const n=p;let r,s=8,i=t.length,o=i;for(;i--;)t[i]&&(s+=t[i].byteLength);for(r=new Uint8Array(s),r[0]=s>>>24,r[1]=s>>>16&255,r[2]=s>>>8&255,r[3]=255&s,r[n(311)](e,4),i=0,s=8;i<o;++i)t[i]&&(r[n(311)](t[i],s),s+=t[i][n(442)]);return r}hdlr(e){const t=p;return T[t(411)](T[t(204)][t(229)],T[t(476)][e])}mdat(e){const t=p;return T.box(T.types[t(458)],e)}[p(246)](e,t){const n=p;return T.box(T[n(204)][n(246)],new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,85,196,0,0]))}[p(298)](e){const t=p;return T[t(411)](T[t(204)][t(298)],this[t(246)](e[t(393)],e.duration),this[t(229)](e[t(469)]),this[t(265)](e))}[p(429)](e){const t=p;return T[t(411)](T.types[t(429)],new Uint8Array([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]))}[p(265)](e){const t=p;return e[t(469)]===t(451)?T[t(411)](T[t(204)][t(265)],T.box(T[t(204)][t(236)],T[t(247)]),T.DINF,this[t(415)](e)):T[t(411)](T[t(204)][t(265)],T[t(256)],this[t(415)](e),T[t(411)](T[t(204)][t(340)],T[t(217)]))}[p(460)](e,t,n){const r=p;return T[r(411)](T[r(204)][r(460)],this[r(429)](e),this.traf(n,t))}moov(e,t,n){const r=p;let s=e[r(294)],i=[];for(;s--;)i[s]=this[r(315)](e[s]);return T[r(411)][r(187)](null,[T[r(204)].moov,this[r(210)](n,t),this[r(430)](e)].concat(i)[r(365)](this[r(386)](e)))}mvex(e){const t=p;let n=e[t(294)],r=[];for(;n--;)r[n]=this[t(290)](e[n]);return T.box[t(187)](null,[T[t(204)].mvex].concat(r))}[p(210)](e,t){const n=p;let r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return T[n(411)](T[n(204)].mvhd,r)}[p(356)](e){const t=p;let n=e[t(446)]||[],r=new Uint8Array(4+n.length);for(let e=0;e<n.length;e++){const s=n[e][t(316)];r[e+4]=s[t(213)]<<4|s.isDependedOn<<2|s.hasRedundancy}return T.box(T.types.sdtp,r)}[p(415)](e){const t=p;return T[t(411)](T.types[t(415)],this[t(402)](e),T.box(T.types[t(478)],T[t(443)]),T.box(T.types[t(200)],T[t(268)]),T[t(411)](T[t(204)][t(390)],T[t(348)]),T[t(411)](T[t(204)][t(267)],T[t(463)]))}[p(333)](e){const t=p;let n,r,s,i=[],o=[];for(n=0;n<e[t(259)][t(294)];n++)r=e[t(259)][n],s=r[t(442)],i.push(s>>>8&255),i[t(462)](255&s),i=i[t(365)](Array[t(381)].slice.call(r));for(n=0;n<e.pps.length;n++)r=e.pps[n],s=r[t(442)],o.push(s>>>8&255),o[t(462)](255&s),o=o[t(365)](Array[t(381)][t(293)][t(394)](r));const a=T[t(411)](T[t(204)].avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e[t(259)][t(294)]][t(365)](i)[t(365)]([e[t(362)].length]).concat(o))),c=e[t(228)],l=e[t(396)],u=T[t(411)](T[t(204)][t(474)],T[t(411)](T.types[t(425)],new Uint8Array([97,118,99,49])),T[t(411)](T[t(204)][t(342)],new Uint8Array([0,0,0,0,...S(this[t(432)][t(366)].video[t(395)]),0,1,0,0])),T[t(411)](T[t(204)].schi,this[t(314)]("video")));return T[t(411)](T[t(204)][t(333)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>>8&255,255&c,l>>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),a,u)}[p(369)](e){const t=p;let n=e.config[t(442)],r=new Uint8Array(26+n+3);return r[t(311)]([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5,n]),r[t(311)](e[t(366)],26),r[t(311)]([6,1,2],26+n),r}[p(296)](e){const t=p,n=e.audiosamplerate;return T[t(411)](T[t(204)][t(296)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e[t(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),T[t(411)](T[t(204)][t(369)],this.esds(e)))}dOps(e){const t=p,n=e[t(357)];return new Uint8Array([0,e[t(198)],1,56,0,0,n>>>8&255,255&n,0,0,0])}[p(264)](e){const t=p,n=e[t(357)];return T[t(411)](T[t(204)].Opus,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e[t(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),T[t(411)](T.types[t(305)],this[t(305)](e)))}[p(468)](e){const t=p,n=T[t(411)](T[t(204)].dOps,this[t(305)](e)),r=T[t(411)](T[t(204)].sinf,T[t(411)](T[t(204)].frma,new Uint8Array([79,112,117,115])),T[t(411)](T[t(204)][t(342)],new Uint8Array([0,0,0,0,...S(this.drm[t(366)].audio[t(395)]),0,1,0,0])),T[t(411)](T[t(204)][t(332)],this[t(314)](t(451)))),s=e[t(357)];return T[t(411)](T[t(204)][t(468)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e[t(198)],0,16,0,0,0,0,s>>>8&255,255&s,0,0]),n,r)}[p(402)](e){const t=p;return e[t(469)]===t(451)?T.box(T[t(204)][t(402)],T[t(320)],e[t(212)]?this[t(468)](e):this[t(264)](e)):T.box(T[t(204)][t(402)],T[t(320)],this.encv(e))}[p(249)](e){const t=p,n=e.id,r=e[t(191)],s=e.width,i=e[t(396)],o=e[t(219)];return T[t(411)](T[t(204)][t(249)],new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>>8&255,255&s,0,0,i>>>8&255,255&i,0,0]))}[p(231)](e,t){const n=p,r=e.id,s=e[n(446)][0][n(483)],i=e[n(446)][0][n(191)],o=e[n(446)][0].flags,a=T[n(411)](T[n(204)][n(488)],new Uint8Array([0,2,0,58,r>>>24,r>>>16&255,r>>>8&255,255&r,0,0,0,1,i>>>24,r>>>16&255,i>>>8&255,255&i,s>>>24,s>>>16&255,s>>>8&255,255&s,0,o.isNonSync,0,0])),c=T[n(411)](T[n(204)][n(222)],new Uint8Array([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]));if(e[n(212)]){let t,r;if(e[n(469)]===n(434)?(t=!0,r=this[n(199)][n(434)]+e[n(446)][0].sampleAuxInfo?.byteLength):(t=!1,r=this[n(199)][n(451)]),r>0){const s=this[n(392)](r),i=this[n(363)](e[n(446)],t),o=s.length+20+i.length+a[n(294)]+c[n(294)]+8+16+8+8,l=this[n(324)](e,o);return T[n(411)](T[n(204)][n(231)],a,c,l,s,this[n(364)](o-i[n(294)]+l[n(294)]+8),i)}{const t=this[n(363)](null,!1),r=t[n(294)]+a[n(294)]+c.length+8+16+8+8,s=this[n(324)](e,r);return T[n(411)](T[n(204)][n(231)],a,c,s,t)}}return T.box(T.types.traf,a,c,this[n(324)](e,a[n(294)]+c[n(294)]+8+16+8+8))}[p(315)](e){const t=p;return e[t(191)]=e[t(191)]||4294967295,T.box(T[t(204)][t(315)],this[t(249)](e),this[t(298)](e))}trex(e){const t=p,n=e.id;return T[t(411)](T[t(204)][t(290)],new Uint8Array([0,0,0,0,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(e,t){const n=p;let r=(e.samples||[]).length,s=new Uint8Array(12);return t+=20,s[n(311)]([0,0,0,1,r>>>24,r>>>16&255,r>>>8&255,255&r,t>>>24,t>>>16&255,t>>>8&255,255&t],0),T.box(T.types[n(324)],s)}[p(192)](e,t){const n=p,r=n(373),s=n(257),i=E(function(e){const t=p,n=[];return n[t(462)](e[3]),n[t(462)](e[2]),n[t(462)](e[1]),n[t(462)](e[0]),n.push(e[5]),n.push(e[4]),n.push(e[7]),n.push(e[6]),(e=b(e))[t(311)](n,0),e}(e));return b(function(e,t){const n=p,r=new Uint8Array(2*e.length),s=new DataView(r[n(492)]);for(let r=0;r<e[n(294)];++r){const i=e[n(431)](r);s[n(221)](2*r,i,t)}return r[n(492)]}([n(300)+s+n(422)+r+'">',"<DATA>",n(239),"<KIDS>",n(417),n(243)+i+'"',">",n(245),n(270),"</PROTECTINFO>",t?n(470)+t+n(409):"",n(428),n(289)][n(420)](""),!0))}[p(430)](e){const t=p;if(this[t(432)][t(440)][t(328)]("com.widevine"))return T[t(411)](T[t(204)][t(430)],new Uint8Array([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[t(432)][t(366)][e[0][t(469)]][t(479)]]));if(this[t(432)].keySystem===t(421)){const n=this[t(192)](this[t(432)][t(366)][e[0].type][t(479)],this.drm.licenseUrl),r=n[t(442)];return T[t(411)](T[t(204)][t(430)],new Uint8Array([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,r>>>24,r>>>16&255,r>>>8&255,255&r,...n]))}return this[t(432)][t(440)]===t(273)?T[t(411)](T[t(204)][t(430)],new Uint8Array([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[e[0][t(469)]][t(479)],0,0,0,0])):this[t(432)][t(440)]===t(286)?null:void console[t(370)](t(297)+this[t(432)].keySystem)}[p(314)](e){const t=p;let n,r,s=this[t(432)][t(366)][e];return"cbcs"===s.encryption?(n=new Uint8Array([16,...s.iv]),r=25):(n=new Uint8Array([]),r=0),T[t(411)](T[t(204)].tenc,new Uint8Array([1,0,0,0,0,r,1,this[t(199)][e],...s[t(479)],...n]))}[p(392)](e){return T[p(411)](T.types.saiz,new Uint8Array([0,0,0,0,e,0,0,0,1]))}[p(364)](e){const t=p;return T[t(411)](T[t(204)][t(364)],new Uint8Array([0,0,0,0,0,0,0,1,e>>>24,e>>>16&255,e>>>8&255,255&e]))}[p(363)](e,t){const n=p;let r=null;return e&&(1!==e[n(294)]&&console[n(370)](n(424)+e[n(294)]+n(413)),r=e[0][n(195)]),r&&r[n(442)]?T[n(411)](T[n(204)][n(363)],new Uint8Array([0,0,0,t?2:0,0,0,0,1,...r])):T[n(411)](T[n(204)][n(363)],new Uint8Array([0,0,0,0,0,0,0,1]))}[p(271)](e,t,n){const r=p,s=this[r(216)](e,t,n);let i=new Uint8Array(T[r(341)][r(442)]+s.byteLength);return i.set(T[r(341)]),i[r(311)](s,T[r(341)].byteLength),i}}let D=1;class R{constructor(){this[p(283)]=1}static[p(209)](){return D++}[p(250)](){const e=p;this[e(274)][e(215)]=0,this.mp4track[e(446)]=[]}[p(258)](){const e=p;return!(!this.readyToDecode||!this[e(446)][e(294)])}}class x extends R{constructor(e){const t=p;super(),this[t(435)]=!0,this[t(223)]=0,this[t(237)]=0,this[t(274)]={id:R[t(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:e,duration:e,samples:[],codec:t(388),encrypted:!0},this[t(446)]=[]}resetTrack(){const e=p;this[e(283)]=1,this[e(223)]=0,this[e(237)]=0}[p(406)](e,t,n){const r=p;if(e.length>0)for(let s=0;s<e[r(294)];s++){let i=e[s],o=i[r(276)],a=o[r(442)];this.samples.push({units:o,size:a,duration:i.duration,sampleAuxInfo:t,timestamp:n}),this[r(274)][r(215)]+=a}}[p(248)](){const e=p;if(!this[e(446)])return null;let t,n=this[e(274)][e(446)];for(;this.samples[e(294)];){let r=this[e(446)][e(233)](),s=(1e3*r[e(385)]|0)-this.nextDts|0;s<5&&(s=5),this.dts=this.nextDts,this[e(223)]+=s,t={size:r.size,duration:s,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:r[e(195)]};let i=new Uint8Array(r.size);return i[e(311)](r.units,0),n.push(t),new Uint8Array(i.buffer,0,r[e(483)])}return null}}class M extends R{constructor(e,t){const n=p;super(),this[n(435)]=!1,this.nextDts=0,this[n(237)]=0,this[n(477)]=t,this.mp4track={id:R[n(209)](),type:n(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:e,duration:e,samples:[],encrypted:!0},this[n(446)]=[],this[n(220)]=new U(this)}[p(426)](){const e=p;this[e(283)]=1,this.readyToDecode=!1,this[e(274)].sps="",this[e(274)][e(362)]="",this[e(223)]=0,this[e(237)]=0}[p(406)](e,t,n){const r=p;for(let s of e){let e=[],i=0;for(let t of s[r(276)])this.h264[r(368)](t)&&(e[r(462)](t),i+=t.getSize());e[r(294)]>0&&this[r(435)]&&(this[r(274)][r(215)]+=i,this[r(446)][r(462)]({units:e,size:i,keyFrame:s.keyFrame,duration:s[r(191)],sampleAuxInfo:t,timestamp:n}))}}[p(248)](){const e=p;if(!this[e(258)]()||!this.samples)return null;let t,n=this[e(274)][e(446)],r=this.samples[e(233)](),s=r[e(276)],i=(1e3*r.timestamp|0)-this[e(223)]|0;i<5&&(i=5),window[e(251)]&&i>5e3&&console[e(383)]("timestamp gap: "+(i/1e3|0)+" s"),this[e(237)]=this[e(223)],this.nextDts+=i,t={size:r[e(483)],duration:i,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:r[e(275)]?0:1,dependsOn:r.keyFrame?2:1},sampleAuxInfo:r[e(195)]};let o=0;for(const t of s)o+=t[e(349)]();let a=0,c=new Uint8Array(o);for(const t of s)c[e(311)](t[e(343)](),a),a+=t[e(349)]();return n[e(462)](t),new Uint8Array(c[e(492)],0,o)}}class C extends k{constructor(e,t){const n=p;super(n(345)),this.initialized=!1,this.trackTypes=[],this[n(414)]={},this[n(393)]=1e3,this.mediaDuration=0,this[n(477)]=e,this[n(375)]=t}addTrack(e){const t=p;(e===t(434)||"both"===e)&&(this[t(414)][t(434)]=new M(this[t(393)],this.videoElement),this[t(480)][t(462)](t(434))),(e===t(451)||e===t(303))&&(this[t(414)][t(451)]=new x(this.timescale),this[t(480)][t(462)](t(451)))}reset(){const e=p;for(let t of this[e(480)])this[e(414)][t][e(426)]();this[e(489)]=!1}[p(355)](){const e=p;this[e(414)]={},this[e(490)]()}[p(250)](){const e=p;if(this[e(489)])for(let t of this[e(480)]){let n=this[e(414)][t];for(;;){let r=n.getFramePayload();if(!r||!r[e(442)])break;let s={type:t,payload:w(this[e(375)][e(460)](n[e(283)]++,n[e(237)],n[e(274)]),this[e(375)][e(458)](r)),dts:n[e(237)]};this[e(255)](e(492),s),n[e(250)]()}}else this[e(258)]()&&(this[e(255)](e(205)),this[e(271)](),this[e(489)]=!0,this[e(250)]())}initSegment(){const e=p;for(let t of this[e(480)]){let n=this[e(414)][t],r={type:t,payload:this[e(375)][e(271)]([n[e(274)]],this[e(433)],this[e(393)])};this.dispatch(e(492),r)}}isReady(){const e=p;for(let t of this.trackTypes)if(!this[e(414)][t][e(435)]||!this[e(414)][t].samples[e(294)])return!1;return!0}[p(406)](e){const t=p;for(let n of this[t(480)]){let r=e[n];if(r.length>0){this[t(414)][n][t(406)](r,n===t(451)?e[t(225)]:e.videoSampleAuxInfo,e[t(385)])}}this.flush()}}class L extends k{constructor(e,t,n){const r=p;super(r(492)),this[r(469)]=t,this.queue=new Uint8Array,window[r(319)]&&(this[r(254)]=new Uint8Array,this[r(404)]=0),this.sourceBuffer=e,this[r(218)]=n,this[r(197)]=!1,this[r(310)].addEventListener(r(370),(e=>{const t=r;console.warn(t(201),e,this.type),this[t(197)]=!0,this[t(255)](t(370),{type:this[t(469)],name:"buffer",error:t(292)})}))}[p(355)](){const e=p;this[e(401)]=null,this[e(254)]=null;try{this.sourceBuffer&&(this[e(310)][e(186)](),this[e(218)].removeSourceBuffer(this[e(310)]),this[e(310)]=null)}catch(e){}this.offAll()}[p(475)](){const e=p;if(this.queue[e(294)]&&this[e(310)]&&!this[e(310)].updating){if(this[e(310)].buffered[e(294)]>1){for(let t=0;t<this[e(310)].buffered[e(294)];++t){const n=t<this[e(310)].buffered[e(294)]-1;window[e(251)]&&console[e(383)](e(445)+t+(n?" (remove)":"")+": "+this[e(310)][e(269)][e(326)](t)+e(325)+this[e(310)][e(269)][e(376)](t)),n&&this.sourceBuffer[e(482)](this[e(310)][e(269)].start(t),this[e(310)].buffered[e(376)](t))}if(this.sourceBuffer[e(378)])return}try{this[e(310)][e(491)](this[e(401)]),this.queue=new Uint8Array}catch(t){this[e(255)](e(370),{type:this[e(469)],name:e(352),error:t})}}}[p(371)](e){const t=p;if(this[t(254)]&&(this.dbgQueue=w(this[t(254)],e),100==++this[t(404)])){const e=(new Date)[t(344)]().substring(0,19)[t(454)](":","-"),n=this.type+"-"+e+".mp4";window.downloadToFile(this[t(254)],n),this[t(254)]=null}this[t(197)]||(this[t(401)]=w(this[t(401)],e)),this.doAppend()}}class F extends k{static isSupported(e){const t=p;return window[t(202)]?window.ManagedMediaSource[t(497)](e):!!window[t(384)]&&window.MediaSource[t(497)](e)}constructor(e){const t=p;super(t(397)),this[t(197)]=!1,this[t(410)]=!0,this[t(466)]=!1,this[t(234)]=!1,this.mseEnded=!1;this[t(379)]=Object[t(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(e){}},e),this[t(450)]=typeof this.options[t(450)]===t(302)?document[t(472)](this.options.node):this[t(379)].node,this[t(432)]=e.drm,this.mp4=new T(this.drm),this[t(423)]=new C(this.node,this[t(375)]),this[t(423)].addTrack(this[t(379)][t(461)]),this[t(423)].on(t(492),this[t(456)].bind(this)),this[t(423)].on(t(205),this[t(382)][t(308)](this)),this.initBrowser()}[p(322)](){const e=p;typeof this.options.node===e(302)&&""==this.options[e(450)]&&console[e(370)](e(473)),this[e(234)]=!1,this.setupMSE()}setupMSE(){const e=p;if(!window[e(202)]&&!window[e(384)])throw e(452);window.ManagedMediaSource?(this.node[e(427)]=!0,this[e(327)]=new ManagedMediaSource):this[e(327)]=new MediaSource,this[e(284)]=URL[e(244)](this[e(327)]),this.node[e(485)]=this[e(284)],this[e(277)]=!1,this[e(327)][e(331)](e(338),this.onMSEOpen[e(308)](this)),this.mediaSource.addEventListener("sourceclose",this[e(241)][e(308)](this)),this[e(327)][e(331)]("webkitsourceopen",this[e(194)][e(308)](this)),this.mediaSource[e(331)](e(240),this[e(241)].bind(this)),this[e(327)][e(331)]("error",(function(t){const n=e;console[n(370)](n(287),t[n(226)])}))}[p(227)](){const e=p;if(!this[e(277)])try{this.mseEnded=!0,this[e(327)][e(185)]===e(399)&&this[e(327)][e(261)]()}catch(t){console[e(370)]("mediasource is not available to end: ",t)}}[p(359)](){this[p(410)]=!0}[p(371)](e){const t=p;let n={video:[],audio:[]};if(this[t(197)]||this[t(277)])return-1;if(!e||!this[t(423)])return-1;if(e[t(434)]){n.timestamp=e.timestamp;const r=this[t(190)](e.videoSampleAuxInfo,this.mp4[t(199)][t(434)]),s=r!=e[t(434)][t(442)];let i=U[t(360)](e[t(434)],s);if(!i[t(206)]||i[t(260)].length<1)return 0;if(this.waitingForIdr){if(!i[t(412)])return 0;this[t(410)]=!1}if(!y&&e[t(278)]){const n=i[t(260)][t(188)](((e,n)=>e+4+n[t(442)]),0);n!==r&&this[t(400)](e[t(278)],this.mp4[t(199)][t(434)],n-r)}n[t(434)]=this[t(335)](i[t(260)]),n[t(278)]=e[t(278)]}return e[t(451)]&&(n[t(385)]=e[t(385)],n[t(451)]=[{units:e.audio}],n.audioSampleAuxInfo=e[t(225)]),e[t(434)]||e[t(451)]?(this[t(423)][t(406)](n),0):(console.error(t(361)),0)}[p(335)](e){const t=p;let n=[],r=[],s=!1,i=!1;for(let o of e){let e=new A(o);e.type()!==A.IDR&&e[t(469)]()!==A.NDR||U[t(448)](e),n[t(294)]&&i&&(e[t(387)]||!e[t(495)])&&(r[t(462)]({units:n,keyFrame:s}),n=[],s=!1,i=!1),n[t(462)](e),s=s||e[t(459)](),i=i||e[t(495)]}if(n[t(294)])if(i)r[t(462)]({units:n,keyFrame:s});else{let e=r[t(294)]-1;e>=0&&(r[e].units=r[e][t(276)].concat(n))}return 1!==r[t(294)]&&console[t(230)](t(207)+r[t(294)]),r}[p(190)](e,t){const n=p;if(!e)return 0;const r=(e[0]<<8)+e[1],s=t+2+4;let i=0,o=2;for(;0<r&&o+s<=e[n(442)];){o+=t;const n=(e[o]<<8)+e[o+1],r=(e[o+2]<<24)+(e[o+3]<<16)+(e[o+4]<<8)+e[o+5];o+=6,i+=n+r}return i}patchSampleAuxinfo(e,t,n){const r=p;let s=2;if(0<(e[0]<<8)+e[1]&&s+(t+2+4)<=e[r(442)]){s+=t;let r=(e[s]<<8)+e[s+1];r+=n,r>=0&&(e[s]=r>>>8&255,e[s+1]=255&r)}return 0}[p(382)](){const e=p;if(this[e(234)]&&this[e(423)]&&this[e(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let t in this[e(423)][e(414)]){let n=this[e(423)][e(414)][t];const r="".concat(t,e(317))[e(365)](n[e(274)][e(449)],'"');if(window.clRtcDrmDebugLog&&console[e(383)](e(312),r),!F[e(408)](r))return console[e(370)](e(372)),!1;let s=this[e(327)][e(350)](r);this[e(398)][t]=new L(s,t,this[e(327)]),this.bufferControllers[t].on(e(370),this[e(403)][e(308)](this))}}}[p(313)](){const e=p;for(let t in this[e(398)])this[e(398)][t].doAppend()}onBuffer(e){const t=p;this[t(234)]&&this[t(398)]&&this[t(398)][e.type]&&this[t(398)][e[t(469)]][t(371)](e[t(214)])}[p(194)](){const e=p;window[e(251)]&&console.info("[MSE] sourceopen"),this[e(327)][e(185)]!==e(281)&&(this.mediaSource.duration=Number[e(391)],this[e(234)]=!0,"function"==typeof this[e(379)][e(336)]&&this[e(379)].onReady[e(394)](null,this[e(466)]),URL[e(235)](this.url),this[e(382)]())}[p(241)](){const e=p;window.clRtcDrmDebugLog&&console[e(383)](e(441)),this.mseReady=!1,this[e(227)]()}[p(403)](e){const t=p;console.warn(t(351),e),this.irrecoverableError=!0,this[t(227)](),"function"==typeof this[t(379)][t(266)]&&this[t(379)][t(266)][t(394)](null,e)}}var B={name:"castlabs-rtc-drm-transform",version:"2.4.1",description:"JS module which allows to play DRM protected RTCPeerConnection video in a HTMLVideoElement",type:"module",main:"rtc-drm-transform.js",scripts:{build:"rollup --config",lint:"eslint src/"},repository:{type:"git",url:"git+ssh://git@github.com/castlabs/cenc-remote-desktop.git"},keywords:["webrtc","insertable-streams","drm","drmtoday","widevine","playready","fairplay","windows","windows-server","macOS","X11","copy-protection","e2e-encryption"],author:"castLabs",license:"ISC",bugs:{url:"https://github.com/castlabs/cenc-remote-desktop/issues"},homepage:"https://github.com/castlabs/cenc-remote-desktop#readme",devDependencies:{"@eslint/js":"^9.11.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-strip":"^3.0.4","@rollup/plugin-terser":"^0.4.4","@rollup/plugin-typescript":"^12.1.0","@stylistic/eslint-plugin":"^2.8.0","@types/eslint__js":"^8.42.3",eslint:"^9.11.1","javascript-obfuscator":"^4.1.1",rollup:"^4.22.4","rollup-plugin-delete":"^2.1.0","rollup-plugin-dts":"^6.1.1","rollup-plugin-obfuscator":"^1.1.0",typescript:"^5.6.2","typescript-eslint":"^8.7.0"}};function N(e,t){const n=O();return(N=function(e,t){return n[e-=222]})(e,t)}!function(){const e=N,t=O();for(;;)try{if(409100===parseInt(e(228))/1*(-parseInt(e(229))/2)+-parseInt(e(222))/3*(parseInt(e(227))/4)+parseInt(e(226))/5+parseInt(e(224))/6+parseInt(e(223))/7+-parseInt(e(231))/8+parseInt(e(230))/9)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const P=()=>{let e=N(225)+(new Date).toISOString();return B&&(e=B.gitVersion),e};function O(){const e=["__dev_time__","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(O=function(){return e})()}const H=z;function z(e,t){const n=j();return(z=function(e,t){return n[e-=460]})(e,t)}!function(){const e=z,t=j();for(;;)try{if(139726===-parseInt(e(471))/1*(-parseInt(e(474))/2)+parseInt(e(479))/3+parseInt(e(473))/4*(parseInt(e(461))/5)+parseInt(e(487))/6+-parseInt(e(467))/7+-parseInt(e(482))/8+-parseInt(e(464))/9)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const q="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+H(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+H(460)+H(476)+H(480)+H(484)+H(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+H(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+H(477),K=Uint8Array[H(478)](window[H(470)](q),(e=>e.charCodeAt(0)));class V{constructor(e){this[H(488)]=e}[H(469)](){return this[H(488)]}[H(483)](){const e=H;switch(this[e(488)]){case e(489):return"https://lic.staging.drmtoday.com";case e(465):return e(481);default:return e(466)}}certificate(){return K}}function j(){const e=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(j=function(){return e})()}function W(e,t){const n=G();return(W=function(e,t){return n[e-=325]})(e,t)}function G(){const e=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(G=function(){return e})()}function Y(e,t){const n=$();return(Y=function(e,t){return n[e-=295]})(e,t)}V[H(468)]=new V(H(489)),V[H(486)]=new V(H(463)),V[H(472)]=new V(H(465)),function(){const e=W,t=G();for(;;)try{if(358550===parseInt(e(328))/1+-parseInt(e(332))/2*(-parseInt(e(336))/3)+-parseInt(e(338))/4*(-parseInt(e(342))/5)+-parseInt(e(344))/6+-parseInt(e(326))/7*(parseInt(e(333))/8)+parseInt(e(334))/9+parseInt(e(331))/10*(parseInt(e(330))/11))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(),function(){const e=Y,t=$();for(;;)try{if(178039===parseInt(e(305))/1*(-parseInt(e(297))/2)+-parseInt(e(295))/3+parseInt(e(310))/4*(parseInt(e(309))/5)+-parseInt(e(304))/6*(parseInt(e(296))/7)+parseInt(e(307))/8*(-parseInt(e(298))/9)+-parseInt(e(301))/10*(parseInt(e(302))/11)+-parseInt(e(300))/12*(-parseInt(e(308))/13))break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const _=[];let J=null,Q=0;function X(e){return!J&&function(){const e=Y;J=new Uint8Array([0,0,0,1,65,154,255,255]).buffer,_[e(303)](new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[e(306)]),_[e(303)](_[0][e(299)](0)),new Uint8Array(_[1]).set([16,0,50],27)}(),e?J:(Q^=1,_[Q])}function $(){const e=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return($=function(){return e})()}const Z=ie;function ee(){const e=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(ee=function(){return e})()}!function(){const e=ie,t=ee();for(;;)try{if(555073===-parseInt(e(419))/1*(parseInt(e(454))/2)+parseInt(e(495))/3+parseInt(e(496))/4*(-parseInt(e(417))/5)+-parseInt(e(498))/6*(-parseInt(e(459))/7)+parseInt(e(468))/8+-parseInt(e(447))/9+parseInt(e(443))/10)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();let te={licenseUrl:"",onFetch:void 0};const ne={},re=(e,t,n)=>{const r=ie,s=Uint8Array[r(511)];t*=s,n*=s;const i=(c=e)instanceof ArrayBuffer?c:c[ie(501)],o=e[r(418)],a=t;var c;let l=Math[r(486)](0,Math[r(458)](a,o)),u=Math[r(458)](l+Math[r(486)](n,0),o);return l/=s,u/=s,new Uint8Array(i,l,u-l)},se=(e,t=0,n=1/0)=>re(e,t,n);function ie(e,t){const n=ee();return(ie=function(e,t){return n[e-=417]})(e,t)}function oe(e,t,n=!1){const r=ie;if(!e)return"";let s=e;if(!n&&s.byteLength%2!=0)throw console[r(422)](r(499)),new Error(r(455));const i=se(s);let o;if((t&&255===i[0]&&254===i[1]||254===i[0]&&255===i[1])&&(s=i[r(494)](2)),s instanceof ArrayBuffer)o=s;else{const e=new Uint8Array(s[r(418)]);e[r(453)](se(s)),o=e[r(501)]}const a=Math[r(421)](s.byteLength/2),c=new Uint16Array(a),l=new DataView(o);for(let e=0;e<a;e++)c[e]=l[r(444)](2*e,t);return function(e){const t=ie;let n="";for(let r=0;r<e[t(470)];r+=16e3){const s=e[t(494)](r,r+16e3);n+=String[t(493)].apply(null,s)}return n}(c)}const ae=e=>{const t=ie;let n="";for(const r of e){let e=r.toString(16);1==e[t(470)]&&(e="0"+e),n+=e}return n};let ce=null;const le=e=>{const t=ie;return window[t(440)](String[t(493)][t(473)](null,e))[t(489)](/\+/g,"-")[t(489)](/\//g,"_")[t(489)](/=*$/,"")},ue=(e,t)=>{const n=ie,r=(e=>{const t=ie,n=JSON.parse((new TextDecoder)[t(423)](e));if(console[t(434)]("CK license request:",n),null===ce)throw new Error(t(507));const r=[];for(const e of n.kids){const n={kty:t(510),alg:t(446),kid:e,k:le(ce)};r[t(484)](n)}return(new TextEncoder)[t(485)](JSON[t(449)]({keys:r}))})(t.message);t[n(490)][n(492)](r)[n(461)]((function(e){const t=n;console[t(422)](t(448),e)}))},de=e=>{const t=ie,n=window[t(506)](e[t(489)](/-/g,"+")[t(489)](/_/g,"/")),r=new Uint8Array(n[t(470)]);for(let e=0;e<n.length;++e)r[e]=n[t(430)](e);return r},fe=(t,n,...r)=>e(void 0,[t,n,...r],void 0,(function*(e,t,n=!1){const r=ie,s=new Headers(ne);n&&s.append(r(497),r(482));const i={method:"POST",headers:s,body:t},o=yield te[r(502)]?te[r(502)](e,i):fetch(e,i);if(!o.ok)throw new Error(r(471)+o[r(432)]);return o})),he=(e,t)=>{const n=ie;fe(te[n(431)],t[n(441)])[n(477)]((e=>e[n(487)]()))[n(477)]((e=>{const r=n;window[r(483)]&&console.info(r(514),e.license);const s=de(e[r(478)])[r(501)];t[r(490)][r(492)](s)[r(461)]((e=>{console[r(422)]("Failed to update the session",e)}))}))[n(461)]((t=>{const r=n;e.dispatchEvent(new CustomEvent(r(491),{detail:{message:""+t}})),console[r(422)](t)}))},pe=(e,t)=>{const n=ie,r=((e,t)=>{const n=ie,r=new DOMParser;try{const e=oe(t,!0);if(e[n(424)](n(475))>-1){const t=r.parseFromString(e,n(482))[n(457)](n(508))[0][n(462)][0][n(439)];if(null===t)throw new Error("No PR challenge data!");return de(t)}console[n(480)](n(445))}catch(t){e.dispatchEvent(new CustomEvent(n(491),{detail:{message:""+t}})),console.error(t)}return null})(e,t.message);if(null===r)return e[n(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(n(476));fe(te[n(431)],r[n(501)],!0)[n(477)]((e=>e[n(472)]()))[n(477)]((r=>{const s=n;window[s(483)]&&console[s(425)](s(481),r);t[s(490)].update(r)[s(461)]((function(t){const n=s;e[n(505)](new CustomEvent(n(491),{detail:{message:n(433)+t}})),console[n(422)](n(448),t)}))}))[n(461)]((t=>{const r=n;e.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+t}})),console[r(422)](t)}))},me=(e,t)=>{const n=ie;fe(te[n(431)],t[n(441)])[n(477)]((e=>{const t=n,r=e.text();return window[t(483)]&&console.info("[FPS] License fetched:",e,r),r}))[n(477)]((e=>{const r=n;t[r(490)][r(492)](de(e))}))[n(461)]((t=>{const r=n;e.dispatchEvent(new CustomEvent(r(491),{detail:{message:""+t}})),console[r(422)](t)}))},ye=(e,t)=>{ne[e]=t},we=h[Z(426)];let ge=!we;const ve=new Map;function be(t){return e(this,void 0,void 0,(function*(){const e=ie;if(null===t[e(504)])throw new Error(e(456));const n=t[e(490)];if(null===n)throw new Error("No media element available!");const r=n[e(428)];if(null===r)throw new Error(e(452));const s=ae(new Uint8Array(t[e(504)])),i=s+n.id;let o=null;ve[e(469)](i)&&(o=ve.get(i),null!=o&&o.close(),ve[e(451)](i)),window[e(483)]&&console[e(425)](e(450),e(o?429:509));let a=null;try{a=r[e(479)](ge?"persistent-license":"temporary")}catch(t){console[e(434)]("EME createSession(persistent) failed:",t)}if(!a&&ge){ge=!1;try{a=r[e(479)](e(436))}catch(t){console[e(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[e(500)](e(460),(t=>{const r=e;t[r(490)][r(435)].forEach(((e,t)=>{const s=r;(e===s(466)||e===s(438)||e===s(465)||e===s(463))&&n[s(505)](new CustomEvent(s(491),{detail:{message:s(515)+ae(new Uint8Array(t))+s(488)+(s(513)+e+")"),keyId:t}}))}))})),we?a.addEventListener(e(441),me[e(467)](null,n),!1):-1!==s[e(424)](e(427))?a.addEventListener(e(441),he[e(467)](null,n),!1):-1!==s[e(424)](e(437))?a[e(500)](e(441),pe[e(467)](null,n),!1):a.addEventListener("message",ue[e(467)](null,n),!1),o)try{(yield a[e(420)](o[e(512)]))?ve[e(453)](i,a):n.dispatchEvent(new CustomEvent(e(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){n[e(505)](new CustomEvent(e(491),{detail:{message:e(464)+t}}))}else a[e(503)](t.initDataType,t[e(504)]).then((()=>{ge&&ve[e(453)](i,a)}))[e(461)]((t=>{const r=e;n[r(505)](new CustomEvent(r(491),{detail:{message:r(474)+t}}))}));else n[e(505)](new CustomEvent(e(491),{detail:{message:e(442)}}))}))}const Se=_e;function Ee(){const e=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(Ee=function(){return e})()}!function(){const e=_e,t=Ee();for(;;)try{if(932877===parseInt(e(543))/1*(parseInt(e(512))/2)+parseInt(e(473))/3*(parseInt(e(568))/4)+-parseInt(e(672))/5*(-parseInt(e(634))/6)+-parseInt(e(536))/7+parseInt(e(560))/8*(parseInt(e(627))/9)+-parseInt(e(682))/10+-parseInt(e(449))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const Ae=h[Se(626)],Ie=h[Se(602)],Ue=h[Se(498)],ke=h[Se(637)],Te=h[Se(579)],De=h.platform,Re=h[Se(673)],xe=ke||Te&&De===Se(564),Me=1e6*(Ie?82:Ue?220:120),Ce=Ie?5e3:2e3,Le=Ie?1.5:.5;function Fe(e){const t=Se;return typeof e!==t(692)||null===e||e instanceof Element||e instanceof V?e:function(e){const t=Se;return!!((null==e?void 0:e[t(515)])instanceof ArrayBuffer&&(null==e?void 0:e[t(683)]))}(e)?e[t(559)]():Array[t(563)](e)?e[t(454)](((e,t,n)=>(e[n]=Fe(t),e)),[]):e instanceof Object?Object[t(638)](e)[t(454)](((t,n)=>(t[n]=Fe(e[n]),t)),{}):e}class Be{constructor(e){const t=Se;this[t(545)]="",this.licenseUrl="",this[t(503)]="",this[t(669)]=[],this[t(497)]=Fe(e),this[t(664)]=null,this[t(521)]=0,this[t(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[t(596)]=0,this[t(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Ce,this.worker=null}}const Ne=new Map,Pe=new Uint8Array([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Oe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),He=new Uint8Array([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function ze(e,t){const n=Se;void 0!==t&&(e[n(497)][n(482)]=t),(void 0===e[n(497)][n(482)]||e[n(497)].mediaBufferMs<0)&&(e.config[n(482)]=100,Ie?e[n(497)][n(482)]=350:!Ue&&Re&&(e[n(497)][n(580)]===n(566)||e[n(461)])&&(e[n(497)][n(482)]=1400))}function qe(e){const t=Se;let n=!1;if((e[t(497)].video&&"clear"!==e[t(497)].video[t(619)]&&"HW"===e.config[t(471)][t(554)]||e[t(497)][t(463)]&&e[t(497)][t(463)].encryption!==t(670)&&"HW"===e[t(497)][t(463)][t(554)])&&(n=!0),e.hwSecurity=n,ze(e,e[t(497)][t(482)]),void 0===e.config.authToken){void 0===e.config[t(450)]&&(e[t(497)][t(450)]=t(525)),void 0===e[t(497)][t(551)]&&(e.config[t(551)]=t(507));const n=window[t(641)](JSON.stringify({userId:e.config[t(450)],sessionId:e[t(497)][t(551)],merchant:e.config[t(574)]}));ye(t(604),n)}else ye(t(516),e.config[t(462)]);for(const n of[e[t(497)].audio,e[t(497)][t(471)]])n&&n[t(619)]!==t(670)&&(n[t(646)]||(n[t(646)]=Oe),n.iv||(n.iv=He));e[t(546)]=void 0,e[t(545)]="",e[t(466)]="";const r=e.config[t(526)][t(470)]();var s;if(e[t(497)][t(580)]===t(549)?(e.keySystem=t(603),ce=Pe):e.config.type===t(459)?(e[t(503)]="com.widevine.alpha",Re&&n&&(e[t(503)]+=t(599)),e.config.wvCertificate?e[t(546)]=e[t(497)][t(506)]:e[t(497)][t(610)]?e[t(545)]=e[t(497)][t(610)]:e[t(546)]=e.config[t(526)][t(678)](),e.config.wvLicenseUrl?e[t(466)]=e[t(497)].wvLicenseUrl:e[t(466)]=r+t(681)):e[t(497)][t(580)]===t(566)?(e[t(503)]=t(616),e[t(497)][t(679)]?e.licenseUrl=e[t(497)][t(679)]:e[t(466)]=r+t(542)):e[t(497)].type===t(575)&&(e.keySystem="com.apple.fps",e.config[t(477)]?e[t(546)]=e[t(497)][t(477)]:e[t(497)][t(535)]?e.serverCertificateUrl=e.config[t(535)]:e[t(545)]=r+t(479)+e[t(497)].merchant,e[t(497)][t(680)]?e[t(466)]=e.config.fpsLicenseUrl:e.licenseUrl=r+t(578)),s={licenseUrl:e[t(466)],onFetch:e.config[t(645)]},te=s,e[t(669)]=[],e.config[t(580)]!==t(575)){e[t(669)][t(465)]({initDataTypes:[t(668)],sessionTypes:["persistent-license",t(529)]});for(const n of[e[t(497)][t(471)],e[t(497)][t(463)]])if(n&&n.encryption!==t(670)){const r=n==e[t(497)][t(471)]?t(471):t(463);let s;e[t(497)][t(580)]===t(459)?s="HW"===n[t(554)]?t(513):t(685):"PlayReady"===e[t(497)][t(580)]&&(s="HW"===n.robustness?t(474):t(508)),r===t(471)?e[t(669)][0][t(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===n[t(619)]?t(668):"cbcs-1-9",robustness:s||void 0}]:e[t(669)][0][t(595)]=[{contentType:t(691),encryptionScheme:n[t(619)]===t(668)?"cenc":t(671),robustness:s||void 0}]}}else e[t(669)]=[{initDataTypes:[t(630)],videoCapabilities:[{contentType:t(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:t(639),sessionTypes:["temporary"]}];window[t(600)]&&console.info(t(480),e)}function Ke(e){const t=Se;window[t(600)]&&console[t(556)](t(581));let n=e[t(497)].videoElement;(!e[t(497)][t(471)]||e.config[t(471)][t(619)]===t(670))&&(n=e.config.audioElement),e[t(664)]=null;const r=!e.ignoreAudio&&e[t(497)][t(463)]&&"clear"!==e[t(497)].audio[t(619)],s=e[t(497)][t(471)]&&e.config.video[t(619)]!==t(670);e[t(624)]=0,e[t(608)]=!0,e.keyFrameNeededPosted=!1,e[t(509)]=Ce,e[t(652)]=0,e[t(650)]=0,e[t(597)]=-1,e[t(596)]=0,e.jmuxer=new F({node:n,mode:r?t(s?663:463):"video",fps:60,drm:e}),Ue&&e[t(497)].videoElement&&e[t(497)][t(689)][t(448)]()[t(684)]((()=>{}))[t(476)]((()=>{}))}function Ve(e,t){const n=Se;0===e[n(652)]&&(e[n(652)]=t[n(667)],e[n(509)]=Ce,e[n(571)]=Date[n(591)]()+2e3);let r=null,s=!1;if(t.data[n(523)]<=4)console[n(495)](n(613)),s=!0;else{const i=new Uint8Array(t[n(496)],0,4);0!=i[0]||0!=i[1]||0!=i[2]||1!=i[3]?(console[n(495)](n(489)),s=!0):(r=function(e,t){const n=W,r=new DataView(e[n(335)]),s=e.data[n(346)]-2,i=r[n(340)](s);if(i<s){let e=s-i;if(69!==r[n(337)](s-1))return console[n(341)](n(339)),null;const o=1;if(r.getUint8(e++)>>>4!==o)return console[n(341)](n(329)),null;const a=new Uint8Array(i-2);let c=0,l=0;for(;e<s-1;){let t=r.getUint8(e++);l>1&&3===t&&(l=0,t=r.getUint8(e++)),0!==t?l=0:++l,a[c++]=t}const u=new DataView(a[n(343)]),d=t===n(327)?16:0,f=d+2+6*u.getUint16(d);return f+2>c?(console.error(n(325)),null):{sai:a[n(345)](0,f),offset:s-i,seq:u.getUint16(f)}}return null}(t,e[n(497)][n(471)][n(619)]),!r&&(console.warn(n(636)),s=!0))}if(r)if(-1===e[n(597)]){if(t[n(580)]!==n(611))return 0;e[n(597)]=r[n(547)]}else{const i=65535;let o=r.seq-e[n(597)];if(o<-(i>>1)&&(o+=i+1),o<=0)return window[n(600)]&&console[n(495)](n(654)+e[n(597)]+", curr: "+r[n(547)]),0;o>1&&(s=t[n(580)]!==n(611),console[n(495)](n(570)+e[n(597)]+n(502)+r[n(547)]+n(541)+s)),e.prevSeqNum=r[n(547)]}let i=0;s&&!e[n(664)][n(458)]&&(i=-1,e[n(664)][n(644)]());const o=(t[n(667)]-e[n(652)])/9e4;return r&&e[n(664)][n(522)]({video:new Uint8Array(t.data,0,r[n(456)]),videoSampleAuxInfo:r[n(612)],timestamp:o})<0&&(i=-1,console[n(495)](n(573)),Ke(e)),i>=0&&"key"===t[n(580)]&&(e[n(596)]=o,console[n(483)]((new Date)[n(552)]()[n(559)](11,-1)+" kf at "+o+", playback at "+e[n(497)].videoElement[n(625)])),i}function je(e){const t=Se,n=e.config[t(689)];if(!n||n[t(501)][t(584)]<1||n[t(505)]||n[t(625)]<Le)return;const r=e[t(497)].mediaBufferMs;if(void 0===r||r<0)throw new Error("targetLatency not set!");const s=n[t(501)][t(565)](n[t(501)][t(584)]-1),i=1e3*(s-n[t(625)])|0;if(!e[t(649)]&&function(e,t,n){const r=Se;let s;s=t<3*n>>>2?.875:t<=n?1:t<7*n>>>2?1.125:t<9*n>>>2?1.25:t<11*n>>>2?1.375:1.5,s!==e.playbackRate&&(e[r(606)]=s)}(n,i,r),!(i<r+50||i<5*r>>>2))if(e.lastKeyFrameTime>n[t(625)]+.1){const i=1e3*(s-e[t(596)])|0;i>40&&i>r-100?(window[t(600)]&&console.info((new Date).toISOString().slice(11,-1)+t(598)+(n[t(625)]+t(592)+e[t(596)]+" (")+(e.lastKeyFrameTime-n[t(625)])+")"),n[t(625)]=e[t(596)]):console[t(483)]((new Date)[t(552)]().slice(11,-1)+t(534)+i)}else!e[t(608)]&&Date[t(591)]()>e[t(571)]&&i>r+100&&i>3*r>>>1&&(window[t(600)]&&console[t(556)]((new Date).toISOString()[t(559)](11,-1)+t(490)+i+" ms)"),e[t(608)]=!0,e[t(509)]<16e3&&(e[t(509)]<<=1))}function We(e,t){const n=Se;var r;if(!e.jmuxer||e[n(538)])return 0;0===e[n(650)]&&(e[n(650)]=t[n(667)]);const s=(t[n(667)]-e.audioStartTimestamp)/48e3;if("cbcs"===(null===(r=e.config[n(463)])||void 0===r?void 0:r[n(619)]))return e[n(664)][n(522)]({audio:new Uint8Array(t[n(496)]),timestamp:s});const i=function(e){const t=W,n=new DataView(e.data),r=e.data[t(346)]-2,s=n.getUint16(r);if(s<r){let e=r-s;if(69!==n[t(337)](r-1))return console[t(341)](t(339)),null;const i=1;if(n[t(337)](e++)>>>4!==i)return console[t(341)](t(329)),null;const o=new Uint8Array(s-2);let a=0;for(;e<r-1;){const r=n[t(337)](e++);if(o[a++]=r,a>=16)break}return{sai:o,offset:r-s}}return null}(t);return i?e[n(664)][n(522)]({audio:new Uint8Array(t[n(496)],0,i[n(456)]),audioSampleAuxInfo:i[n(612)],timestamp:s}):(console[n(511)]("SampleAuxInfo extraction failed (audio)"),-1)}function Ge(e,t,n){const r=Se,s=Ze(n);return e[r(580)]?Ye(s,e,t):Je(s,e,t)}function Ye(e,t,n){const r=Se;if(e[r(497)][r(471)]&&"clear"===e.config[r(471)][r(619)])return null==n||n[r(632)](t),!1;const s=Date[r(591)]();if(t.type===r(611)){const n=window[r(600)];++e[r(521)]<(n?Number[r(478)]:5)&&(console[r(556)]((new Date)[r(552)]().slice(11,-1)+" "+t[r(580)]+", "+(t[r(496)].byteLength+r(455)+e[r(497)][r(689)][r(625)])),n&&1===e[r(521)]&&function(e,t=64,n=64){const r=Se,s=new Uint8Array(e[r(496)]);let i="",o=0;for(let e=0;e<t&&e<s[r(584)];++e)i+=(s[e]<16?"0":"")+s[e].toString(16)+" ";if(o<s[r(584)])for(o<s[r(584)]-n&&(i+=r(532),o=s[r(584)]-n);o<s[r(584)];o++)i+=(s[o]<16?"0":"")+s[o][r(621)](16)+" ";console.info("["+((e[r(580)]||r(463))+r(561))+r(569)+i[r(472)]())}(t,128,8)),e[r(608)]=!1,e[r(624)]=0,e[r(571)]=s+e[r(509)]}return e[r(624)]+=t.data[r(523)],!e[r(608)]&&e[r(624)]>Me&&(console[r(556)](r(585)),e[r(608)]=!0),e.jmuxer&&(Ve(e,t)<0?e[r(608)]=!0:je(e)),n?(!e[r(608)]||!xe)&&(t[r(496)]=X(e[r(608)]),n[r(632)](t)):e[r(608)]!=e[r(445)]&&(e.worker&&e[r(544)][r(660)](e[r(608)]),e[r(445)]=e[r(608)]),e[r(608)]}function _e(e,t){const n=Ee();return(_e=function(e,t){return n[e-=445]})(e,t)}function Je(e,t,n){const r=Se;return e[r(497)][r(463)]&&e[r(497)].audio[r(619)]!==r(670)?t[r(496)][r(523)]>0&&We(e,t):n&&n[r(632)](t),!1}function Qe(t){const n=Se;if(!t||typeof t!==n(692))throw new TypeError("Invalid config argument type, DRM config must be an object.");if(!(t[n(689)]instanceof HTMLVideoElement))throw new TypeError(n(633));if(t[n(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new TypeError(n(693));if(void 0!==t[n(482)]&&!Number[n(555)](t[n(482)]))throw new TypeError(n(460));let r=!1,s=!1,i=!1;const o=["cbcs",n(668),n(670)],a=["SW","HW"];for(const e of[t[n(471)],t[n(463)]])if(e){if(!o[n(557)](e[n(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[n(593)](", "));if(Ue&&"cenc"===e.encryption)throw new RangeError(n(688));if(e[n(619)]!==n(670)){if(s=!0,e.keyId){if(!(e[n(646)]instanceof Uint8Array)||16!==e.keyId[n(584)])throw new TypeError("DRM config keyId must be an instance of 16-byte long Uint8Array.");i=!0}else if(Ue)throw new ReferenceError(n(655));if(e.iv&&(!(e.iv instanceof Uint8Array)||16!==e.iv.length))throw new TypeError(n(618));if(e[n(554)]&&!a[n(557)](e.robustness))throw new RangeError(n(658)+a[n(593)](", "));if(e===t[n(471)]&&e[n(484)]!==n(537))throw new RangeError(n(615));Ue&&e===t.audio&&"opus"===e.codec&&(r=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[n(580)]&&(e[n(619)]!==n(668)&&console[n(495)](n(491)+e[n(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[n(557)]("f1")||console.warn(n(674)+t.sessionId+n(643)))}}if(s){const e=[V[n(558)],V.Staging,V[n(665)]];if(!e.includes(t[n(526)]))throw new RangeError(n(583)+e.join(", "));if(t[n(462)]&&typeof t[n(462)]!==n(533))throw new TypeError("Invalid authToken type ("+typeof t[n(462)]+n(530));if(t.type)if(Ue){if(t[n(580)]!==n(575))throw new RangeError(n(514)+t[n(580)]+"). Safari only supports FairPlay.")}else if(Te){if(t.type!==n(459)&&"ClearKey"!==t[n(580)])throw new RangeError("Invalid DRM type ("+t.type+n(675))}else if(ke&&t[n(580)]!==n(566)&&"Widevine"!==t[n(580)]&&"ClearKey"!==t[n(580)])throw new RangeError(n(514)+t.type+n(648))}void 0!==t.debugLog&&(window[n(600)]=t.debugLog),void 0!==t[n(446)]&&(window[n(517)]=t[n(446)]);let c=Ne.get(t[n(689)]);!c&&(c=new Be(t),Ne[n(494)](t[n(689)],c)),c.enabled=s,c[n(538)]=r,c[n(649)]=!r&&c[n(497)][n(463)]&&c[n(497)].audio.encryption!==n(670),s&&(c[n(497)].type||(c[n(497)][n(580)]=n(Ue?575:459)),i||c[n(497)][n(580)]===n(549)||(c[n(497)][n(580)]=n(549)),qe(c),function(t){e(this,void 0,void 0,(function*(){const e=_e;var n,r;let s=t[e(497)][e(689)];if((!t[e(497)][e(471)]||t[e(497)][e(471)].encryption===e(670))&&(s=t[e(497)][e(628)]),!s)throw new Error(e(492));s.src="",s[e(588)]=null,yield s.setMediaKeys(null);let i=null;try{i=yield navigator[e(528)](t[e(503)],t.emeConfig)}catch(e){}if(!i&&t[e(669)][0]){const s=null===(n=t[e(669)][0][e(647)])||void 0===n?void 0:n[e(553)](e(659));if(void 0!==s&&s>=0){null===(r=t.emeConfig[0].sessionTypes)||void 0===r||r[e(687)](s,1);try{i=yield navigator[e(528)](t[e(503)],t[e(669)])}catch(e){}}}if(!i){const n=e(576)+t[e(503)]+e(520);return s.dispatchEvent(new CustomEvent(e(640),{detail:{message:n}})),void console[e(511)](n)}let o=null;try{o=yield i.createMediaKeys()}catch(e){}if(!o){const n=e(540)+t[e(503)]+e(520);return s[e(453)](new CustomEvent("rtcdrmerror",{detail:{message:n}})),void console[e(511)](n)}if(t.serverCertificate)window.clRtcDrmDebugLog&&console[e(556)](e(487)+t[e(546)][e(523)]+e(464)),yield o[e(594)](t[e(546)]);else if(t.serverCertificateUrl){const n={method:e(469)},r=t.serverCertificateUrl;try{const i=yield t[e(497)].onFetch?t.config[e(645)](r,n):fetch(r,n);if(!i.ok){const t=e(601)+i[e(623)];return void s[e(453)](new CustomEvent(e(640),{detail:{message:t}}))}const a=yield i[e(457)]();window.clRtcDrmDebugLog&&console[e(556)]("Fetched certificate from "+r+", "+a[e(523)]+" bytes"),yield o[e(594)](a)}catch(t){const n=t.name+": "+t[e(622)];return console.error(n),void s[e(453)](new CustomEvent(e(640),{detail:{message:n}}))}}yield s[e(500)](o),s[e(519)]("encrypted",be),Ke(t)}))}(c)),c[n(497)][n(689)][n(519)](n(448),(function(){const e=n;c[e(497)][e(689)][e(625)]>.5&&(c[e(571)]=Date.now())}))}function Xe(e,t){const n=Se;let r=null;try{r=Ze(e)}catch(e){console[n(495)](e)}if(!Number[n(555)](t))throw new TypeError(n(676));r&&ze(r,t)}const $e=Se(582)+Se(587)+Se(548)+Se(653)+Se(590)+Se(620)+Se(614)+Se(504)+Se(518)+Se(452)+Se(642)+Se(686)+"meNeeded=$.data};";function Ze(e){const t=Se;if(0===Ne[t(677)])throw new TypeError(t(550));let n;if(e&&e[t(689)])n=e[t(689)];else{if(1!==Ne.size)throw new TypeError(t(510));n=Ne[t(638)]()[t(447)]()[t(531)]}const r=Ne[t(662)](n);if(!r){let e="";throw Ne[t(499)](((t,n)=>{e+=n.id+", "})),e=e.slice(0,-2),new TypeError(t(486)+n.id+t(657)+e+"]")}return r}function et(e,t){const n=Se;if(e&&e[n(497)][n(689)]){const r=e[n(497)][n(689)];if(r[n(501)].length>0){const e=r.buffered[n(565)](r[n(501)][n(584)]-1)-r[n(625)];t.playoutDelayHint=t.jitterBufferDelayHint=t.jitterBufferTarget=e}setTimeout(et,1e3,e,t)}}function tt(e,t){const n=Se;var r,s;const i=e[n(629)][n(524)];"video"===i&&(e[n(661)][n(475)]=e[n(661)][n(451)]=e[n(661)][n(605)]=0);const o=Ze(t),a=o[n(497)].videoElement,c=o[n(497)][n(628)];if(o[n(607)]){if(o[n(497)].customTransform)window.clRtcDrmDebugLog&&console[n(556)](n(468)+n(572));else if(window[n(600)]&&console[n(556)](n(467)+(n(Ae?589:609)+n(617))),Ae){if(o[n(544)]=function(e){const t=Se,n=window[t(493)]||window[t(488)],r=window[t(666)],s=window[t(586)];if(!(n&&r&&s&&e))return null;const i=new r([e]);return new s(n[t(631)](i))}($e),null==o[n(544)])throw new Error(n(539));o[n(544)][n(485)]=e=>{const t=n;e[t(496)][t(567)]===t(471)?Ye(o,e[t(496)].frame,null):Je(o,e[t(496)][t(651)],null)},e[n(661)].transform=new RTCRtpScriptTransform(o.worker,{operation:i})}else{const t=i===n(471)?Ye:Je,r={drm:o,transform:(e,n)=>{t(o,e,n)}},s=e.receiver.createEncodedStreams(),a=new TransformStream({transform:r.transform[n(656)](r)}),{readable:c,writable:l}=s;c[n(577)](a)[n(635)](l)}if("audio"===i&&(null===(r=o[n(497)][n(463)])||void 0===r?void 0:r.encryption)===n(670)){if(!c)return void console.warn(n(690));c[n(588)]!==e[n(481)][0]&&(c[n(588)]=e[n(481)][0]),o[n(497)].videoElement&&(e[n(661)][n(475)]=e[n(661)].jitterBufferDelayHint=e[n(661)][n(605)]=o[n(497)][n(482)],et(o,e[n(661)]))}else"video"===i&&"clear"===(null===(s=o.config[n(471)])||void 0===s?void 0:s[n(619)])&&a[n(588)]!==e[n(481)][0]&&(a.srcObject=e.streams[0])}else a[n(588)]!==e[n(481)][0]&&(a.srcObject=e[n(481)][0])}export{Qe as rtcDrmConfigure,V as rtcDrmEnvironments,Ge as rtcDrmFeedFrame,P as rtcDrmGetVersion,tt as rtcDrmOnTrack,Xe as rtcDrmSetBufferSize};
