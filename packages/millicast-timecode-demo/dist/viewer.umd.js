!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).viewer={})}(this,(function(e){"use strict";function t(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t=function(){return e};var e={},r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),s=new T(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return R()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=E(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function h(){}var m={};c(m,o,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(C([])));v&&v!==r&&n.call(v,o)&&(m=v);var y=h.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,s,a){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=h,c(y,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new w(u(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),c(y,a,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function r(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function a(e){o(s,n,i,a,c,"next",e)}function c(e){o(s,n,i,a,c,"throw",e)}a(void 0)}))}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw i}}return o}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}!function(){const e={MILLICAST_STREAM_NAME:"96",MILLICAST_ACCOUNT_ID:"kMH4vs"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(e){var t={exports:{}};return e(t,t.exports),t.exports}var h,m,g=function(e){return e&&e.Math==Math&&e},v=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof f&&f)||function(){return this}()||Function("return this")(),y=function(e){try{return!!e()}catch(e){return!0}},b=!y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),w=!y((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),E=Function.prototype.call,S=w?E.bind(E):function(){return E.apply(E,arguments)},I={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,C=T&&!I.call({1:2},1)?function(e){var t=T(this,e);return!!t&&t.enumerable}:I,R={f:C},A=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},x=Function.prototype,P=x.bind,O=x.call,_=w&&P.bind(O,O),N=w?function(e){return e&&_(e)}:function(e){return e&&function(){return O.apply(e,arguments)}},L=N({}.toString),k=N("".slice),D=function(e){return k(L(e),8,-1)},M=Object,B=N("".split),F=y((function(){return!M("z").propertyIsEnumerable(0)}))?function(e){return"String"==D(e)?B(e,""):M(e)}:M,U=TypeError,j=function(e){if(null==e)throw U("Can't call method on "+e);return e},V=function(e){return F(j(e))},G=function(e){return"function"==typeof e},z=function(e){return"object"==typeof e?null!==e:G(e)},Y=function(e){return G(e)?e:void 0},q=function(e,t){return arguments.length<2?Y(v[e]):v[e]&&v[e][t]},H=N({}.isPrototypeOf),W=q("navigator","userAgent")||"",X=v.process,K=v.Deno,J=X&&X.versions||K&&K.version,Q=J&&J.v8;Q&&(m=(h=Q.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!m&&W&&(!(h=W.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=W.match(/Chrome\/(\d+)/))&&(m=+h[1]);var Z=m,ee=!!Object.getOwnPropertySymbols&&!y((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Z&&Z<41})),te=ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,re=Object,ne=te?function(e){return"symbol"==typeof e}:function(e){var t=q("Symbol");return G(t)&&H(t.prototype,re(e))},ie=String,oe=function(e){try{return ie(e)}catch(e){return"Object"}},se=TypeError,ae=function(e){if(G(e))return e;throw se(oe(e)+" is not a function")},ce=function(e,t){var r=e[t];return null==r?void 0:ae(r)},ue=TypeError,le=Object.defineProperty,de=function(e,t){try{le(v,e,{value:t,configurable:!0,writable:!0})}catch(r){v[e]=t}return t},fe=v["__core-js_shared__"]||de("__core-js_shared__",{}),pe=p((function(e){(e.exports=function(e,t){return fe[e]||(fe[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),he=Object,me=function(e){return he(j(e))},ge=N({}.hasOwnProperty),ve=Object.hasOwn||function(e,t){return ge(me(e),t)},ye=0,be=Math.random(),we=N(1..toString),Ee=function(e){return"Symbol("+(void 0===e?"":e)+")_"+we(++ye+be,36)},Se=pe("wks"),Ie=v.Symbol,Te=Ie&&Ie.for,Ce=te?Ie:Ie&&Ie.withoutSetter||Ee,Re=function(e){if(!ve(Se,e)||!ee&&"string"!=typeof Se[e]){var t="Symbol."+e;ee&&ve(Ie,e)?Se[e]=Ie[e]:Se[e]=te&&Te?Te(t):Ce(t)}return Se[e]},Ae=TypeError,xe=Re("toPrimitive"),Pe=function(e){var t=function(e,t){if(!z(e)||ne(e))return e;var r,n=ce(e,xe);if(n){if(void 0===t&&(t="default"),r=S(n,e,t),!z(r)||ne(r))return r;throw Ae("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var r,n;if("string"===t&&G(r=e.toString)&&!z(n=S(r,e)))return n;if(G(r=e.valueOf)&&!z(n=S(r,e)))return n;if("string"!==t&&G(r=e.toString)&&!z(n=S(r,e)))return n;throw ue("Can't convert object to primitive value")}(e,t)}(e,"string");return ne(t)?t:t+""},Oe=v.document,_e=z(Oe)&&z(Oe.createElement),Ne=function(e){return _e?Oe.createElement(e):{}},Le=!b&&!y((function(){return 7!=Object.defineProperty(Ne("div"),"a",{get:function(){return 7}}).a})),ke=Object.getOwnPropertyDescriptor,De={f:b?ke:function(e,t){if(e=V(e),t=Pe(t),Le)try{return ke(e,t)}catch(e){}if(ve(e,t))return A(!S(R.f,e,t),e[t])}},Me=b&&y((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Be=String,Fe=TypeError,Ue=function(e){if(z(e))return e;throw Fe(Be(e)+" is not an object")},je=TypeError,Ve=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,ze={f:b?Me?function(e,t,r){if(Ue(e),t=Pe(t),Ue(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=Ge(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return Ve(e,t,r)}:Ve:function(e,t,r){if(Ue(e),t=Pe(t),Ue(r),Le)try{return Ve(e,t,r)}catch(e){}if("get"in r||"set"in r)throw je("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},Ye=b?function(e,t,r){return ze.f(e,t,A(1,r))}:function(e,t,r){return e[t]=r,e},qe=Function.prototype,$e=b&&Object.getOwnPropertyDescriptor,He=ve(qe,"name"),We={EXISTS:He,PROPER:He&&"something"===function(){}.name,CONFIGURABLE:He&&(!b||b&&$e(qe,"name").configurable)},Xe=N(Function.toString);G(fe.inspectSource)||(fe.inspectSource=function(e){return Xe(e)});var Ke,Je,Qe,Ze=fe.inspectSource,et=v.WeakMap,tt=G(et)&&/native code/.test(Ze(et)),rt=pe("keys"),nt=function(e){return rt[e]||(rt[e]=Ee(e))},it={},ot=v.TypeError,st=v.WeakMap;if(tt||fe.state){var at=fe.state||(fe.state=new st),ct=N(at.get),ut=N(at.has),lt=N(at.set);Ke=function(e,t){if(ut(at,e))throw new ot("Object already initialized");return t.facade=e,lt(at,e,t),t},Je=function(e){return ct(at,e)||{}},Qe=function(e){return ut(at,e)}}else{var dt=nt("state");it[dt]=!0,Ke=function(e,t){if(ve(e,dt))throw new ot("Object already initialized");return t.facade=e,Ye(e,dt,t),t},Je=function(e){return ve(e,dt)?e[dt]:{}},Qe=function(e){return ve(e,dt)}}var ft={set:Ke,get:Je,has:Qe,enforce:function(e){return Qe(e)?Je(e):Ke(e,{})},getterFor:function(e){return function(t){var r;if(!z(t)||(r=Je(t)).type!==e)throw ot("Incompatible receiver, "+e+" required");return r}}},pt=p((function(e){var t=We.CONFIGURABLE,r=ft.enforce,n=ft.get,i=Object.defineProperty,o=b&&!y((function(){return 8!==i((function(){}),"length",{value:8}).length})),s=String(String).split("String"),a=e.exports=function(e,n,a){"Symbol("===String(n).slice(0,7)&&(n="["+String(n).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),a&&a.getter&&(n="get "+n),a&&a.setter&&(n="set "+n),(!ve(e,"name")||t&&e.name!==n)&&(b?i(e,"name",{value:n,configurable:!0}):e.name=n),o&&a&&ve(a,"arity")&&e.length!==a.arity&&i(e,"length",{value:a.arity});try{a&&ve(a,"constructor")&&a.constructor?b&&i(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var c=r(e);return ve(c,"source")||(c.source=s.join("string"==typeof n?n:"")),e};Function.prototype.toString=a((function(){return G(this)&&n(this).source||Ze(this)}),"toString")})),ht=function(e,t,r,n){n||(n={});var i=n.enumerable,o=void 0!==n.name?n.name:t;if(G(r)&&pt(r,o,n),n.global)i?e[t]=r:de(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=r:ze.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},mt=Math.ceil,gt=Math.floor,vt=Math.trunc||function(e){var t=+e;return(t>0?gt:mt)(t)},yt=function(e){var t=+e;return t!=t||0===t?0:vt(t)},bt=Math.max,wt=Math.min,Et=function(e,t){var r=yt(e);return r<0?bt(r+t,0):wt(r,t)},St=Math.min,It=function(e){return e>0?St(yt(e),9007199254740991):0},Tt=function(e){return It(e.length)},Ct=function(e){return function(t,r,n){var i,o=V(t),s=Tt(o),a=Et(n,s);if(e&&r!=r){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}},Rt={includes:Ct(!0),indexOf:Ct(!1)},At=Rt.indexOf,xt=N([].push),Pt=function(e,t){var r,n=V(e),i=0,o=[];for(r in n)!ve(it,r)&&ve(n,r)&&xt(o,r);for(;t.length>i;)ve(n,r=t[i++])&&(~At(o,r)||xt(o,r));return o},Ot=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_t=Ot.concat("length","prototype"),Nt={f:Object.getOwnPropertyNames||function(e){return Pt(e,_t)}},Lt={f:Object.getOwnPropertySymbols},kt=N([].concat),Dt=q("Reflect","ownKeys")||function(e){var t=Nt.f(Ue(e)),r=Lt.f;return r?kt(t,r(e)):t},Mt=function(e,t,r){for(var n=Dt(t),i=ze.f,o=De.f,s=0;s<n.length;s++){var a=n[s];ve(e,a)||r&&ve(r,a)||i(e,a,o(t,a))}},Bt=/#|\.prototype\./,Ft=function(e,t){var r=jt[Ut(e)];return r==Gt||r!=Vt&&(G(t)?y(t):!!t)},Ut=Ft.normalize=function(e){return String(e).replace(Bt,".").toLowerCase()},jt=Ft.data={},Vt=Ft.NATIVE="N",Gt=Ft.POLYFILL="P",zt=Ft,Yt=De.f,qt=function(e,t){var r,n,i,o,s,a=e.target,c=e.global,u=e.stat;if(r=c?v:u?v[a]||de(a,{}):(v[a]||{}).prototype)for(n in t){if(o=t[n],i=e.dontCallGetSet?(s=Yt(r,n))&&s.value:r[n],!zt(c?n:a+(u?".":"#")+n,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Mt(o,i)}(e.sham||i&&i.sham)&&Ye(o,"sham",!0),ht(r,n,o,e)}},$t=Array.isArray||function(e){return"Array"==D(e)},Ht=TypeError,Wt=function(e){if(e>9007199254740991)throw Ht("Maximum allowed index exceeded");return e},Xt=function(e,t,r){var n=Pe(t);n in e?ze.f(e,n,A(0,r)):e[n]=r},Kt={};Kt[Re("toStringTag")]="z";var Jt="[object z]"===String(Kt),Qt=Re("toStringTag"),Zt=Object,er="Arguments"==D(function(){return arguments}()),tr=Jt?D:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Zt(e),Qt))?r:er?D(t):"Object"==(n=D(t))&&G(t.callee)?"Arguments":n},rr=function(){},nr=[],ir=q("Reflect","construct"),or=/^\s*(?:class|function)\b/,sr=N(or.exec),ar=!or.exec(rr),cr=function(e){if(!G(e))return!1;try{return ir(rr,nr,e),!0}catch(e){return!1}},ur=function(e){if(!G(e))return!1;switch(tr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ar||!!sr(or,Ze(e))}catch(e){return!0}};ur.sham=!0;var lr=!ir||y((function(){var e;return cr(cr.call)||!cr(Object)||!cr((function(){e=!0}))||e}))?ur:cr,dr=Re("species"),fr=Array,pr=function(e,t){return new(function(e){var t;return $t(e)&&(t=e.constructor,(lr(t)&&(t===fr||$t(t.prototype))||z(t)&&null===(t=t[dr]))&&(t=void 0)),void 0===t?fr:t}(e))(0===t?0:t)},hr=Re("species"),mr=function(e){return Z>=51||!y((function(){var t=[];return(t.constructor={})[hr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},gr=Re("isConcatSpreadable"),vr=Z>=51||!y((function(){var e=[];return e[gr]=!1,e.concat()[0]!==e})),yr=mr("concat"),br=function(e){if(!z(e))return!1;var t=e[gr];return void 0!==t?!!t:$t(e)};qt({target:"Array",proto:!0,arity:1,forced:!vr||!yr},{concat:function(e){var t,r,n,i,o,s=me(this),a=pr(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(br(o=-1===t?s:arguments[t]))for(i=Tt(o),Wt(c+i),r=0;r<i;r++,c++)r in o&&Xt(a,c,o[r]);else Wt(c+1),Xt(a,c++,o);return a.length=c,a}});var wr=N([].slice),Er=mr("slice"),Sr=Re("species"),Ir=Array,Tr=Math.max;qt({target:"Array",proto:!0,forced:!Er},{slice:function(e,t){var r,n,i,o=V(this),s=Tt(o),a=Et(e,s),c=Et(void 0===t?s:t,s);if($t(o)&&(r=o.constructor,(lr(r)&&(r===Ir||$t(r.prototype))||z(r)&&null===(r=r[Sr]))&&(r=void 0),r===Ir||void 0===r))return wr(o,a,c);for(n=new(void 0===r?Ir:r)(Tr(c-a,0)),i=0;a<c;a++,i++)a in o&&Xt(n,i,o[a]);return n.length=i,n}});var Cr=N(N.bind),Rr=function(e,t){return ae(e),void 0===t?e:w?Cr(e,t):function(){return e.apply(t,arguments)}},Ar=N([].push),xr=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,u,l,d){for(var f,p,h=me(c),m=F(h),g=Rr(u,l),v=Tt(m),y=0,b=d||pr,w=t?b(c,v):r||s?b(c,0):void 0;v>y;y++)if((a||y in m)&&(p=g(f=m[y],y,h),e))if(t)w[y]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:Ar(w,f)}else switch(e){case 4:return!1;case 7:Ar(w,f)}return o?-1:n||i?i:w}},Pr={forEach:xr(0),map:xr(1),filter:xr(2),some:xr(3),every:xr(4),find:xr(5),findIndex:xr(6),filterReject:xr(7)},Or=Pr.map,_r=mr("map");qt({target:"Array",proto:!0,forced:!_r},{map:function(e){return Or(this,e,arguments.length>1?arguments[1]:void 0)}});var Nr=Function.prototype,Lr=Nr.apply,kr=Nr.call,Dr="object"==typeof Reflect&&Reflect.apply||(w?kr.bind(Lr):function(){return kr.apply(Lr,arguments)}),Mr=q("JSON","stringify"),Br=N(/./.exec),Fr=N("".charAt),Ur=N("".charCodeAt),jr=N("".replace),Vr=N(1..toString),Gr=/[\uD800-\uDFFF]/g,zr=/^[\uD800-\uDBFF]$/,Yr=/^[\uDC00-\uDFFF]$/,qr=!ee||y((function(){var e=q("Symbol")();return"[null]"!=Mr([e])||"{}"!=Mr({a:e})||"{}"!=Mr(Object(e))})),$r=y((function(){return'"\\udf06\\ud834"'!==Mr("\udf06\ud834")||'"\\udead"'!==Mr("\udead")})),Hr=function(e,t){var r=wr(arguments),n=t;if((z(t)||void 0!==e)&&!ne(e))return $t(t)||(t=function(e,t){if(G(n)&&(t=S(n,this,e,t)),!ne(t))return t}),r[1]=t,Dr(Mr,null,r)},Wr=function(e,t,r){var n=Fr(r,t-1),i=Fr(r,t+1);return Br(zr,e)&&!Br(Yr,i)||Br(Yr,e)&&!Br(zr,n)?"\\u"+Vr(Ur(e,0),16):e};Mr&&qt({target:"JSON",stat:!0,arity:3,forced:qr||$r},{stringify:function(e,t,r){var n=wr(arguments),i=Dr(qr?Hr:Mr,null,n);return $r&&"string"==typeof i?jr(i,Gr,Wr):i}});var Xr=p((function(e){!function(t){var r,n={VERSION:"1.6.1"},i={},o=function(e,t){return function(){return t.apply(e,arguments)}},s=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])!(e in n)&&r[t].hasOwnProperty(e)&&(n[e]=r[t][e]);return n},a=function(e,t){return{value:e,name:t}};n.TRACE=a(1,"TRACE"),n.DEBUG=a(2,"DEBUG"),n.INFO=a(3,"INFO"),n.TIME=a(4,"TIME"),n.WARN=a(5,"WARN"),n.ERROR=a(8,"ERROR"),n.OFF=a(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(n.TRACE,arguments)},debug:function(){this.invoke(n.DEBUG,arguments)},info:function(){this.invoke(n.INFO,arguments)},warn:function(){this.invoke(n.WARN,arguments)},error:function(){this.invoke(n.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(n.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(n.TIME,[e,"end"])},invoke:function(e,t){r&&this.enabledFor(e)&&r(t,s({level:e},this.context))}};var u,l=new c({filterLevel:n.OFF});(u=n).enabledFor=o(l,l.enabledFor),u.trace=o(l,l.trace),u.debug=o(l,l.debug),u.time=o(l,l.time),u.timeEnd=o(l,l.timeEnd),u.info=o(l,l.info),u.warn=o(l,l.warn),u.error=o(l,l.error),u.log=u.info,n.setHandler=function(e){r=e},n.setLevel=function(e){for(var t in l.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},n.getLevel=function(){return l.getLevel()},n.get=function(e){return i[e]||(i[e]=new c(s({name:e},l.context)))},n.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,o){i=Array.prototype.slice.call(i);var s,a=console.log;o.level===n.TIME?(s=(o.name?"["+o.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(s):t[s]=(new Date).getTime():console.timeEnd?console.timeEnd(s):r(a,[s+": "+((new Date).getTime()-t[s])+"ms"])):(o.level===n.WARN&&console.warn?a=console.warn:o.level===n.ERROR&&console.error?a=console.error:o.level===n.INFO&&console.info?a=console.info:o.level===n.DEBUG&&console.debug?a=console.debug:o.level===n.TRACE&&console.trace&&(a=console.trace),e.formatter(i,o),r(a,i))}},n.useDefaults=function(e){n.setLevel(e&&e.defaultLevel||n.DEBUG),n.setHandler(n.createDefaultHandler(e))},n.setDefaults=n.useDefaults,e.exports?e.exports=n:(n._prevLogger=t.Logger,n.noConflict=function(){return t.Logger=n._prevLogger,n},t.Logger=n)}(f)}));Xr.useDefaults({defaultLevel:Xr.TRACE});const Kr=(e,t)=>{e.unshift("[".concat(t.name||"Global","] ").concat((new Date).toISOString()," - ").concat(t.level.name," -"))},Jr=(e,t)=>t?e.value>=rn[t].value:e.value>=tn.value,Qr=Xr.createDefaultHandler({formatter:Kr});Xr.setHandler(((e,t)=>{((e,t)=>{e=(e=Array.prototype.slice.call(e)).map((e=>"object"==typeof e?JSON.stringify(e):e)),Kr(e,t),0!==Zr?(en.push(e.join(" ")),en.length>=Zr&&(en=en.slice(-Zr))):en=[]})(e,t),Jr(t.level,t.name)&&Qr(e,t);var r,n=d(nn);try{for(n.s();!(r=n.n()).done;){const n=r.value,i=n.handler,o=n.level;t.level.value>=o.value&&i(e,t)}}catch(e){n.e(e)}finally{n.f()}}));let Zr=1e4,en=[],tn=Xr.OFF;const rn={},nn=[],on=i(i({},Xr),{},{enabledFor:Jr,getHistory:()=>en,getHistoryMaxSize:()=>Zr,setHistoryMaxSize:e=>{Zr=e},setLevel:e=>{tn=e;for(const t in rn)rn[t]=e},getLevel:()=>tn,get:e=>{rn[e]||(rn[e]=tn);const t=Xr.get(e);return t.setLevel=t=>{rn[e]=t},t.getLevel=()=>rn[e],t},setHandler:(e,t)=>{nn.push({handler:e,level:t})}});var sn,an,cn,un,ln="process"==D(v.process),dn=String,fn=TypeError,pn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=N(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return Ue(r),function(e){if("object"==typeof e||G(e))return e;throw fn("Can't set "+dn(e)+" as a prototype")}(n),t?e(r,n):r.__proto__=n,r}}():void 0),hn=ze.f,mn=Re("toStringTag"),gn=function(e,t,r){e&&!r&&(e=e.prototype),e&&!ve(e,mn)&&hn(e,mn,{configurable:!0,value:t})},vn=Re("species"),yn=function(e){var t=q(e),r=ze.f;b&&t&&!t[vn]&&r(t,vn,{configurable:!0,get:function(){return this}})},bn=TypeError,wn=function(e,t){if(H(t,e))return e;throw bn("Incorrect invocation")},En=TypeError,Sn=Re("species"),In=function(e,t){var r,n=Ue(e).constructor;return void 0===n||null==(r=Ue(n)[Sn])?t:function(e){if(lr(e))return e;throw En(oe(e)+" is not a constructor")}(r)},Tn=q("document","documentElement"),Cn=TypeError,Rn=function(e,t){if(e<t)throw Cn("Not enough arguments");return e},An=/(?:ipad|iphone|ipod).*applewebkit/i.test(W),xn=v.setImmediate,Pn=v.clearImmediate,On=v.process,_n=v.Dispatch,Nn=v.Function,Ln=v.MessageChannel,kn=v.String,Dn=0,Mn={};try{sn=v.location}catch(n){}var Bn=function(e){if(ve(Mn,e)){var t=Mn[e];delete Mn[e],t()}},Fn=function(e){return function(){Bn(e)}},Un=function(e){Bn(e.data)},jn=function(e){v.postMessage(kn(e),sn.protocol+"//"+sn.host)};xn&&Pn||(xn=function(e){Rn(arguments.length,1);var t=G(e)?e:Nn(e),r=wr(arguments,1);return Mn[++Dn]=function(){Dr(t,void 0,r)},an(Dn),Dn},Pn=function(e){delete Mn[e]},ln?an=function(e){On.nextTick(Fn(e))}:_n&&_n.now?an=function(e){_n.now(Fn(e))}:Ln&&!An?(un=(cn=new Ln).port2,cn.port1.onmessage=Un,an=Rr(un.postMessage,un)):v.addEventListener&&G(v.postMessage)&&!v.importScripts&&sn&&"file:"!==sn.protocol&&!y(jn)?(an=jn,v.addEventListener("message",Un,!1)):an="onreadystatechange"in Ne("script")?function(e){Tn.appendChild(Ne("script")).onreadystatechange=function(){Tn.removeChild(this),Bn(e)}}:function(e){setTimeout(Fn(e),0)});var Vn,Gn,zn,Yn,qn,$n,Hn,Wn,Xn={set:xn,clear:Pn},Kn=/ipad|iphone|ipod/i.test(W)&&void 0!==v.Pebble,Jn=/web0s(?!.*chrome)/i.test(W),Qn=De.f,Zn=Xn.set,ei=v.MutationObserver||v.WebKitMutationObserver,ti=v.document,ri=v.process,ni=v.Promise,ii=Qn(v,"queueMicrotask"),oi=ii&&ii.value;oi||(Vn=function(){var e,t;for(ln&&(e=ri.domain)&&e.exit();Gn;){t=Gn.fn,Gn=Gn.next;try{t()}catch(e){throw Gn?Yn():zn=void 0,e}}zn=void 0,e&&e.enter()},An||ln||Jn||!ei||!ti?!Kn&&ni&&ni.resolve?((Hn=ni.resolve(void 0)).constructor=ni,Wn=Rr(Hn.then,Hn),Yn=function(){Wn(Vn)}):ln?Yn=function(){ri.nextTick(Vn)}:(Zn=Rr(Zn,v),Yn=function(){Zn(Vn)}):(qn=!0,$n=ti.createTextNode(""),new ei(Vn).observe($n,{characterData:!0}),Yn=function(){$n.data=qn=!qn}));var si=oi||function(e){var t={fn:e,next:void 0};zn&&(zn.next=t),Gn||(Gn=t,Yn()),zn=t},ai=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ci=function(){this.head=null,this.tail=null};ci.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ui=ci,li=v.Promise,di="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,fi=!di&&!ln&&"object"==typeof window&&"object"==typeof document;li&&li.prototype;var pi,hi,mi,gi=Re("species"),vi=!1,yi=G(v.PromiseRejectionEvent),bi=zt("Promise",(function(){var e=Ze(li),t=e!==String(li);if(!t&&66===Z)return!0;if(!Z||Z<51||!/native code/.test(e)){var r=new li((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[gi]=n,!(vi=r.then((function(){}))instanceof n))return!0}return!t&&(fi||di)&&!yi})),wi={CONSTRUCTOR:bi,REJECTION_EVENT:yi,SUBCLASSING:vi},Ei=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=ae(t),this.reject=ae(r)},Si={f:function(e){return new Ei(e)}},Ii=Xn.set,Ti=wi.CONSTRUCTOR,Ci=wi.REJECTION_EVENT,Ri=wi.SUBCLASSING,Ai=ft.getterFor("Promise"),xi=ft.set,Pi=li&&li.prototype,Oi=li,_i=Pi,Ni=v.TypeError,Li=v.document,ki=v.process,Di=Si.f,Mi=Di,Bi=!!(Li&&Li.createEvent&&v.dispatchEvent),Fi=function(e){var t;return!(!z(e)||!G(t=e.then))&&t},Ui=function(e,t){var r,n,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{a?(s||(2===t.rejection&&Yi(t),t.rejection=1),!0===a?r=o:(l&&l.enter(),r=a(o),l&&(l.exit(),i=!0)),r===e.promise?u(Ni("Promise-chain cycle")):(n=Fi(r))?S(n,r,c,u):c(r)):u(o)}catch(e){l&&!i&&l.exit(),u(e)}},ji=function(e,t){e.notified||(e.notified=!0,si((function(){for(var r,n=e.reactions;r=n.get();)Ui(r,e);e.notified=!1,t&&!e.rejection&&Gi(e)})))},Vi=function(e,t,r){var n,i;Bi?((n=Li.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),v.dispatchEvent(n)):n={promise:t,reason:r},!Ci&&(i=v["on"+e])?i(n):"unhandledrejection"===e&&function(e,t){var r=v.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))}("Unhandled promise rejection",r)},Gi=function(e){S(Ii,v,(function(){var t,r=e.facade,n=e.value;if(zi(e)&&(t=ai((function(){ln?ki.emit("unhandledRejection",n,r):Vi("unhandledrejection",r,n)})),e.rejection=ln||zi(e)?2:1,t.error))throw t.value}))},zi=function(e){return 1!==e.rejection&&!e.parent},Yi=function(e){S(Ii,v,(function(){var t=e.facade;ln?ki.emit("rejectionHandled",t):Vi("rejectionhandled",t,e.value)}))},qi=function(e,t,r){return function(n){e(t,n,r)}},$i=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,ji(e,!0))},Hi=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw Ni("Promise can't be resolved itself");var n=Fi(t);n?si((function(){var r={done:!1};try{S(n,t,qi(Hi,r,e),qi($i,r,e))}catch(t){$i(r,t,e)}})):(e.value=t,e.state=1,ji(e,!1))}catch(t){$i({done:!1},t,e)}}};if(Ti&&(_i=(Oi=function(e){wn(this,_i),ae(e),S(pi,this);var t=Ai(this);try{e(qi(Hi,t),qi($i,t))}catch(e){$i(t,e)}}).prototype,(pi=function(e){xi(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new ui,rejection:!1,state:0,value:void 0})}).prototype=ht(_i,"then",(function(e,t){var r=Ai(this),n=Di(In(this,Oi));return r.parent=!0,n.ok=!G(e)||e,n.fail=G(t)&&t,n.domain=ln?ki.domain:void 0,0==r.state?r.reactions.add(n):si((function(){Ui(n,r)})),n.promise})),hi=function(){var e=new pi,t=Ai(e);this.promise=e,this.resolve=qi(Hi,t),this.reject=qi($i,t)},Si.f=Di=function(e){return e===Oi||void 0===e?new hi(e):Mi(e)},G(li)&&Pi!==Object.prototype)){mi=Pi.then,Ri||ht(Pi,"then",(function(e,t){var r=this;return new Oi((function(e,t){S(mi,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete Pi.constructor}catch(n){}pn&&pn(Pi,_i)}qt({global:!0,constructor:!0,wrap:!0,forced:Ti},{Promise:Oi}),gn(Oi,"Promise",!1),yn("Promise");var Wi={},Xi=Re("iterator"),Ki=Array.prototype,Ji=function(e){return void 0!==e&&(Wi.Array===e||Ki[Xi]===e)},Qi=Re("iterator"),Zi=function(e){if(null!=e)return ce(e,Qi)||ce(e,"@@iterator")||Wi[tr(e)]},eo=TypeError,to=function(e,t){var r=arguments.length<2?Zi(e):t;if(ae(r))return Ue(S(r,e));throw eo(oe(e)+" is not iterable")},ro=function(e,t,r){var n,i;Ue(e);try{if(!(n=ce(e,"return"))){if("throw"===t)throw r;return r}n=S(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return Ue(n),r},no=TypeError,io=function(e,t){this.stopped=e,this.result=t},oo=io.prototype,so=function(e,t,r){var n,i,o,s,a,c,u,l=r&&r.that,d=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),m=Rr(t,l),g=function(e){return n&&ro(n,"normal",e),new io(!0,e)},v=function(e){return d?(Ue(e),h?m(e[0],e[1],g):m(e[0],e[1])):h?m(e,g):m(e)};if(f)n=e.iterator;else if(p)n=e;else{if(!(i=Zi(e)))throw no(oe(e)+" is not iterable");if(Ji(i)){for(o=0,s=Tt(e);s>o;o++)if((a=v(e[o]))&&H(oo,a))return a;return new io(!1)}n=to(e,i)}for(c=f?e.next:n.next;!(u=S(c,n)).done;){try{a=v(u.value)}catch(e){ro(n,"throw",e)}if("object"==typeof a&&a&&H(oo,a))return a}return new io(!1)},ao=Re("iterator"),co=!1;try{var uo=0,lo={next:function(){return{done:!!uo++}},return:function(){co=!0}};lo[ao]=function(){return this},Array.from(lo,(function(){throw 2}))}catch(n){}var fo=function(e,t){if(!t&&!co)return!1;var r=!1;try{var n={};n[ao]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},po=wi.CONSTRUCTOR||!fo((function(e){li.all(e).then(void 0,(function(){}))}));qt({target:"Promise",stat:!0,forced:po},{all:function(e){var t=this,r=Si.f(t),n=r.resolve,i=r.reject,o=ai((function(){var r=ae(t.resolve),o=[],s=0,a=1;so(e,(function(e){var c=s++,u=!1;a++,S(r,t,e).then((function(e){u||(u=!0,o[c]=e,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise}});var ho=wi.CONSTRUCTOR,mo=li&&li.prototype;if(qt({target:"Promise",proto:!0,forced:ho,real:!0},{catch:function(e){return this.then(void 0,e)}}),G(li)){var go=q("Promise").prototype.catch;mo.catch!==go&&ht(mo,"catch",go,{unsafe:!0})}qt({target:"Promise",stat:!0,forced:po},{race:function(e){var t=this,r=Si.f(t),n=r.reject,i=ai((function(){var i=ae(t.resolve);so(e,(function(e){S(i,t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}}),qt({target:"Promise",stat:!0,forced:wi.CONSTRUCTOR},{reject:function(e){var t=Si.f(this);return S(t.reject,void 0,e),t.promise}});var vo=wi.CONSTRUCTOR;q("Promise"),qt({target:"Promise",stat:!0,forced:vo},{resolve:function(e){return function(e,t){if(Ue(e),z(t)&&t.constructor===e)return t;var r=Si.f(e);return(0,r.resolve)(t),r.promise}(this,e)}});var yo=ze.f,bo=function(e,t,r){r in e||yo(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})},wo=function(e,t,r){var n,i;return pn&&G(n=t.constructor)&&n!==r&&z(i=n.prototype)&&i!==r.prototype&&pn(e,i),e},Eo=String,So=function(e){if("Symbol"===tr(e))throw TypeError("Cannot convert a Symbol value to a string");return Eo(e)},Io=function(e,t){return void 0===e?arguments.length<2?"":t:So(e)},To=function(e,t){z(t)&&"cause"in t&&Ye(e,"cause",t.cause)},Co=Error,Ro=N("".replace),Ao=String(Co("zxcasd").stack),xo=/\n\s*at [^:]*:[^\n]*/,Po=xo.test(Ao),Oo=function(e,t){if(Po&&"string"==typeof e&&!Co.prepareStackTrace)for(;t--;)e=Ro(e,xo,"");return e},_o=!y((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",A(1,7)),7!==e.stack)})),No=function(e,t,r,n){var i="stackTraceLimit",o=n?2:1,s=e.split("."),a=s[s.length-1],c=q.apply(null,s);if(c){var u=c.prototype;if(ve(u,"cause")&&delete u.cause,!r)return c;var l=q("Error"),d=t((function(e,t){var r=Io(n?t:e,void 0),i=n?new c(e):new c;return void 0!==r&&Ye(i,"message",r),_o&&Ye(i,"stack",Oo(i.stack,2)),this&&H(u,this)&&wo(i,this,d),arguments.length>o&&To(i,arguments[o]),i}));d.prototype=u,"Error"!==a?pn?pn(d,l):Mt(d,l,{name:!0}):b&&i in c&&(bo(d,c,i),bo(d,c,"prepareStackTrace")),Mt(d,c);try{u.name!==a&&Ye(u,"name",a),u.constructor=d}catch(e){}return d}},Lo=v.WebAssembly,ko=7!==Error("e",{cause:7}).cause,Do=function(e,t){var r={};r[e]=No(e,t,ko),qt({global:!0,constructor:!0,arity:1,forced:ko},r)},Mo=function(e,t){if(Lo&&Lo[e]){var r={};r[e]=No("WebAssembly."+e,t,ko),qt({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:ko},r)}};Do("Error",(function(e){return function(t){return Dr(e,this,arguments)}})),Do("EvalError",(function(e){return function(t){return Dr(e,this,arguments)}})),Do("RangeError",(function(e){return function(t){return Dr(e,this,arguments)}})),Do("ReferenceError",(function(e){return function(t){return Dr(e,this,arguments)}})),Do("SyntaxError",(function(e){return function(t){return Dr(e,this,arguments)}})),Do("TypeError",(function(e){return function(t){return Dr(e,this,arguments)}})),Do("URIError",(function(e){return function(t){return Dr(e,this,arguments)}})),Mo("CompileError",(function(e){return function(t){return Dr(e,this,arguments)}})),Mo("LinkError",(function(e){return function(t){return Dr(e,this,arguments)}})),Mo("RuntimeError",(function(e){return function(t){return Dr(e,this,arguments)}}));var Bo=Re("match"),Fo=function(e){var t;return z(e)&&(void 0!==(t=e[Bo])?!!t:"RegExp"==D(e))},Uo=function(){var e=Ue(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},jo=RegExp.prototype,Vo=function(e){var t=e.flags;return void 0!==t||"flags"in jo||ve(e,"flags")||!H(jo,e)?t:S(Uo,e)},Go=v.RegExp,zo=y((function(){var e=Go("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Yo=zo||y((function(){return!Go("a","y").sticky})),qo=zo||y((function(){var e=Go("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),$o={BROKEN_CARET:qo,MISSED_STICKY:Yo,UNSUPPORTED_Y:zo},Ho=v.RegExp,Wo=y((function(){var e=Ho(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Xo=v.RegExp,Ko=y((function(){var e=Xo("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Jo=Nt.f,Qo=ft.enforce,Zo=Re("match"),es=v.RegExp,ts=es.prototype,rs=v.SyntaxError,ns=N(ts.exec),is=N("".charAt),os=N("".replace),ss=N("".indexOf),as=N("".slice),cs=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,us=/a/g,ls=/a/g,ds=new es(us)!==us,fs=$o.MISSED_STICKY,ps=$o.UNSUPPORTED_Y,hs=b&&(!ds||fs||Wo||Ko||y((function(){return ls[Zo]=!1,es(us)!=us||es(ls)==ls||"/a/i"!=es(us,"i")})));if(zt("RegExp",hs)){for(var ms=function(e,t){var r,n,i,o,s,a,c=H(ts,this),u=Fo(e),l=void 0===t,d=[],f=e;if(!c&&u&&l&&e.constructor===ms)return e;if((u||H(ts,e))&&(e=e.source,l&&(t=Vo(f))),e=void 0===e?"":So(e),t=void 0===t?"":So(t),f=e,Wo&&"dotAll"in us&&(n=!!t&&ss(t,"s")>-1)&&(t=os(t,/s/g,"")),r=t,fs&&"sticky"in us&&(i=!!t&&ss(t,"y")>-1)&&ps&&(t=os(t,/y/g,"")),Ko&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=is(e,n)))t+=is(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:ns(cs,as(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||ve(s,l))throw new rs("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],d=o[1]),s=wo(es(e,t),c?this:ts,ms),(n||i||d.length)&&(a=Qo(s),n&&(a.dotAll=!0,a.raw=ms(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=is(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+is(e,++n);return i}(e),r)),i&&(a.sticky=!0),d.length&&(a.groups=d)),e!==f)try{Ye(s,"source",""===f?"(?:)":f)}catch(e){}return s},gs=Jo(es),vs=0;gs.length>vs;)bo(ms,es,gs[vs++]);ts.constructor=ms,ms.prototype=ts,ht(v,"RegExp",ms,{constructor:!0})}yn("RegExp");var ys,bs,ws,Es=ft.get,Ss=RegExp.prototype,Is=TypeError;b&&Wo&&(ys=Ss,bs="dotAll",(ws={configurable:!0,get:function(){if(this!==Ss){if("RegExp"===D(this))return!!Es(this).dotAll;throw Is("Incompatible receiver, RegExp required")}}}).get&&pt(ws.get,bs,{getter:!0}),ws.set&&pt(ws.set,bs,{setter:!0}),ze.f(ys,bs,ws));var Ts,Cs=Object.keys||function(e){return Pt(e,Ot)},Rs=b&&!Me?Object.defineProperties:function(e,t){Ue(e);for(var r,n=V(t),i=Cs(t),o=i.length,s=0;o>s;)ze.f(e,r=i[s++],n[r]);return e},As={f:Rs},xs=nt("IE_PROTO"),Ps=function(){},Os=function(e){return"<script>"+e+"<\/script>"},_s=function(e){e.write(Os("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ns=function(){try{Ts=new ActiveXObject("htmlfile")}catch(e){}var e,t;Ns="undefined"!=typeof document?document.domain&&Ts?_s(Ts):((t=Ne("iframe")).style.display="none",Tn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Os("document.F=Object")),e.close(),e.F):_s(Ts);for(var r=Ot.length;r--;)delete Ns.prototype[Ot[r]];return Ns()};it[xs]=!0;var Ls=Object.create||function(e,t){var r;return null!==e?(Ps.prototype=Ue(e),r=new Ps,Ps.prototype=null,r[xs]=e):r=Ns(),void 0===t?r:As.f(r,t)},ks=ft.get,Ds=pe("native-string-replace",String.prototype.replace),Ms=RegExp.prototype.exec,Bs=Ms,Fs=N("".charAt),Us=N("".indexOf),js=N("".replace),Vs=N("".slice),Gs=function(){var e=/a/,t=/b*/g;return S(Ms,e,"a"),S(Ms,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),zs=$o.BROKEN_CARET,Ys=void 0!==/()??/.exec("")[1];(Gs||Ys||zs||Wo||Ko)&&(Bs=function(e){var t,r,n,i,o,s,a,c=this,u=ks(c),l=So(e),d=u.raw;if(d)return d.lastIndex=c.lastIndex,t=S(Bs,d,l),c.lastIndex=d.lastIndex,t;var f=u.groups,p=zs&&c.sticky,h=S(Uo,c),m=c.source,g=0,v=l;if(p&&(h=js(h,"y",""),-1===Us(h,"g")&&(h+="g"),v=Vs(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Fs(l,c.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),r=new RegExp("^(?:"+m+")",h)),Ys&&(r=new RegExp("^"+m+"$(?!\\s)",h)),Gs&&(n=c.lastIndex),i=S(Ms,p?r:c,v),p?i?(i.input=Vs(i.input,g),i[0]=Vs(i[0],g),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:Gs&&i&&(c.lastIndex=c.global?i.index+i[0].length:n),Ys&&i&&i.length>1&&S(Ds,i[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&f)for(i.groups=s=Ls(null),o=0;o<f.length;o++)s[(a=f[o])[0]]=i[a[1]];return i});var qs=Bs;qt({target:"RegExp",proto:!0,forced:/./.exec!==qs},{exec:qs});var $s=N(R.f),Hs=N([].push),Ws=function(e){return function(t){for(var r,n=V(t),i=Cs(n),o=i.length,s=0,a=[];o>s;)r=i[s++],b&&!$s(n,r)||Hs(a,e?[r,n[r]]:n[r]);return a}},Xs=(Ws(!0),Ws(!1));qt({target:"Object",stat:!0},{values:function(e){return Xs(e)}});var Ks=Re("species"),Js=RegExp.prototype,Qs=function(e,t,r,n){var i=Re(e),o=!y((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),s=o&&!y((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[Ks]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return t=!0,null},r[i](""),!t}));if(!o||!s||r){var a=N(/./[i]),c=t(i,""[e],(function(e,t,r,n,i){var s=N(e),c=t.exec;return c===qs||c===Js.exec?o&&!i?{done:!0,value:a(t,r,n)}:{done:!0,value:s(r,t,n)}:{done:!1}}));ht(String.prototype,e,c[0]),ht(Js,i,c[1])}n&&Ye(Js[i],"sham",!0)},Zs=N("".charAt),ea=N("".charCodeAt),ta=N("".slice),ra=function(e){return function(t,r){var n,i,o=So(j(t)),s=yt(r),a=o.length;return s<0||s>=a?e?"":void 0:(n=ea(o,s))<55296||n>56319||s+1===a||(i=ea(o,s+1))<56320||i>57343?e?Zs(o,s):n:e?ta(o,s,s+2):i-56320+(n-55296<<10)+65536}},na=(ra(!1),ra(!0)),ia=function(e,t,r){return t+(r?na(e,t).length:1)},oa=TypeError,sa=function(e,t){var r=e.exec;if(G(r)){var n=S(r,e,t);return null!==n&&Ue(n),n}if("RegExp"===D(e))return S(qs,e,t);throw oa("RegExp#exec called on incompatible receiver")};Qs("match",(function(e,t,r){return[function(t){var r=j(this),n=null==t?void 0:ce(t,e);return n?S(n,t,r):new RegExp(t)[e](So(r))},function(e){var n=Ue(this),i=So(e),o=r(t,n,i);if(o.done)return o.value;if(!n.global)return sa(n,i);var s=n.unicode;n.lastIndex=0;for(var a,c=[],u=0;null!==(a=sa(n,i));){var l=So(a[0]);c[u]=l,""===l&&(n.lastIndex=ia(i,It(n.lastIndex),s)),u++}return 0===u?null:c}]}));var aa=ze.f,ca=Re("unscopables"),ua=Array.prototype;null==ua[ca]&&aa(ua,ca,{configurable:!0,value:Ls(null)});var la,da,fa,pa=function(e){ua[ca][e]=!0},ha=!y((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ma=nt("IE_PROTO"),ga=Object,va=ga.prototype,ya=ha?ga.getPrototypeOf:function(e){var t=me(e);if(ve(t,ma))return t[ma];var r=t.constructor;return G(r)&&t instanceof r?r.prototype:t instanceof ga?va:null},ba=Re("iterator"),wa=!1;[].keys&&("next"in(fa=[].keys())?(da=ya(ya(fa)))!==Object.prototype&&(la=da):wa=!0);var Ea=null==la||y((function(){var e={};return la[ba].call(e)!==e}));Ea&&(la={}),G(la[ba])||ht(la,ba,(function(){return this}));var Sa={IteratorPrototype:la,BUGGY_SAFARI_ITERATORS:wa},Ia=Sa.IteratorPrototype,Ta=function(){return this},Ca=function(e,t,r,n){var i=t+" Iterator";return e.prototype=Ls(Ia,{next:A(+!n,r)}),gn(e,i,!1),Wi[i]=Ta,e},Ra=We.PROPER,Aa=We.CONFIGURABLE,xa=Sa.IteratorPrototype,Pa=Sa.BUGGY_SAFARI_ITERATORS,Oa=Re("iterator"),_a=function(){return this},Na=function(e,t,r,n,i,o,s){Ca(r,t,n);var a,c,u,l=function(e){if(e===i&&m)return m;if(!Pa&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",f=!1,p=e.prototype,h=p[Oa]||p["@@iterator"]||i&&p[i],m=!Pa&&h||l(i),g="Array"==t&&p.entries||h;if(g&&(a=ya(g.call(new e)))!==Object.prototype&&a.next&&(ya(a)!==xa&&(pn?pn(a,xa):G(a[Oa])||ht(a,Oa,_a)),gn(a,d,!0)),Ra&&"values"==i&&h&&"values"!==h.name&&(Aa?Ye(p,"name","values"):(f=!0,m=function(){return S(h,this)})),i)if(c={values:l("values"),keys:o?m:l("keys"),entries:l("entries")},s)for(u in c)(Pa||f||!(u in p))&&ht(p,u,c[u]);else qt({target:t,proto:!0,forced:Pa||f},c);return p[Oa]!==m&&ht(p,Oa,m,{name:i}),Wi[t]=m,c},La=ze.f,ka=ft.set,Da=ft.getterFor("Array Iterator"),Ma=Na(Array,"Array",(function(e,t){ka(this,{type:"Array Iterator",target:V(e),index:0,kind:t})}),(function(){var e=Da(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),Ba=Wi.Arguments=Wi.Array;if(pa("keys"),pa("values"),pa("entries"),b&&"values"!==Ba.name)try{La(Ba,"name",{value:"values"})}catch(n){}var Fa={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ua=Ne("span").classList,ja=Ua&&Ua.constructor&&Ua.constructor.prototype,Va=ja===Object.prototype?void 0:ja,Ga=Re("iterator"),za=Re("toStringTag"),Ya=Ma.values,qa=function(e,t){if(e){if(e[Ga]!==Ya)try{Ye(e,Ga,Ya)}catch(t){e[Ga]=Ya}if(e[za]||Ye(e,za,t),Fa[t])for(var r in Ma)if(e[r]!==Ma[r])try{Ye(e,r,Ma[r])}catch(t){e[r]=Ma[r]}}};for(var $a in Fa)qa(v[$a]&&v[$a].prototype,$a);qa(Va,"DOMTokenList");var Ha=Array,Wa=Math.max,Xa=function(e,t,r){for(var n=Tt(e),i=Et(t,n),o=Et(void 0===r?n:r,n),s=Ha(Wa(o-i,0)),a=0;i<o;i++,a++)Xt(s,a,e[i]);return s.length=a,s},Ka=Nt.f,Ja="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Qa={f:function(e){return Ja&&"Window"==D(e)?function(e){try{return Ka(e)}catch(e){return Xa(Ja)}}(e):Ka(V(e))}},Za=y((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),ec=Object.isExtensible,tc=y((function(){ec(1)}))||Za?function(e){return!!z(e)&&(!Za||"ArrayBuffer"!=D(e))&&(!ec||ec(e))}:ec,rc=!y((function(){return Object.isExtensible(Object.preventExtensions({}))})),nc=p((function(e){var t=ze.f,r=!1,n=Ee("meta"),i=0,o=function(e){t(e,n,{value:{objectID:"O"+i++,weakData:{}}})},s=e.exports={enable:function(){s.enable=function(){},r=!0;var e=Nt.f,t=N([].splice),i={};i[n]=1,e(i).length&&(Nt.f=function(r){for(var i=e(r),o=0,s=i.length;o<s;o++)if(i[o]===n){t(i,o,1);break}return i},qt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Qa.f}))},fastKey:function(e,t){if(!z(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ve(e,n)){if(!tc(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!ve(e,n)){if(!tc(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return rc&&r&&tc(e)&&!ve(e,n)&&o(e),e}};it[n]=!0})),ic=function(e,t,r){for(var n in t)ht(e,n,t[n],r);return e},oc=ze.f,sc=nc.fastKey,ac=ft.set,cc=ft.getterFor,uc={getConstructor:function(e,t,r,n){var i=e((function(e,i){wn(e,o),ac(e,{type:t,index:Ls(null),first:void 0,last:void 0,size:0}),b||(e.size=0),null!=i&&so(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,s=cc(t),a=function(e,t,r){var n,i,o=s(e),a=c(e,t);return a?a.value=r:(o.last=a={index:i=sc(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),b?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},c=function(e,t){var r,n=s(e),i=sc(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return ic(o,{clear:function(){for(var e=s(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,b?e.size=0:this.size=0},delete:function(e){var t=this,r=s(t),n=c(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),b?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=s(this),n=Rr(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),ic(o,r?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),b&&oc(o,"size",{get:function(){return s(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=cc(t),o=cc(n);Na(e,t,(function(e,t){ac(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),yn(t)}};!function(e,t,r){var n=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=n?"set":"add",s=v[e],a=s&&s.prototype,c=s,u={},l=function(e){var t=N(a[e]);ht(a,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!z(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!z(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!z(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(zt(e,!G(s)||!(i||a.forEach&&!y((function(){(new s).entries().next()})))))c=r.getConstructor(t,e,n,o),nc.enable();else if(zt(e,!0)){var d=new c,f=d[o](i?{}:-0,1)!=d,p=y((function(){d.has(1)})),h=fo((function(e){new s(e)})),m=!i&&y((function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)}));h||((c=t((function(e,t){wn(e,a);var r=wo(new s,e,c);return null!=t&&so(t,r[o],{that:r,AS_ENTRIES:n}),r}))).prototype=a,a.constructor=c),(p||m)&&(l("delete"),l("has"),n&&l("get")),(m||f)&&l(o),i&&a.clear&&delete a.clear}u[e]=c,qt({global:!0,constructor:!0,forced:c!=s},u),gn(c,e),i||r.setStrong(c,e,n)}("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),uc);var lc,dc="object"==typeof Reflect?Reflect:null,fc=dc&&"function"==typeof dc.apply?dc.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};lc=dc&&"function"==typeof dc.ownKeys?dc.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var pc=Number.isNaN||function(e){return e!=e};function hc(){hc.init.call(this)}var mc=hc;hc.EventEmitter=hc,hc.prototype._events=void 0,hc.prototype._eventsCount=0,hc.prototype._maxListeners=void 0;var gc=10;function vc(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function yc(e){return void 0===e._maxListeners?hc.defaultMaxListeners:e._maxListeners}function bc(e,t,r,n){var i,o,s,a;if(vc(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=yc(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function wc(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ec(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=wc.bind(n);return i.listener=r,n.wrapFn=i,i}function Sc(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):Tc(i,i.length)}function Ic(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function Tc(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Cc(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(hc,"defaultMaxListeners",{enumerable:!0,get:function(){return gc},set:function(e){if("number"!=typeof e||e<0||pc(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");gc=e}}),hc.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},hc.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||pc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},hc.prototype.getMaxListeners=function(){return yc(this)},hc.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)fc(a,this,t);else{var c=a.length,u=Tc(a,c);for(r=0;r<c;++r)fc(u[r],this,t)}return!0},hc.prototype.addListener=function(e,t){return bc(this,e,t,!1)},hc.prototype.on=hc.prototype.addListener,hc.prototype.prependListener=function(e,t){return bc(this,e,t,!0)},hc.prototype.once=function(e,t){return vc(t),this.on(e,Ec(this,e,t)),this},hc.prototype.prependOnceListener=function(e,t){return vc(t),this.prependListener(e,Ec(this,e,t)),this},hc.prototype.removeListener=function(e,t){var r,n,i,o,s;if(vc(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},hc.prototype.off=hc.prototype.removeListener,hc.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},hc.prototype.listeners=function(e){return Sc(this,e,!0)},hc.prototype.rawListeners=function(e){return Sc(this,e,!1)},hc.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Ic.call(e,t)},hc.prototype.listenerCount=Ic,hc.prototype.eventNames=function(){return this._eventsCount>0?lc(this._events):[]},mc.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}Cc(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&Cc(e,"error",t,{once:!0})}(e,i)}))};var Rc=xc,Ac=mc.EventEmitter;function xc(e,t,r){Array.isArray(r)||(r=[r]);var n=[];return r.forEach((function(r){var i=function(){var e=[].slice.call(arguments);e.unshift(r),t.emit.apply(t,e)};n.push(i),e.on(r,i)})),function(){r.forEach((function(t,r){e.removeListener(t,n[r])}))}}Rc.filter=function(e,t){var r=new Ac;return xc(e,r,t),r};var Pc=Rt.includes,Oc=y((function(){return!Array(1).includes()}));qt({target:"Array",proto:!0,forced:Oc},{includes:function(e){return Pc(this,e,arguments.length>1?arguments[1]:void 0)}}),pa("includes");var _c=TypeError,Nc=function(e){if(Fo(e))throw _c("The method doesn't accept regular expressions");return e},Lc=Re("match"),kc=N("".indexOf);qt({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Lc]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~kc(So(j(this)),So(Nc(e)),arguments.length>1?arguments[1]:void 0)}});const Dc=on.get("PeerConnectionStats"),Mc="stats";class Bc extends mc{constructor(e){super(),this.peer=e,this.stats=null,this.emitInterval=null,this.previousStats=null}init(){var e=this;Dc.info("Initializing peer connection stats"),this.emitInterval=setInterval(s((function*(){const t=yield e.peer.getStats();e.parseStats(t),e.emit(Mc,e.stats)})),1e3)}parseStats(e){this.previousStats=this.stats;const t={audio:{inbounds:[],outbounds:[]},video:{inbounds:[],outbounds:[]},raw:e};var r,n=d(e.values());try{for(n.s();!(r=n.n()).done;){const e=r.value;switch(e.type){case"outbound-rtp":Fc(e,this.previousStats,t);break;case"inbound-rtp":Uc(e,this.previousStats,t);break;case"candidate-pair":e.nominated&&jc(e,t)}}}catch(e){n.e(e)}finally{n.f()}this.stats=t}stop(){Dc.info("Stopping peer connection stats"),clearInterval(this.emitInterval)}}const Fc=(e,t,r)=>{var n,o;const s=Vc(e),a=Gc(e.codecId,r.raw),c=zc(e,s);c.totalBytesSent=e.bytesSent,c.id=e.id;const u=t?null!==(n=null===(o=t[s].outbounds.find((e=>e.id===c.id)))||void 0===o?void 0:o.totalBytesSent)&&void 0!==n?n:0:null;c.bitrate=u?8*(e.bytesSent-u):0,"video"===s&&(c.qualityLimitationReason=e.qualityLimitationReason),r[s].outbounds.push(i(i({},a),c))},Uc=(e,t,r)=>{let n=Vc(e);const o=Gc(e.codecId,r.raw);["audio","video"].includes(n)||(n=e.id.includes("Video")?"video":"audio");const s=zc(e,n);if(s.totalBytesReceived=e.bytesReceived,s.totalPacketsReceived=e.packetsReceived,s.totalPacketsLost=e.packetsLost,s.jitter=e.jitter,s.id=e.id,s.bitrate=0,s.packetsLostRatioPerSecond=0,s.packetsLostDeltaPerSecond=0,t){const r=t[n].inbounds.find((e=>e.id===s.id));if(r){const t=r.totalBytesReceived;s.bitrate=8*(e.bytesReceived-t),s.packetsLostRatioPerSecond=Yc(s,r),s.packetsLostDeltaPerSecond=qc(s,r)}}r[n].inbounds.push(i(i({},o),s))},jc=(e,t)=>{t.totalRoundTripTime=e.totalRoundTripTime,t.currentRoundTripTime=e.currentRoundTripTime,t.availableOutgoingBitrate=e.availableOutgoingBitrate,t.candidateType=t.raw.get(e.localCandidateId).candidateType},Vc=e=>e.mediaType||e.kind,Gc=(e,t)=>{var r;return{mimeType:(e&&null!==(r=t.get(e))&&void 0!==r?r:{}).mimeType}},zc=(e,t)=>{const r={};return"video"===t&&(r.framesPerSecond=e.framesPerSecond,r.frameHeight=e.frameHeight,r.frameWidth=e.frameWidth),r.timestamp=e.timestamp,r},Yc=(e,t)=>qc(e,t)/(e.totalPacketsReceived-t.totalPacketsReceived),qc=(e,t)=>e.totalPacketsLost-t.totalPacketsLost;var $c=function(e,t,r,n){try{return n?t(Ue(r)[0],r[1]):t(r)}catch(t){ro(e,"throw",t)}},Hc=Array,Wc=!fo((function(e){Array.from(e)}));qt({target:"Array",stat:!0,forced:Wc},{from:function(e){var t=me(e),r=lr(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=void 0!==i;o&&(i=Rr(i,n>2?arguments[2]:void 0));var s,a,c,u,l,d,f=Zi(t),p=0;if(!f||this===Hc&&Ji(f))for(s=Tt(t),a=r?new this(s):Hc(s);s>p;p++)d=o?i(t[p],p):t[p],Xt(a,p,d);else for(l=(u=to(t,f)).next,a=r?new this:[];!(c=S(l,u)).done;p++)d=o?$c(u,i,[c.value,p],!0):c.value,Xt(a,p,d);return a.length=p,a}});var Xc=Math.floor,Kc=N("".charAt),Jc=N("".replace),Qc=N("".slice),Zc=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,eu=/\$([$&'`]|\d{1,2})/g,tu=function(e,t,r,n,i,o){var s=r+e.length,a=n.length,c=eu;return void 0!==i&&(i=me(i),c=Zc),Jc(o,c,(function(o,c){var u;switch(Kc(c,0)){case"$":return"$";case"&":return e;case"`":return Qc(t,0,r);case"'":return Qc(t,s);case"<":u=i[Qc(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>a){var d=Xc(l/10);return 0===d?o:d<=a?void 0===n[d-1]?Kc(c,1):n[d-1]+Kc(c,1):o}u=n[l-1]}return void 0===u?"":u}))},ru=Re("replace"),nu=Math.max,iu=Math.min,ou=N([].concat),su=N([].push),au=N("".indexOf),cu=N("".slice),uu="$0"==="a".replace(/./,"$0"),lu=!!/./[ru]&&""===/./[ru]("a","$0"),du=!y((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));Qs("replace",(function(e,t,r){var n=lu?"$":"$0";return[function(e,r){var n=j(this),i=null==e?void 0:ce(e,ru);return i?S(i,e,n,r):S(t,So(n),e,r)},function(e,i){var o=Ue(this),s=So(e);if("string"==typeof i&&-1===au(i,n)&&-1===au(i,"$<")){var a=r(t,o,s,i);if(a.done)return a.value}var c=G(i);c||(i=So(i));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var d=[];;){var f=sa(o,s);if(null===f)break;if(su(d,f),!u)break;""===So(f[0])&&(o.lastIndex=ia(s,It(o.lastIndex),l))}for(var p,h="",m=0,g=0;g<d.length;g++){for(var v=So((f=d[g])[0]),y=nu(iu(yt(f.index),s.length),0),b=[],w=1;w<f.length;w++)su(b,void 0===(p=f[w])?p:String(p));var E=f.groups;if(c){var S=ou([v],b,y,s);void 0!==E&&su(S,E);var I=So(Dr(i,void 0,S))}else I=tu(v,s,y,b,E,i);y>=m&&(h+=cu(s,m,y)+I,m=y+v.length)}return h+cu(s,m)}]}),!du||!uu||lu);var fu=Pr.filter,pu=mr("filter");qt({target:"Array",proto:!0,forced:!pu},{filter:function(e){return fu(this,e,arguments.length>1?arguments[1]:void 0)}});var hu=$o.UNSUPPORTED_Y,mu=Math.min,gu=[].push,vu=N(/./.exec),yu=N(gu),bu=N("".slice),wu=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));Qs("split",(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=So(j(this)),i=void 0===r?4294967295:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!Fo(e))return S(t,n,e,i);for(var o,s,a,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,u+"g");(o=S(qs,d,n))&&!((s=d.lastIndex)>l&&(yu(c,bu(n,l,o.index)),o.length>1&&o.index<n.length&&Dr(gu,c,Xa(o,1)),a=o[0].length,l=s,c.length>=i));)d.lastIndex===o.index&&d.lastIndex++;return l===n.length?!a&&vu(d,"")||yu(c,""):yu(c,bu(n,l)),c.length>i?Xa(c,0,i):c}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:S(t,this,e,r)}:t,[function(t,r){var i=j(this),o=null==t?void 0:ce(t,e);return o?S(o,t,i,r):S(n,So(i),t,r)},function(e,i){var o=Ue(this),s=So(e),a=r(n,o,s,i,n!==t);if(a.done)return a.value;var c=In(o,RegExp),u=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(hu?"g":"y"),d=new c(hu?"^(?:"+o.source+")":o,l),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===s.length)return null===sa(d,s)?[s]:[];for(var p=0,h=0,m=[];h<s.length;){d.lastIndex=hu?0:h;var g,v=sa(d,hu?bu(s,h):s);if(null===v||(g=mu(It(d.lastIndex+(hu?h:0)),s.length))===p)h=ia(s,h,u);else{if(yu(m,bu(s,p,h)),m.length===f)return m;for(var y=1;y<=v.length-1;y++)if(yu(m,v[y]),m.length===f)return m;h=p=g}}return yu(m,bu(s,p)),m}]}),!wu,hu);var Eu,Su="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Iu=N("".replace),Tu="["+Su+"]",Cu=RegExp("^"+Tu+Tu+"*"),Ru=RegExp(Tu+Tu+"*$"),Au=function(e){return function(t){var r=So(j(t));return 1&e&&(r=Iu(r,Cu,"")),2&e&&(r=Iu(r,Ru,"")),r}},xu={start:Au(1),end:Au(2),trim:Au(3)},Pu=We.PROPER,Ou=xu.trim;qt({target:"String",proto:!0,forced:(Eu="trim",y((function(){return!!Su[Eu]()||"âÂá "!=="âÂá "[Eu]()||Pu&&Su[Eu].name!==Eu})))},{trim:function(){return Ou(this)}});var _u=Re("matchAll"),Nu=ft.set,Lu=ft.getterFor("RegExp String Iterator"),ku=RegExp.prototype,Du=TypeError,Mu=N("".indexOf),Bu=N("".matchAll),Fu=!!Bu&&!y((function(){Bu("a",/./)})),Uu=Ca((function(e,t,r,n){Nu(this,{type:"RegExp String Iterator",regexp:e,string:t,global:r,unicode:n,done:!1})}),"RegExp String",(function(){var e=Lu(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,r=e.string,n=sa(t,r);return null===n?{value:void 0,done:e.done=!0}:e.global?(""===So(n[0])&&(t.lastIndex=ia(r,It(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})}));qt({target:"String",proto:!0,forced:Fu},{matchAll:function(e){var t,r,n,i=j(this);if(null!=e){if(Fo(e)&&(t=So(j(Vo(e))),!~Mu(t,"g")))throw Du("`.matchAll` does not allow non-global regexes");if(Fu)return Bu(i,e);if(n=ce(e,_u))return S(n,e,i)}else if(Fu)return Bu(i,e);return r=So(i),new RegExp(e,"g")[_u](r)}}),_u in ku||ht(ku,_u,(function(e){var t,r,n,i=Ue(this),o=So(e),s=In(i,RegExp),a=So(Vo(i));return t=new s(s===RegExp?i.source:i,a),r=!!~Mu(a,"g"),n=!!~Mu(a,"u"),t.lastIndex=It(i.lastIndex),new Uu(t,o,r,n)}));var ju=N([].reverse),Vu=[1,2];qt({target:"Array",proto:!0,forced:String(Vu)===String(Vu.reverse())},{reverse:function(){return $t(this)&&(this.length=this.length),ju(this)}});var Gu=p((function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))})),zu=p((function(e,t){var r=function(e){return String(Number(e))===e?Number(e):e},n=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],o=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var s=0;s<(Gu[t]||[]).length;s+=1){var a=Gu[t][s];if(a.reg.test(i))return n(a,o,i)}})),t.media=r,t};var o=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}})),Yu=/%[sdv%]/g,qu=function(e){var t=1,r=arguments,n=r.length;return e.replace(Yu,(function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},$u=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?n.push(r[t.name][o]):n.push(r[t.names[i]])}else n.push(r[t.name]);return qu.apply(null,n)},Hu=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Wu=["i","c","b","a"],Xu={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||Hu,n=t.innerOrder||Wu,i=[];return r.forEach((function(t){Gu[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push($u(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push($u(t,r,e))}))}))})),e.media.forEach((function(e){i.push($u("m",Gu.m[0],e)),n.forEach((function(t){Gu[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push($u(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push($u(t,r,e))}))}))}))})),i.join("\r\n")+"\r\n"},parse:zu.parse,parseParams:zu.parseParams,parseFmtpConfig:zu.parseFmtpConfig,parsePayloads:zu.parsePayloads,parseRemoteCandidates:zu.parseRemoteCandidates,parseImageAttributes:zu.parseImageAttributes,parseSimulcastStreamList:zu.parseSimulcastStreamList};class Ku{constructor(e,t,r,n,i,o,s,a,c){this.foundation=e,this.componentId=t,this.transport=r,this.priority=n,this.address=i,this.port=o,this.type=s,this.relAddr=a,this.relPort=c}equals(e){return e.foundation===this.foundation&&e.componentId===this.componentId&&e.transport===this.transport&&e.priority===this.priority&&e.address===this.address&&e.port===this.port&&e.type===this.type&&e.relAddr===this.relAddr&&e.relPort===this.relPort}clone(){return new Ku(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const e={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(e.relAddr=this.relAddr),this.relPort&&(e.relPort=this.relPort),e}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}}Ku.expand=function(e){return new Ku(e.foundation,e.componentId,e.transport,e.priority,e.address,e.port,e.type,e.relAddr,e.relPort)};var Ju=Ku;class Qu{constructor(e,t){this.id=e,this.params=t||[]}clone(){return new Qu(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}}Qu.expand=function(e){return new Qu(e.id,e.params)};var Zu=Qu;class el{constructor(e,t,r){this.codec=e,this.type=t,this.params={},this.rtcpfbs=new Set,r&&this.addParams(r)}clone(){const e=new el(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const e={codec:this.codec,type:this.type};this.rtx&&(e.rtx=this.rtx),this.channels&&(e.channels=this.channels),Object.keys(this.params).length&&(e.params=this.params);for(const t of this.rtcpfbs)e.rtcpfbs||(e.rtcpfbs=[]),e.rtcpfbs.push(t.plain());return e}setRTX(e){this.rtx=e}getType(){return this.type}setType(e){this.type=e}getCodec(){return this.codec}getParams(){return this.params}addParams(e){for(const t in e)this.params[t]=e[t]}addParam(e,t){this.params[e]=t}hasParam(e){return this.params.hasOwnProperty(e)}getParam(e,t){return this.hasParam(e)?this.params[e]:""+t}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(e){this.channels=e}addRTCPFeedback(e){this.rtcpfbs.add(e)}getRTCPFeedbacks(){return this.rtcpfbs}}el.expand=function(e){const t=new el(e.codec,e.type,e.params);e.rtx&&t.setRTX(e.rtx),e.channels&&t.setChannels(e.channels);for(let r=0;e.rtcpfbs&&r<e.rtcpfbs.length;++r){const n=Zu.expand(e.rtcpfbs[r]);t.addRTCPFeedback(n)}return t},el.MapFromNames=function(e,t,r){const n=new Map;let i=96;for(let o=0;o<e.length;++o){let s;const a=e[o].split(";"),c=a[0].toLowerCase().trim();s="pcmu"===c?0:"pcma"===c?8:++i;const u=new el(c,s);"opus"===c?u.setChannels(2):"multiopus"===c&&u.setChannels(6),t&&"ulpfec"!==c&&"flexfec-03"!==c&&"red"!==c&&u.setRTX(++i);for(let e=0;r&&e<r.length;++e)u.addRTCPFeedback(new Zu(r[e].id,r[e].params));for(let e=1;e<a.length;++e){let t=a[e].split("=");u.addParam(t[0].trim(),t[1].trim())}n.set(u.getCodec().toLowerCase(),u)}return n};var tl=el,rl=function e(){var t=this;if(!(this instanceof e))return new(Function.prototype.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(e){t[e]=Symbol.for("MEDOOZE_SEMANTIC_SDP_"+e)}))};const nl=rl("ACTIVE","PASSIVE","ACTPASS","INACTIVE");nl.byValue=function(e){switch(e){case nl.ACTIVE:case nl.PASSIVE:case nl.ACTPASS:case nl.INACTIVE:return e}return nl[e.toUpperCase()]},nl.toString=function(e){switch(e){case nl.ACTIVE:return"active";case nl.PASSIVE:return"passive";case nl.ACTPASS:return"actpass";case nl.INACTIVE:return"inactive"}},nl.reverse=function(e){switch(e){case nl.ACTIVE:return nl.PASSIVE;case nl.PASSIVE:return nl.ACTIVE;case nl.ACTPASS:return nl.PASSIVE;case nl.INACTIVE:return nl.INACTIVE}};var il=nl;class ol{constructor(e,t,r){this.setup=e,this.hash=t,this.fingerprint=r}clone(){return new ol(this.setup,this.hash,this.fingerprint)}plain(){return{setup:il.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(e){this.setup=e}}ol.expand=function(e){return new ol(e.setup?il.byValue(e.setup):il.ACTPASS,e.hash,e.fingerprint)};var sl=ol;class al{constructor(e,t,r,n){this.tag=e,this.suite=t,this.keyParams=r,this.sessionParams=n}clone(){return new al(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}}al.expand=function(e){return new al(e.tag,e.suite,e.keyParams,e.sessionParams)};for(var cl=al,ul=[],ll=[],dl="undefined"!=typeof Uint8Array?Uint8Array:Array,fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pl=0,hl=fl.length;pl<hl;++pl)ul[pl]=fl[pl],ll[fl.charCodeAt(pl)]=pl;function ml(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function gl(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(ul[(i=n)>>18&63]+ul[i>>12&63]+ul[i>>6&63]+ul[63&i]);return o.join("")}ll["-".charCodeAt(0)]=62,ll["_".charCodeAt(0)]=63;var vl=function(e){var t,r,n=ml(e),i=n[0],o=n[1],s=new dl(function(e,t,r){return 3*(t+r)/4-r}(0,i,o)),a=0,c=o>0?i-4:i;for(r=0;r<c;r+=4)t=ll[e.charCodeAt(r)]<<18|ll[e.charCodeAt(r+1)]<<12|ll[e.charCodeAt(r+2)]<<6|ll[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===o&&(t=ll[e.charCodeAt(r)]<<2|ll[e.charCodeAt(r+1)]>>4,s[a++]=255&t),1===o&&(t=ll[e.charCodeAt(r)]<<10|ll[e.charCodeAt(r+1)]<<4|ll[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},yl=function(e){for(var t,r=e.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(gl(e,s,s+o>a?a:s+o));return 1===n?(t=e[r-1],i.push(ul[t>>2]+ul[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(ul[t>>10]+ul[t>>4&63]+ul[t<<2&63]+"=")),i.join("")},bl=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?i-1:0,f=r?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},wl=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+p]=255&s,p+=h,s/=256,u-=8);e[r+p-h]|=128*m},El=p((function(e,t){const r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function i(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|f(e,t);let n=i(r);const s=n.write(e,t);return s!==r&&(n=n.slice(0,s)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if($(e,Uint8Array)){const t=new Uint8Array(e);return l(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return l(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&($(e,SharedArrayBuffer)||e&&$(e.buffer,SharedArrayBuffer)))return l(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);const s=function(e){if(o.isBuffer(e)){const t=0|d(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||H(e.length)?i(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return a(e),i(e<0?0:0|d(e))}function u(e){const t=e.length<0?0:0|d(e.length),r=i(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function d(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(i)return n?-1:z(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function h(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),H(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){let o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(H(n))return s;e[r+s]=n}return s}function y(e,t,r,n){return q(z(t,e.length-r),e,r,n)}function b(e,t,r,n){return q(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return q(Y(t),e,r,n)}function E(e,t,r,n){return q(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?yl(e):yl(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return a(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if($(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=o.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if($(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if($(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const c=Math.min(s,a),u=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<c;++e)if(u[e]!==l[e]){s=u[e],a=l[e];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":case"latin1":case"binary":return b(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=W[e[n]];return i}function x(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n,i){U(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function N(e,t,r,n,i){U(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,n,i){return t=+t,r>>>=0,i||L(e,0,r,4),wl(e,t,r,n,23,4),r+4}function D(e,t,r,n,i){return t=+t,r>>>=0,i||L(e,0,r,8),wl(e,t,r,n,52,8),r+8}o.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=X((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=X((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=X((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=X((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),bl(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),bl(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),bl(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),bl(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=X((function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=X((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=X((function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=X((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=o.isBuffer(e)?e:o.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};const M={};function B(e,t,r){M[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function U(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new M.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){j(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||V(t,e.length-(r+1))}(n,i,o)}function j(e,t){if("number"!=typeof e)throw new M.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,r){if(Math.floor(e)!==e)throw j(e,r),new M.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),B("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function z(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){return vl(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function H(e){return e!=e}const W=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?K:e}function K(){throw new Error("BigInt not supported")}})),Sl=p((function(e,t){var r=El.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=El:(n(El,t),t.Buffer=i),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return El.SlowBuffer(e)}})),Il=p((function(e){var t=65536,r=Sl.Buffer,n=f.crypto||f.msCrypto;n&&n.getRandomValues?e.exports=function(e,i){if(e>4294967295)throw new RangeError("requested too many random bytes");var o=r.allocUnsafe(e);if(e>0)if(e>t)for(var s=0;s<e;s+=t)n.getRandomValues(o.slice(s,s+t));else n.getRandomValues(o);return"function"==typeof i?process.nextTick((function(){i(null,o)})):o}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}));class Tl{constructor(e,t){this.ufrag=e,this.pwd=t,this.lite=!1,this.endOfCandidates=!1}clone(){const e=new Tl(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const e={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(e.lite=this.lite),this.endOfCandidates&&(e.endOfCandidates=this.endOfCandidates),e}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(e){this.lite=e}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(e){this.endOfCandidates=e}}Tl.generate=function(e){const t=new Tl,r=Il(8),n=Il(24);return t.ufrag=r.toString("hex"),t.pwd=n.toString("hex"),t.lite=e,t},Tl.expand=function(e){const t=new Tl(e.ufrag,e.pwd);return t.setLite(e.lite),t.setEndOfCandidates(e.endOfCandidates),t};var Cl=Tl;const Rl=rl("SEND","RECV");Rl.byValue=function(e){return Rl[e.toUpperCase()]},Rl.toString=function(e){switch(e){case Rl.SEND:return"send";case Rl.RECV:return"recv"}},Rl.reverse=function(e){switch(e){case Rl.SEND:return Rl.RECV;case Rl.RECV:return Rl.SEND}};var Al=Rl;class xl{constructor(e,t){this.id=e,this.direction=t,this.formats=[],this.params=new Map}clone(){var e=new xl(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var e={id:this.id,direction:Al.toString(this.direction)};for(var[t,r]of(this.formats&&(e.formats=this.formats),this.params.entries()))e.params||(e.params={}),e.params[t]=r;return e}getId(){return this.id}getDirection(){return this.direction}setDirection(e){this.direction=e}getFormats(){return this.formats}setFormats(e){this.formats=[];for(let t=0;t<e.length;++t)this.formats.push(parseInt(e[t]))}getParams(){return this.params}setParams(e){this.params=new Map(e)}addParam(e,t){this.params.set(e,t)}getDirection(){return this.direction}setDirection(e){this.direction=e}}xl.expand=function(e){const t=new xl(e.id,Al.byValue(e.direction));for(let r in e.params)t.addParam(r,e.params[r]);return e.formats&&t.setFormats(e.formats),t};var Pl=xl;class Ol{constructor(e,t){this.paused=t,this.id=e}clone(){return new Ol(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}}Ol.expand=function(e){return new Ol(e.id,e.paused)};var _l=Ol;class Nl{constructor(){this.send=[],this.recv=[]}clone(){const e=new Nl;for(let t=0;t<this.send.length;++t){let r=[];for(let e=0;t<this.send[e].length;++t)r.push(this.send[t][e].clone());e.addSimulcastAlternativeStreams(Al.SEND,r)}for(let t=0;t<this.recv.length;++t){let r=[];for(let e=0;t<this.recv[e].length;++t)r.push(this.recv[t][e].clone());e.addSimulcastAlternativeStreams(Al.RECV,r)}return e}plain(){const e={send:[],recv:[]};for(let t=0;t<this.send.length;++t){let r=[];for(let e=0;e<this.send[t].length;++e)r.push(this.send[t][e].plain());e.send.push(r)}for(let t=0;t<this.recv.length;++t){let r=[];for(let e=0;e<this.recv[t].length;++e)r.push(this.recv[t][e].plain());e.recv.push(r)}return e}addSimulcastAlternativeStreams(e,t){return e===Al.SEND?this.send.push(t):this.recv.push(t)}addSimulcastStream(e,t){return e===Al.SEND?this.send.push([t]):this.recv.push([t])}getSimulcastStreams(e){return e===Al.SEND?this.send:this.recv}}Nl.expand=function(e){const t=new Nl;for(let r=0;r<e.send.length;++r){let n=[];for(let t=0;t<e.send[r].length;++t)n.push(_l.expand(e.send[r][t]));t.addSimulcastAlternativeStreams(Al.SEND,n)}for(let r=0;r<e.recv.length;++r){let n=[];for(let t=0;t<e.recv[r].length;++t)n.push(_l.expand(e.recv[r][t]));t.addSimulcastAlternativeStreams(Al.RECV,n)}return t};var Ll=Nl;const kl=rl("SENDRECV","SENDONLY","RECVONLY","INACTIVE");kl.byValue=function(e){return kl[e.toUpperCase()]},kl.toString=function(e){switch(e){case kl.SENDRECV:return"sendrecv";case kl.SENDONLY:return"sendonly";case kl.RECVONLY:return"recvonly";case kl.INACTIVE:return"inactive"}},kl.reverse=function(e){switch(e){case kl.SENDRECV:return kl.SENDRECV;case kl.SENDONLY:return kl.RECVONLY;case kl.RECVONLY:return kl.SENDONLY;case kl.INACTIVE:return kl.INACTIVE}};var Dl=kl;class Ml{constructor(e,t){this.port=e,this.maxMessageSize=t}clone(){return new Ml(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}}Ml.expand=function(e){return new Ml(e.port,e.maxMessageSize)};var Bl=Ml;class Fl{constructor(e,t){this.id=e,this.type=t,this.direction=Dl.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}clone(){const e=new Fl(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,r]of this.extensions.entries())e.addExtension(t,r);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDatachannel(this.dataChannel.clone()),e}plain(){const e={id:this.id,type:this.type,direction:Dl.toString(this.direction),codecs:[]};this.dataChannel&&(e.dataChannel=this.dataChannel.plain()),this.bitrate&&(e.bitrate=this.bitrate);for(const t of this.codecs.values())e.codecs.push(t.plain());for(const[t,r]of this.extensions.entries())e.extensions||(e.extensions={}),e.extensions[t]=r;for(const t of this.rids.values())e.rids||(e.rids=[]),e.rids.push(t.plain());return this.simulcast&&(e.simulcast=this.simulcast.plain()),this.control&&(e.control=this.control),e}getType(){return this.type}getId(){return this.id}setId(e){this.id=e}addExtension(e,t){this.extensions.set(e,t)}addRID(e){this.rids.set(e.getId(),e)}addCodec(e){this.codecs.set(e.getType(),e)}setCodecs(e){this.codecs=e}getCodecForType(e){return this.codecs.get(e)}getCodec(e){for(const t of this.codecs.values())if(t.getCodec().toLowerCase()===e.toLowerCase())return t;return null}hasCodec(e){return null!==this.getCodec(e)}getCodecs(){return this.codecs}hasRTX(){for(const e of this.codecs.values())if(e.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(e){return this.rids.get(e)}getBitrate(){return this.bitrate}setBitrate(e){this.bitrate=e}getDirection(){return this.direction}setDirection(e){this.direction=e}hasControl(){return!!this.control}getControl(){return this.control}setControl(e){this.control=e}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(e){this.dataChannel=e}answer(e){const t=new Fl(this.id,this.type);if(e){if(t.setDirection(Dl.reverse(this.direction)),e.codecs){let r;r=Array.isArray(e.codecs)?tl.MapFromNames(e.codecs,e.rtx,e.rtcpfbs):e.codecs;for(let e of this.codecs.values())if(r.has(e.getCodec().toLowerCase())){const n=r.get(e.getCodec().toLowerCase());if("h264"===n.getCodec()&&n.hasParam("packetization-mode")&&n.getParam("packetization-mode")!=e.getParam("packetization-mode","0"))continue;if("h264"===n.getCodec()&&n.hasParam("profile-level-id")&&e.hasParam("profile-level-id")&&n.getParam("profile-level-id")!=e.getParam("profile-level-id"))continue;if("multiopus"===n.getCodec()&&n.hasParam("num_streams")&&e.hasParam("num_streams")&&n.getParam("num_streams")!=e.getParam("num_streams"))continue;const i=n.clone();i.setType(e.getType()),i.hasRTX()&&i.setRTX(e.getRTX()),e.hasChannels()&&i.setChannels(e.getChannels()),i.addParams(e.getParams()),t.addCodec(i)}}const n=new Set(e.extensions);for(let[e,r]of this.extensions)n.has(r)&&t.addExtension(e,r);if(e.simulcast&&this.simulcast){const e=new Ll,n=this.simulcast.getSimulcastStreams(Al.SEND);if(n)for(let t=0;t<n.length;++t){var r=[];for(let e=0;e<n[t].length;++e)r.push(n[t][e].clone());e.addSimulcastAlternativeStreams(Al.RECV,r)}const i=this.simulcast.getSimulcastStreams(Al.RECV);if(i)for(let t=0;t<i.length;++t){r=[];for(let e=0;e<i[t].length;++e)r.push(i[t][e].clone());e.addSimulcastAlternativeStreams(Al.SEND,r)}for(const e of this.rids.values()){const r=e.clone();r.setDirection(Al.reverse(e.getDirection())),t.addRID(r)}t.setSimulcast(e)}if(e.dataChannel&&this.dataChannel){const r=new Bl(this.dataChannel.getPort(),e.dataChannel.maxMessageSize?e.dataChannel.maxMessageSize:this.dataChannel.getMaxMessageSize());t.setDataChannel(r)}}else t.setDirection(Dl.INACTIVE);return t}getSimulcast(){return this.simulcast}setSimulcast(e){this.simulcast=e}}Fl.create=function(e,t){const r=new Fl(e,e);return t?t.codecs&&(Array.isArray(t.codecs)?r.setCodecs(tl.MapFromNames(t.codecs,t.rtx,t.rtcpfbs)):r.setCodecs(t.codecs)):r.setDirection(Dl.INACTIVE),r},Fl.expand=function(e){const t=new Fl(e.id,e.type);if(e.direction&&t.setDirection(Dl.byValue(e.direction)),t.setBitrate(e.bitrate),e.dataChannel){const r=Bl.expand(e.dataChannel);r&&t.setDataChannel(r)}for(let r in e.extensions)t.addExtension(r,e.extensions[r]);for(let r=0;e.codecs&&r<e.codecs.length;++r){const n=tl.expand(e.codecs[r]);n&&t.addCodec(n)}for(let r=0;e.rids&&r<e.rids.length;++r){const n=Pl.expand(e.rids[r]);t.addRID(n)}return e.simulcast&&t.setSimulcast(Ll.expand(e.simulcast)),e.control&&t.setControl(e.control),t};var Ul=Fl;class jl{constructor(e,t){this.semantics=e,this.ssrcs=[];for(let e=0;e<t.length;++e)this.ssrcs.push(parseInt(t[e]))}clone(){return new jl(this.semantics,this.ssrcs)}plain(){const e={semantics:this.semantics,ssrcs:[]};for(let t=0;t<this.ssrcs.length;++t)e.ssrcs.push(this.ssrcs[t]);return e}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}}jl.expand=function(e){return new jl(e.semantics,e.ssrcs)};var Vl=jl;class Gl{constructor(e){this.ssrc=e}clone(){const e=new Gl(this.ssrc);e.setCName(this.cname),e.setStreamId(this.streamId),e.setTrackId(this.trackId)}plain(){const e={ssrc:this.ssrc};return this.cname&&(e.cname=this.cname),this.streamId&&(e.streamId=this.streamId),this.trackId&&(e.trackid=this.trackId),e}getCName(){return this.cname}setCName(e){this.cname=e}getStreamId(){return this.streamId}setStreamId(e){this.streamId=e}getTrackId(){return this.trackId}setTrackId(e){this.trackId=e}getSSRC(){return this.ssrc}}Gl.expand=function(e){const t=new Gl(e.ssrc);return t.setCName(e.cname),t.setStreamId(e.streamId),t.setTrackId(e.trackId),t};var zl=Gl;class Yl{constructor(e,t){this.id=e,this.paused=t,this.codecs=new Map,this.params=new Map}clone(){var e=new Yl(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var e={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[t,r]of this.codecs.entries())e.codecs[t]=r.plain();for(var[t,n]of this.params.entries())e.params[t]=n;return e}getId(){return this.id}getCodecs(){return this.codecs}addCodec(e){this.codecs.set(e.getType(),e)}getParams(){return this.params}setParams(e){this.params=new Map(e)}addParam(e,t){this.params.set(e,t)}isPaused(){return this.paused}}Yl.expand=function(e){const t=new Yl(e.id,e.paused);for(let r in e.codecs)t.addCodec(tl.expand(e.codecs[r]));for(let r in e.params)t.addParam(r,e.params[r]);return t};var ql=Yl;class $l{constructor(e,t){this.media=e,this.id=t,this.ssrcs=[],this.groups=[],this.encodings=[]}clone(){const e=new $l(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const r=[];for(let e=0;e<this.encodings[t].length;++e)r.push(this.encodings[t][e].clone());e.addAlternativeEncodings(r)}return e}plain(){const e={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(e.mediaId=this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.ssrcs.push(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.groups||(e.groups=[]),e.groups.push(this.groups[t].plain());for(let t=0;t<this.encodings.length;++t){const r=[];for(let e=0;e<this.encodings[t].length;++e)r.push(this.encodings[t][e].plain());r.length&&(e.encodings||(e.encodings=[]),e.encodings.push(r))}return e}getMedia(){return this.media}setMediaId(e){this.mediaId=e}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(e){this.ssrcs.push(e)}getSSRCs(){return this.ssrcs}addSourceGroup(e){this.groups.push(e)}getSourceGroup(e){for(const t of this.groups)if(t.getSemantics().toLowerCase()===e.toLowerCase())return t;return null}getSourceGroups(){return this.groups}hasSourceGroup(e){for(const t of this.groups)if(t.getSemantics().toLowerCase()===e.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(e){this.encodings.push([e])}addAlternativeEncodings(e){this.encodings.push(e)}setEncodings(e){this.encodings=e}}$l.expand=function(e){const t=new $l(e.media,e.id);e.mediaId&&t.setMediaId(e.mediaId);for(let r=0;e.ssrcs&&r<e.ssrcs.length;++r)t.addSSRC(e.ssrcs[r]);for(let r=0;e.groups&&r<e.groups.length;++r)t.addSourceGroup(Vl.expand(e.groups[r]));for(let r=0;e.encodings&&r<e.encodings.length;++r){const n=[];for(let t=0;t<e.encodings[r].length;++t)n.push(ql.expand(e.encodings[r][t]));t.addAlternativeEncodings(n)}return t};var Hl=$l;class Wl{constructor(e){this.id=e,this.tracks=new Map}clone(){const e=new Wl(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const e={id:this.id,tracks:[]};for(const t of this.tracks.values())e.tracks.push(t.plain());return e}getId(){return this.id}addTrack(e){this.tracks.set(e.getId(),e)}removeTrack(e){return this.tracks.delete(e.getId())}removeTrackById(e){return this.tracks.delete(e)}getFirstTrack(e){for(let t of this.tracks.values())if(t.getMedia().toLowerCase()===e.toLowerCase())return t;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(e){return this.tracks.get(e)}}Wl.expand=function(e){const t=new Wl(e.id,e.paused);for(let r=0;r<e.tracks.length;++r){const n=Hl.expand(e.tracks[r]);n&&t.addTrack(n)}return t};var Xl=Wl;class Kl{constructor(e){this.version=e||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}clone(){const e=new Kl(this.version);for(let t=0;t<this.medias.length;++t)e.addMedia(this.medias[t].clone());for(const t of this.streams.values())e.addStream(t.clone());for(let t=0;t<this.candidates.length;++t)e.addCandidate(this.candidates[t].clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExmapAllowMixed(this.extmapAllowMixed),e}plain(){const e={version:this.version,streams:[],medias:[],candidates:[]};for(let t=0;t<this.medias.length;++t)e.medias.push(this.medias[t].plain());for(const t of this.streams.values())e.streams.push(t.plain());for(let t=0;t<this.candidates.length;++t)e.candidates.push(this.candidates[t].plain());return this.ice&&(e.ice=this.ice.plain()),this.dtls&&(e.dtls=this.dtls.plain()),this.crypto&&(e.crypto=this.crypto.plain()),this.extmapAllowMixed||(e.extmapAllowMixedNotSupported=!this.extmapAllowMixed),e}unify(){const e=new Kl(this.version);for(let t=0;t<this.medias.length;++t)e.addMedia(this.medias[t].clone());const t={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const r of this.streams.values()){const n=r.clone();for(const r of n.getTracks().values()){let n=t[r.getMedia()].pop();n||(n=this.getMedia(r.getMedia()).clone(),n.setId(r.getId()),e.addMedia(n)),r.setMediaId(n.getId())}e.addStream(n)}for(let t=0;t<this.candidates.length;++t)e.addCandidate(this.candidates[t].clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(e){this.version=e}addMedia(e){this.medias.push(e)}getMedia(e){for(let t in this.medias){let r=this.medias[t];if(r.getType().toLowerCase()===e.toLowerCase())return r}return null}getMediasByType(e){var t=[];for(let r in this.medias){let n=this.medias[r];n.getType().toLowerCase()===e.toLowerCase()&&t.push(n)}return t}getMediaById(e){for(let t in this.medias){let r=this.medias[t];if(r.getId().toLowerCase()===e.toLowerCase())return r}return null}replaceMedia(e){for(let t in this.medias)if(this.medias[t].getId()==e.getId())return this.medias[t]=e,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(e){this.dtls=e}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(e){this.crypto=e}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(e){this.ice=e}addCandidate(e){for(let t=0;t<this.candidates.length;++t)if(this.candidates[t].equals(e))return;this.candidates.push(e)}addCandidates(e){for(let t=0;t<e.length;++t)this.addCandidate(e[t])}getCandidates(){return this.candidates}getStream(e){return this.streams.get(e)}getStreams(){return this.streams}getFirstStream(){for(let e of this.streams.values())return e;return null}addStream(e){this.streams.set(e.getId(),e)}removeStream(e){return this.streams.delete(e.getId())}removeAllStreams(){this.streams.clear()}getTrackByMediaId(e){for(let t of this.streams.values())for(let[r,n]of t.getTracks())if(n.getMediaId()==e)return n;return null}getStreamByMediaId(e){for(let t of this.streams.values())for(let[r,n]of t.getTracks())if(n.getMediaId()==e)return t;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(e){this.extmapAllowMixed=e}answer(e){const t=new Kl;e.ice&&(e.ice instanceof Cl?t.setICE(e.ice.clone()):t.setICE(Cl.expand(e.ice))),e.dtls&&(e.dtls instanceof sl?t.setDTLS(e.dtls):t.setDTLS(sl.expand(e.dtls))),e.crypto&&(e.crypto instanceof cl?t.setCrypto(e.crypto):t.setCrypto(cl.expand(e.crypto)));for(let r=0;e.candidates&&r<e.candidates.length;++r)e.candidates[r]instanceof Ju?t.addCandidate(e.candidates[r].clone()):t.addCandidate(Ju.expand(e.candidates[r]));for(const r of this.medias){const n=e&&e.capabilities&&e.capabilities[r.getType()];t.addMedia(r.answer(n))}return t.setExtmapAllowMixed(this.extmapAllowMixed),t}toString(){let e={version:0,media:[]};e.version=0,e.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},e.name="semantic-sdp",e.connection={version:4,ip:"0.0.0.0"},e.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(e.icelite="ice-lite"),e.msidSemantic={semantic:"WMS",token:"*"},e.groups=[],this.extmapAllowMixed&&(e.extmapAllowMixed="extmap-allow-mixed");let t={type:"BUNDLE",mids:[]};for(let r in this.medias){let n=this.medias[r],i={type:n.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};i.direction=Dl.toString(n.getDirection()),this.extmapAllowMixed&&(i.extmapAllowMixed="extmap-allow-mixed"),i.mid=n.getId(),t.mids.push(n.getId()),n.hasControl()&&(i.control=n.getControl()),n.getBitrate()>0&&(i.bandwidth.push({type:"AS",limit:n.getBitrate()}),i.bandwidth.push({type:"TIAS",limit:1e3*n.getBitrate()}));let o=this.getCandidates();for(let e=0;e<o.length;++e){let t=o[e];i.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()})}if(this.getICE()&&(i.iceUfrag=this.getICE().getUfrag(),i.icePwd=this.getICE().getPwd()),["audio","video"].includes(n.getType().toLowerCase())){i.rtcpMux="rtcp-mux",i.rtcpRsize="rtcp-rsize",this.getDTLS()?(i.protocol="UDP/TLS/RTP/SAVPF",i.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},i.setup=il.toString(this.getDTLS().getSetup())):this.getCrypto()?(i.protocol="RTP/SAVPF",i.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):i.protocol="RTP/AVP";for(let e of n.getCodecs().values()){"video"===n.getType().toLowerCase()?i.rtp.push({payload:e.getType(),codec:e.getCodec().toUpperCase(),rate:9e4}):"opus"===e.getCodec().toLowerCase()||"multiopus"===e.getCodec().toLowerCase()?i.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:48e3,encoding:e.getChannels()}):i.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:8e3});for(const t of e.getRTCPFeedbacks())i.rtcpFb.push({payload:e.getType(),type:t.getId(),subtype:t.getParams().join(" ")});e.hasRTX()&&(i.rtp.push({payload:e.getRTX(),codec:"rtx",rate:9e4}),i.fmtp.push({payload:e.getRTX(),config:"apt="+e.getType()}));const t=e.getParams();if(Object.keys(t).length){const r={payload:e.getType(),config:""};for(const e in t)r.config.length&&(r.config+=";"),t.hasOwnProperty(e)?r.config+=e+"="+t[e]:r.config+=e;i.fmtp.push(r)}}const e=[];for(let t=0;t<i.rtp.length;++t)e.push(i.rtp[t].payload);i.payloads=e.join(" ");for(let[e,t]of n.getExtensions().entries())i.ext.push({value:e,uri:t});for(let e of n.getRIDs().values()){let t={id:e.getId(),direction:Al.toString(e.getDirection()),params:""};e.getFormats().length&&(t.params="pt="+e.getFormats().join(","));for(let[r,n]of e.getParams().entries())t.params+=(t.params.length?";":"")+r+"="+n;i.rids.push(t)}const t=n.getSimulcast();if(t){let e=1;i.simulcast={};const r=t.getSimulcastStreams(Al.SEND),n=t.getSimulcastStreams(Al.RECV);if(r&&r.length){let t="";for(let e=0;e<r.length;++e){let n="";for(let t=0;t<r[e].length;++t)n+=(n.length?",":"")+(r[e][t].isPaused()?"~":"")+r[e][t].getId();t+=(t.length?";":"")+n}i.simulcast["dir"+e]="send",i.simulcast["list"+e]=t,e++}if(n&&n.length){let t=[];for(let e=0;e<n.length;++e){let r="";for(let t=0;t<n[e].length;++t)r+=(r.length?",":"")+(n[e][t].isPaused()?"~":"")+n[e][t].getId();t+=(t.length?";":"")+r}i.simulcast["dir"+e]="recv",i.simulcast["list"+e]=t,e++}}}else if(n.hasDataChannel()){i.protocol="UDP/DTLS/SCTP",i.payloads="webrtc-datachannel";const e=n.getDataChannel();i.sctpPort=e.getPort(),i.maxMessageSize=e.getMaxMessageSize()}e.media.push(i)}for(let t of this.streams.values())for(let r of t.getTracks().values())for(let n in e.media){let i=e.media[n];if(r.getMediaId()){if(r.getMediaId()==i.mid){let e=r.getSourceGroups();for(let t in e){let r=e[t];i.ssrcGroups.push({semantics:r.getSemantics(),ssrcs:r.getSSRCs().join(" ")})}let n=r.getSSRCs();for(let e in n)i.ssrcs.push({id:n[e],attribute:"cname",value:t.getId()}),i.ssrcs.push({id:n[e],attribute:"msid",value:t.getId()+" "+r.getId()});i.msid=t.getId()+" "+r.getId();break}}else if(i.type.toLowerCase()===r.getMedia().toLowerCase()){let e=r.getSourceGroups();for(let t in e){let r=e[t];i.ssrcGroups.push({semantics:r.getSemantics(),ssrcs:r.getSSRCs().join(" ")})}let n=r.getSSRCs();for(let e in n)i.ssrcs.push({id:n[e],attribute:"cname",value:t.getId()}),i.ssrcs.push({id:n[e],attribute:"msid",value:t.getId()+" "+r.getId()});break}}return t.mids=t.mids.join(" "),e.groups.push(t),Xu.write(e)}toIceFragmentString(){let e={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(e.icelite="ice-lite"),this.getICE()&&(e.iceUfrag=this.getICE().getUfrag(),e.icePwd=this.getICE().getPwd());for(const t of this.getCandidates())e.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});return Xu.write(e).slice(10)}}Kl.create=function(e){const t=new Kl;e.ice&&(e.ice instanceof Cl?t.setICE(e.ice.clone()):t.setICE(Cl.expand(e.ice))),e.dtls&&(e.dtls instanceof sl?t.setDTLS(e.dtls):t.setDTLS(sl.expand(e.dtls))),e.crypto&&(e.crypto instanceof cl?t.setCrypto(e.crypto):t.setCrypto(cl.expand(e.crypto)));for(let r=0;e.candidates&&r<e.candidates.length;++r)e.candidates[r]instanceof Ju?t.addCandidate(e.candidates[r].clone()):t.addCandidate(Ju.expand(e.candidates[r]));let r=96,n=1;for(let i in e.capabilities){const o=Ul.create(i,e.capabilities[i]);for(const[e,t]of o.getCodecs())t.getType()>=96&&t.setType(r++),t.getRTX()&&t.setRTX(r++);if(e.capabilities[i].extensions)for(let t of e.capabilities[i].extensions)15===n&&n++,o.addExtension(n++,t);t.addMedia(o)}return t},Kl.expand=function(e){const t=new Kl(e.version);for(let r=0;e.medias&&r<e.medias.length;++r){const n=Ul.expand(e.medias[r]);n&&t.addMedia(n)}for(let r=0;e.streams&&r<e.streams.length;++r){const n=Xl.expand(e.streams[r]);n&&t.addStream(n)}for(let r=0;e.candidates&&r<e.candidates.length;++r){const n=Ju.expand(e.candidates[r]);n&&t.addCandidate(n)}return e.ice&&t.setICE(Cl.expand(e.ice)),e.dtls&&t.setDTLS(sl.expand(e.dtls)),e.crypto&&t.setCrypto(sl.expand(e.crypto)),e.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!e.extmapAllowMixedNotSupported),t},Kl.process=function(e){return Kl.parse(e)},Kl.parse=function(e){const t=Xu.parse(e),r=new Kl;if(r.setVersion(t.version),t.iceUfrag&&t.icePwd){const e=String(t.iceUfrag),n=String(t.icePwd),i=new Cl(e,n);i.setLite("ice-lite"==t.icelite),i.setEndOfCandidates("end-of-candidates"==t.endOfCandidates),r.setICE(i)}for(let e in t.media){const n=t.media[e],i=n.type,o=n.mid?n.mid.toString():e,s=new Ul(o,i);if(n.iceUfrag&&n.icePwd){const e=String(n.iceUfrag),i=String(n.icePwd),o=new Cl(e,i);o.setLite("ice-lite"==t.icelite),o.setEndOfCandidates("end-of-candidates"==n.endOfCandidates),r.setICE(o)}for(let e=0;n.candidates&&e<n.candidates.length;++e){const t=n.candidates[e],i=new Ju(t.foundation,t.component,t.transport,t.priority,t.ip,t.port,t.type,t.raddr,t.rport);r.addCandidate(i)}const a=n.fingerprint||t.fingerprint;if(a){const e=a.type,t=a.hash;let i=il.ACTPASS;n.setup&&(i=il.byValue(n.setup)),r.setDTLS(new sl(i,e,t))}if(n.crypto){const e=n.crypto[0];r.setCrypto(new cl(e.id,e.suite,e.config,e.sessionConfig))}let c=Dl.SENDRECV;n.direction&&(c=Dl.byValue(n.direction),s.setDirection(c)),n.control&&s.setControl(n.control),r.setExtmapAllowMixed("extmap-allow-mixed"==n.extmapAllowMixed||"extmap-allow-mixed"==t.extmapAllowMixed);const u=new Map;for(let e in n.rtp){const t=n.rtp[e],r=t.payload,i=t.codec;if("RED"===i.toUpperCase()||"ULPFEC"===i.toUpperCase())continue;let o={};for(let e in n.fmtp){const t=n.fmtp[e];if(t.payload===r){const e=t.config.split(";");for(let t in e){const r=e[t].split("="),n=r[0].trim(),i=r.splice(1).join("=").trim();o[n]=i}}}if("RTX"===i.toUpperCase())u.set(parseInt(o.apt),r);else{const e=new tl(i,r,o);t.encoding>1&&e.setChannels(t.encoding),s.addCodec(e)}}for(let e of u.entries()){const t=s.getCodecForType(e[0]);t&&t.setRTX(e[1])}for(let e=0;n.rtcpFb&&e<n.rtcpFb.length;++e){const t=s.getCodecForType(n.rtcpFb[e].payload);if(t){const r=n.rtcpFb[e].type,i=n.rtcpFb[e].subtype?n.rtcpFb[e].subtype.split(" "):null;t.addRTCPFeedback(new Zu(r,i))}}const l=n.ext;for(let e in l){const t=l[e];s.addExtension(t.value,t.uri)}const d=n.rids;for(let e in d){const t=d[e],r=new Pl(t.id,Al.byValue(t.direction));let n=[];const i=new Map;if(t.params){const e=Xu.parseParams(t.params);for(let t in e)"pt"===t?n=e[t].split(","):i.set(t,e[t]);r.setFormats(n),r.setParams(i)}s.addRID(r)}const f=[];if(n.simulcast){const e=new Ll;if(n.simulcast.dir1){const t=Al.byValue(n.simulcast.dir1),r=Xu.parseSimulcastStreamList(n.simulcast.list1);for(let n=0;n<r.length;++n){const i=[];for(let e=0;e<r[n].length;++e)i.push(new _l(r[n][e].scid,r[n][e].paused));e.addSimulcastAlternativeStreams(t,i)}}if(n.simulcast.dir2){const t=Al.byValue(n.simulcast.dir2),r=Xu.parseSimulcastStreamList(n.simulcast.list2);for(let n=0;n<r.length;++n){const i=[];for(let e=0;e<r[n].length;++e)i.push(new _l(r[n][e].scid,r[n][e].paused));e.addSimulcastAlternativeStreams(t,i)}}for(let t of e.getSimulcastStreams(Al.SEND)){const e=[];for(let r=0;r<t.length;r++){const n=new ql(t[r].getId(),t[r].isPaused()),i=s.getRID(n.getId());if(i){const t=i.getFormats();for(let e=0;t&&e<t.length;++e){const r=s.getCodecForType(t[e]);r&&n.addCodec(r)}n.setParams(i.getParams()),e.push(n)}}e.length&&f.push(e)}s.setSimulcast(e)}const p=new Map;if(n.ssrcs)for(let e in n.ssrcs){let t=n.ssrcs[e],s=t.id,a=t.attribute,c=t.value,u=p.get(s);if(u||(u=new zl(s),p.set(u.getSSRC(),u)),"cname"===a.toLowerCase())u.setCName(c);else if("msid"===a.toLowerCase()){let e=c.split(" "),t=e[0],n=e[1];u.setStreamId(t),u.setTrackId(n);let a=r.getStream(t);a||(a=new Xl(t),r.addStream(a));let l=a.getTrack(n);l||(l=new Hl(i,n),l.setMediaId(o),l.setEncodings(f),a.addTrack(l)),l.addSSRC(s)}}if(n.msid){let e=n.msid.split(" "),t=e[0],s=e[1],a=r.getStream(t);a||(a=new Xl(t),r.addStream(a));let c=a.getTrack(s);c||(c=new Hl(i,s),c.setMediaId(o),c.setEncodings(f),a.addTrack(c));for(let[e,r]of p.entries())r.getStreamId()||(r.setStreamId(t),r.setTrackId(s),c.addSSRC(e))}for(let[e,t]of p.entries())if(!t.getStreamId()){let n=t.getCName(),s=o;t.setStreamId(n),t.setTrackId(s);let a=r.getStream(n);a||(a=new Xl(n),r.addStream(a));let c=a.getTrack(s);c||(c=new Hl(i,s),c.setMediaId(o),c.setEncodings(f),a.addTrack(c)),c.addSSRC(e)}if(n.ssrcGroups)for(let e in n.ssrcGroups){let t=n.ssrcGroups[e],i=t.ssrcs.split(" "),o=new Vl(t.semantics,i),s=p.get(parseInt(i[0]));s&&r.getStream(s.getStreamId()).getTrack(s.getTrackId()).addSourceGroup(o)}if("application"==n.type&&"webrtc-datachannel"==n.payloads){const e=new Bl(n.sctpPort,n.maxMessageSize);s.setDataChannel(e)}r.addMedia(s)}return r};var Jl,Ql,Zl={SDPInfo:Kl,CandidateInfo:Ju,CodecInfo:tl,DTLSInfo:sl,CryptoInfo:cl,ICEInfo:Cl,MediaInfo:Ul,Setup:il,SourceGroupInfo:Vl,SourceInfo:zl,StreamInfo:Xl,TrackInfo:Hl,TrackEncodingInfo:ql,Direction:Dl},ed=(Jl=!1,(Ql=/[ac]/).exec=function(){return Jl=!0,/./.exec.apply(this,arguments)},!0===Ql.test("abc")&&Jl),td=TypeError,rd=N(/./.test);qt({target:"RegExp",proto:!0,forced:!ed},{test:function(e){var t=this.exec;if(!G(t))return rd(this,e);var r=S(t,this,e);if(null!==r&&!z(r))throw new td("RegExp exec method returned something other than an Object or null");return!!r}});var nd=p((function(e,t){!function(r,n){var i="function",o="undefined",s="object",a="string",c="model",u="name",l="type",d="vendor",f="version",p="architecture",h="console",m="mobile",g="tablet",v="smarttv",y="wearable",b="embedded",w="Amazon",E="Apple",S="ASUS",I="BlackBerry",T="Google",C="Huawei",R="LG",A="Microsoft",x="Motorola",P="Samsung",O="Sony",_="Xiaomi",N="Zebra",L="Facebook",k=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},D=function(e,t){return typeof e===a&&-1!==M(t).indexOf(M(e))},M=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===o?e:e.substring(0,255)},F=function(e,t){for(var r,o,a,c,u,l,d=0;d<t.length&&!u;){var f=t[d],p=t[d+1];for(r=o=0;r<f.length&&!u;)if(u=f[r++].exec(e))for(a=0;a<p.length;a++)l=u[++o],typeof(c=p[a])===s&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):n:this[c[0]]=l?c[1].call(this,l,c[2]):n:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):n):this[c]=l||n;d+=2}},U=function(e,t){for(var r in t)if(typeof t[r]===s&&t[r].length>0){for(var i=0;i<t[r].length;i++)if(D(t[r][i],e))return"?"===r?n:r}else if(D(t[r],e))return"?"===r?n:r;return e},j={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},V={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[f,[u,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[f,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure Browser"],f],[/\bfocus\/([\w\.]+)/i],[f,[u,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[f,[u,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 Browser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,L],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,"Chrome WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,U,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[u,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,M]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",M]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,M]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[d,P],[l,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,P],[l,m]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[d,E],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,E],[l,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,C],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[d,C],[l,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,_],[l,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,_],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[l,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[l,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,x],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,x],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,R],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,R],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[l,m]],[/(pixel c)\b/i],[c,[d,T],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,T],[l,m]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,O],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,O],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,w],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,w],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,I],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,S],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,S],[l,m]],[/(nexus 9)/i],[c,[d,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[l,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[l,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,"Sharp"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[l,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[l,g]],[/(surface duo)/i],[c,[d,A],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[l,m]],[/(u304aa)/i],[c,[d,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[l,g]],[/\b(k88) b/i],[c,[d,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[l,g]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[l,m]],[/\b(ph-1) /i],[c,[d,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[d,c,[l,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,A],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,N],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,N],[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[l,h]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[l,h]],[/(playstation [345portablevi]+)/i],[c,[d,O],[l,h]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,A],[l,h]],[/smart-tv.+(samsung)/i],[d,[l,v]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,P],[l,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,R],[l,v]],[/(apple) ?tv/i],[d,[c,"Apple TV"],[l,v]],[/crkey/i],[[c,"Chromecast"],[d,T],[l,v]],[/droid.+aft(\w)( bui|\))/i],[c,[d,w],[l,v]],[/\(dtv[\);].+(aquos)/i],[c,[d,"Sharp"],[l,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,B],[c,B],[l,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,v]],[/((pebble))app/i],[d,c,[l,y]],[/droid.+; (glass) \d/i],[c,[d,T],[l,y]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,N],[l,y]],[/(quest( 2)?)/i],[c,[d,L],[l,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[f,U,j]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[f,U,j]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[u,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[u,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[u,f]]},G=function(e,t){if(typeof e===s&&(t=e,e=n),!(this instanceof G))return new G(e,t).getResult();var i=e||(typeof r!==o&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),c=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(V,t):V;return this.getBrowser=function(){var e={};return e.name=n,e.version=n,F.call(e,i,c.browser),e.major=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:n}(e.version),e},this.getCPU=function(){var e={};return e.architecture=n,F.call(e,i,c.cpu),e},this.getDevice=function(){var e={};return e.vendor=n,e.model=n,e.type=n,F.call(e,i,c.device),e},this.getEngine=function(){var e={};return e.name=n,e.version=n,F.call(e,i,c.engine),e},this.getOS=function(){var e={};return e.name=n,e.version=n,F.call(e,i,c.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===a&&e.length>255?B(e,255):e,this},this.setUA(i),this};G.VERSION="0.7.31",G.BROWSER=k([u,f,"major"]),G.CPU=k([p]),G.DEVICE=k([c,d,l,h,m,v,g,y,b]),G.ENGINE=G.OS=k([u,f]),e.exports&&(t=e.exports=G),t.UAParser=G;var z=typeof r!==o&&(r.jQuery||r.Zepto);if(z&&!z.ua){var Y=new G;z.ua=Y.getResult(),z.ua.get=function(){return Y.getUA()},z.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var r in t)z.ua[r]=t[r]}}}("object"==typeof window?window:f)}));const id=["iOS"];class od extends nd{constructor(){super(window.navigator.userAgent)}isChrome(){const e=this.getBrowser();if(!e.name)return!1;const t=this.getOS();let r=!0;return r=!new RegExp(id.join("|"),"i").test(t.name),e.name.match(/Chrome/i)&&r}isFirefox(){const e=this.getBrowser();return!!e.name&&e.name.match(/Firefox/i)}}const sd=on.get("SdpParser"),ad=Array.from({length:31},((e,t)=>t+35)),cd=Array.from({length:32},((e,t)=>t+96)),ud=Array.from({length:14},((e,t)=>t+1)),ld=Array.from({length:240},((e,t)=>t+16));class dd{static setSimulcast(e,t){if(sd.info("Setting simulcast. Codec: ",t),!(new od).isChrome())return sd.warn("Simulcast is only available in Google Chrome browser"),e;if("h264"!==t&&"vp8"!==t)return sd.warn("Simulcast is only available in h264 and vp8 codecs"),e;try{const t=/m=video[\s\S]*?a=ssrc:(\d*) msid:([\s\S]+?)\r\n/,r=/m=video[\s\S]*?a=ssrc:(\d*) cname:([\s\S]+?)\r\n/.exec(e),n=r[1],i=r[2],o=t.exec(e)[2],s=2,a=[n];for(let t=0;t<s;++t){const r=100+2*t,n=r+1;a.push(r),e+="a=ssrc-group:FID "+r+" "+n+"\r\na=ssrc:"+r+" cname:"+i+"\r\na=ssrc:"+r+" msid:"+o+"\r\na=ssrc:"+n+" cname:"+i+"\r\na=ssrc:"+n+" msid:"+o+"\r\n"}return e+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",sd.info("Simulcast setted"),sd.debug("Simulcast SDP: ",e),e}catch(e){throw sd.error("Error setting SDP for simulcast: ",e),e}}static setStereo(e){return sd.info("Replacing SDP response for support stereo"),e=e.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),sd.info("Replaced SDP response for support stereo"),sd.debug("New SDP value: ",e),e}static setDTX(e){return sd.info("Replacing SDP response for support dtx"),e=e.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),sd.info("Replaced SDP response for support dtx"),sd.debug("New SDP value: ",e),e}static setAbsoluteCaptureTime(e){const t="a=extmap:"+dd.getAvailableHeaderExtensionIdRange(e)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return e=e.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((e,r,n)=>r+t+n)),sd.info("Replaced SDP response for setting absolute capture time"),sd.debug("New SDP value: ",e),e}static setDependencyDescriptor(e){const t="a=extmap:"+dd.getAvailableHeaderExtensionIdRange(e)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return e=e.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((e,r,n)=>r+t+n)),sd.info("Replaced SDP response for setting depency descriptor"),sd.debug("New SDP value: ",e),e}static setVideoBitrate(e,t){if(t<1)sd.info("Remove bitrate restrictions"),e=e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const r=Zl.SDPInfo.parse(e),n=r.getMedia("video");sd.info("Setting video bitrate"),n.setBitrate(t),e=r.toString()}return e}static removeSdpLine(e,t){return sd.debug("SDP before trimming: ",e),e=e.split("\n").filter((e=>e.trim()!==t)).join("\n"),sd.debug("SDP trimmed result: ",e),e}static adaptCodecName(e,t,r){if(!e)return e;const n=new RegExp("".concat(t),"i");return e.replace(n,r)}static setMultiopus(e,t){if((new od).isChrome()&&(!t||fd(t)))if(e.includes("multiopus/48000/6"))sd.info("Multiopus already setted");else{sd.info("Setting multiopus");const t=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(e)[0],r=dd.getAvailablePayloadTypeRange(e)[0],n=t.replace("\r\n"," ")+r+"\r\na=rtpmap:"+r+" multiopus/48000/6\r\na=fmtp:"+r+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";e=e.replace(t,n),sd.info("Multiopus offer created"),sd.debug("SDP parsed for multioups: ",e)}return e}static getAvailablePayloadTypeRange(e){const t=e.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let r=cd.concat(ad);var n,i=d(t);try{for(i.s();!(n=i.n()).done;){const e=n.value[1].split(" ").map((e=>parseInt(e)));r=r.filter((t=>!e.includes(t)))}}catch(e){i.e(e)}finally{i.f()}return r}static getAvailableHeaderExtensionIdRange(e){const t=e.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let r=ud.concat(ld);var n,i=d(t);try{for(i.s();!(n=i.n()).done;){const e=n.value[1].split(" ").map((e=>parseInt(e)));r=r.filter((t=>!e.includes(t)))}}catch(e){i.e(e)}finally{i.f()}return r}static renegotiate(e,t){const r=Zl.SDPInfo.parse(e),n=Zl.SDPInfo.parse(t);var i,o=d(r.getMedias());try{for(o.s();!(i=o.n()).done;){const t=i.value;let r=n.getMediaById(t.getId());if(!r){r=new Zl.MediaInfo(t.getId(),t.getType()),r.setDirection(Zl.Direction.reverse(t.getDirection()));const i=n.getMedia(t.getType());if(i){r.setCodecs(i.getCodecs());var s,a=d(i.getExtensions());try{for(a.s();!(s=a.n()).done;){const e=c(s.value,2),t=e[0],n=e[1];r.addExtension(t,n)}}catch(e){a.e(e)}finally{a.f()}}n.addMedia(r)}}}catch(e){o.e(e)}finally{o.f()}return n.toString()}static updateMissingVideoExtensions(e,t){var r;const n=Zl.SDPInfo.parse(e),i=null===(r=Zl.SDPInfo.parse(t).getMediasByType("video")[0])||void 0===r?void 0:r.getExtensions();if(i||i.length){var o,s=d(n.getMediasByType("video"));try{for(s.s();!(o=s.n()).done;){const t=o.value,r=t.getExtensions();i.forEach(((n,i)=>{if(!r.get(i)){const r=t.getId(),o="a=extmap:"+i+" "+n+"\r\n",s=new RegExp("(a=mid:"+r+"\r\n(?:.*\r\n)*?)","g");e=e.replace(s,((e,t,r)=>t+o))}}))}}catch(e){s.e(e)}finally{s.f()}return e}}}const fd=e=>e.getAudioTracks().some((e=>e.getSettings().channelCount>2));var pd=Rt.indexOf,hd=N([].indexOf),md=!!hd&&1/hd([1],1,-0)<0,gd=function(e,t){var r=[].indexOf;return!!r&&y((function(){r.call(null,(function(){return 1}),1)}))}();qt({target:"Array",proto:!0,forced:md||!gd},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return md?hd(this,e,t)||0:pd(this,e,t)}});class vd extends mc{constructor(e,t){super(),this.namespace=e,this.tm=t}cmd(e,t){return this.tm.cmd(e,t,this.namespace)}event(e,t){return this.tm.event(e,t,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}}var yd=class extends mc{constructor(e){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=e,this.listener=t=>{let r;try{r=JSON.parse(t.utf8Data||t.data||t)}catch(e){return}switch(r.type){case"cmd":const t={name:r.name,data:r.data,namespace:r.namespace,accept:t=>{e.send(JSON.stringify({type:"response",transId:r.transId,data:t}))},reject:t=>{e.send(JSON.stringify({type:"error",transId:r.transId,data:t}))}};if(t.namespace){const e=this.namespaces.get(t.namespace);e?e.emit("cmd",t):this.emit("cmd",t)}else this.emit("cmd",t);break;case"response":{const e=this.transactions.get(r.transId);if(!e)return;this.transactions.delete(r.transId),e.resolve(r.data);break}case"error":{const e=this.transactions.get(r.transId);if(!e)return;this.transactions.delete(r.transId),e.reject(r.data);break}case"event":const i={name:r.name,data:r.data,namespace:r.namespace};if(i.namespace){var n=this.namespaces.get(i.namespace);n?n.emit("event",i):this.emit("event",i)}else this.emit("event",i)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}cmd(e,t,r){return new Promise(((n,i)=>{if(!e||0===e.length)throw new Error("Bad command name");const o={type:"cmd",transId:this.maxId++,name:e,data:t};r&&(o.namespace=r);const s=JSON.stringify(o);o.resolve=n,o.reject=i,this.transactions.set(o.transId,o);try{this.transport.send(s)}catch(e){throw this.transactions.delete(o.transId),e}}))}event(e,t,r){if(!e||0===e.length)throw new Error("Bad event name");const n={type:"event",name:e,data:t};r&&(n.namespace=r);const i=JSON.stringify(n);this.transport.send(i)}namespace(e){let t=this.namespaces.get(e);return t||(t=new vd(e,this),this.namespaces.set(e,t),t)}close(){for(const e of this.namespaces.values())e.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}};const bd=on.get("Signaling"),wd="wsConnectionSuccess",Ed="wsConnectionError",Sd="broadcastEvent",Id={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1"},Td={OPUS:"opus",MULTIOPUS:"multiopus"};class Cd extends mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{streamName:null,url:"ws://localhost:8080/"};super(),this.streamName=e.streamName,this.wsUrl=e.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null}connect(){var e=this;return s((function*(){var t;return bd.info("Connecting to Signaling Server"),e.transactionManager&&(null===(t=e.webSocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?(bd.info("Connected to server: ",e.webSocket.url),bd.debug("WebSocket value: ",{url:e.webSocket.url,protocol:e.webSocket.protocol,readyState:e.webSocket.readyState,binaryType:e.webSocket.binaryType,extensions:e.webSocket.extensions}),e.emit(wd,{ws:e.webSocket,tm:e.transactionManager}),e.webSocket):new Promise(((t,r)=>{e.webSocket=new WebSocket(e.wsUrl),e.transactionManager=new yd(e.webSocket),e.webSocket.onopen=()=>{bd.info("WebSocket opened"),e.transactionManager.on("event",(t=>{e.emit(Sd,t)})),bd.info("Connected to server: ",e.webSocket.url),bd.debug("WebSocket value: ",{url:e.webSocket.url,protocol:e.webSocket.protocol,readyState:e.webSocket.readyState,binaryType:e.webSocket.binaryType,extensions:e.webSocket.extensions}),e.emit(wd,{ws:e.webSocket,tm:e.transactionManager}),t(e.webSocket)},e.webSocket.onerror=()=>{bd.error("WebSocket not connected: ",e.webSocket.url),e.emit(Ed,e.webSocket.url),r(e.webSocket.url)},e.webSocket.onclose=()=>{e.webSocket=null,e.transactionManager=null,bd.info("Connection closed with Signaling Server."),e.emit("wsConnectionClose")}}))}))()}close(){var e;bd.info("Closing connection with Signaling Server."),null===(e=this.webSocket)||void 0===e||e.close()}subscribe(e,t){var r=arguments,n=this;return s((function*(){let i=r.length>2&&void 0!==r[2]?r[2]:null,o=r.length>3&&void 0!==r[3]?r[3]:null;bd.info("Starting subscription to streamName: ",n.streamName),bd.debug("Subcription local description: ",e);const s=Rd(t,i,o),a={sdp:e=dd.adaptCodecName(e,"AV1X",Id.AV1),streamId:n.streamName,pinnedSourceId:s.pinnedSourceId,excludedSourceIds:s.excludedSourceIds};s.vad&&(a.vad=!0),Array.isArray(s.events)&&(a.events=s.events);try{var c,u,l,d,f;yield n.connect(),bd.info("Sending view command");const e=yield n.transactionManager.cmd("view",a),t=null===(c=(u=RTCRtpReceiver).getCapabilities)||void 0===c||null===(l=c.call(u,"video"))||void 0===l||null===(d=l.codecs)||void 0===d||null===(f=d.find)||void 0===f?void 0:f.call(d,(e=>"video/AV1X"===e.mimeType));return e.sdp=t?dd.adaptCodecName(e.sdp,Id.AV1,"AV1X"):e.sdp,bd.info("Command sent, subscriberId: ",e.subscriberId),bd.debug("Command result: ",e),n.serverId=e.subscriberId,n.clusterId=e.clusterId,e.sdp}catch(e){throw bd.error("Error sending view command, error: ",e),e}}))()}publish(e,t){var r=arguments,n=this;return s((function*(){const i=Ad(t,r.length>2&&void 0!==r[2]?r[2]:null,r.length>3&&void 0!==r[3]?r[3]:null);bd.info("Starting publishing to streamName: ".concat(n.streamName,", codec: ").concat(i.codec)),bd.debug("Publishing local description: ",e);const o=Object.values(Id);if(-1===o.indexOf(i.codec))throw bd.error("Invalid codec. Possible values are: ",o),new Error("Invalid codec. Possible values are: ".concat(o));i.codec===Id.AV1&&(e=dd.adaptCodecName(e,"AV1X",Id.AV1));const s={name:n.streamName,sdp:e,codec:i.codec,sourceId:i.sourceId};null!==i.record&&(s.record=i.record),Array.isArray(i.events)&&(s.events=i.events);try{yield n.connect(),bd.info("Sending publish command");const e=yield n.transactionManager.cmd("publish",s);if(i.codec===Id.AV1){var a,c,u,l,d;const t=null===(a=(c=RTCRtpSender).getCapabilities)||void 0===a||null===(u=a.call(c,"video"))||void 0===u||null===(l=u.codecs)||void 0===l||null===(d=l.find)||void 0===d?void 0:d.call(l,(e=>"video/AV1X"===e.mimeType));e.sdp=t?dd.adaptCodecName(e.sdp,Id.AV1,"AV1X"):e.sdp}return bd.info("Command sent, publisherId: ",e.publisherId),bd.debug("Command result: ",e),n.serverId=e.publisherId,n.clusterId=e.clusterId,e.sdp}catch(e){throw bd.error("Error sending publish command, error: ",e),e}}))()}cmd(e,t){var r=this;return s((function*(){return bd.info("Sending cmd: ".concat(e)),r.transactionManager.cmd(e,t)}))()}}const Rd=(e,t,r)=>{let n="object"==typeof e?e:{};return 0===Object.keys(n).length&&(n={vad:e,pinnedSourceId:t,excludedSourceIds:r}),n},Ad=(e,t,r)=>{let n="object"==typeof e?e:{};if(0===Object.keys(n).length){const i=Id.H264;n={codec:null!=e?e:i,record:t,sourceId:r}}return n},xd=on.get("PeerConnection"),Pd={track:"track",connectionStateChange:"connectionStateChange"},Od={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class _d extends mc{constructor(){super(),this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null}createRTCPeer(){var e=arguments,t=this;return s((function*(){let r=e.length>0&&void 0!==e[0]?e[0]:null;xd.info("Creating new RTCPeerConnection"),xd.debug("RTC configuration provided by user: ",r),t.peer=kd(t,r)}))()}getRTCPeer(){return xd.info("Getting RTC Peer"),this.peer}closeRTCPeer(){var e=this;return s((function*(){var t;xd.info("Closing RTCPeerConnection"),null===(t=e.peer)||void 0===t||t.close(),e.peer=null,e.stopStats(),e.emit(Pd.connectionStateChange,"closed")}))()}setRTCRemoteSDP(e){var t=this;return s((function*(){xd.info("Setting RTC Remote SDP");const r={type:"answer",sdp:e};try{yield t.peer.setRemoteDescription(r),xd.info("RTC Remote SDP was set successfully."),xd.debug("RTC Remote SDP new value: ",e)}catch(e){throw xd.error("Error while setting RTC Remote SDP: ",e),e}}))()}getRTCLocalSDP(){var e=arguments,t=this;return s((function*(){let r=e.length>0&&void 0!==e[0]?e[0]:Od;xd.info("Getting RTC Local SDP"),r=i(i({},Od),r),xd.debug("Options: ",r);const n=Ld(r.mediaStream);n?Md(t.peer,n,r):Bd(t.peer,r),xd.info("Creating peer offer");const o=yield t.peer.createOffer();return xd.info("Peer offer created"),xd.debug("Peer offer response: ",o.sdp),t.sessionDescription=o,r.disableAudio||(r.stereo&&(t.sessionDescription.sdp=dd.setStereo(t.sessionDescription.sdp)),r.dtx&&(t.sessionDescription.sdp=dd.setDTX(t.sessionDescription.sdp)),t.sessionDescription.sdp=dd.setMultiopus(t.sessionDescription.sdp,n)),!r.disableVideo&&r.simulcast&&(t.sessionDescription.sdp=dd.setSimulcast(t.sessionDescription.sdp,r.codec)),r.absCaptureTime&&(t.sessionDescription.sdp=dd.setAbsoluteCaptureTime(t.sessionDescription.sdp)),r.dependencyDescriptor&&(t.sessionDescription.sdp=dd.setDependencyDescriptor(t.sessionDescription.sdp)),r.setSDPToPeer&&(yield t.peer.setLocalDescription(t.sessionDescription),xd.info("Peer local description set")),t.sessionDescription.sdp}))()}addRemoteTrack(e,t){var r=this;return s((function*(){return new Promise(((n,i)=>{try{const i=r.peer.addTransceiver(e,{direction:"recvonly"});var o,s=d(t);try{for(s.s();!(o=s.n()).done;)o.value.addTrack(i.receiver.track)}catch(e){s.e(e)}finally{s.f()}i.resolve=n,i.streams=t}catch(e){i(e)}}))}))()}updateBandwidthRestriction(e,t){return xd.info("Updating bandwidth restriction, bitrate value: ",t),xd.debug("SDP value: ",e),dd.setVideoBitrate(e,t)}updateBitrate(){var e=arguments,t=this;return s((function*(){let r=e.length>0&&void 0!==e[0]?e[0]:0;if(!t.peer)throw xd.error("Cannot update bitrate. No peer found."),new Error("Cannot update bitrate. No peer found.");xd.info("Updating bitrate to value: ",r),t.sessionDescription=yield t.peer.createOffer(),yield t.peer.setLocalDescription(t.sessionDescription);const n=t.updateBandwidthRestriction(t.peer.remoteDescription.sdp,r);yield t.setRTCRemoteSDP(n),xd.info("Bitrate restirctions updated: ","".concat(r>0?r:"unlimited"," kbps"))}))()}getRTCPeerStatus(){if(xd.info("Getting RTC peer status"),!this.peer)return null;const e=Fd(this.peer);return xd.info("RTC peer status getted, value: ",e),e}replaceTrack(e){if(!this.peer)return void xd.error("Could not change track if there is not an active connection.");const t=this.peer.getSenders().find((t=>t.track.kind===e.kind));t?t.replaceTrack(e):xd.error("There is no ".concat(e.kind," track in active broadcast."))}static getCapabilities(e){const t=new od;if(t.isFirefox())return(e=>"video"===e?{codecs:[{codec:"vp8",mimeType:"video/VP8"},{codec:"vp9",mimeType:"video/VP9"},{codec:"h264",mimeType:"video/H264"}],headerExtensions:[]}:"audio"===e?{codecs:[{codec:"opus",mimeType:"audio/opus",channels:2}],headerExtensions:[]}:null)(e);const r=RTCRtpSender.getCapabilities(e);if(r){const s={};let a=new RegExp("^video/(".concat(Object.values(Id).join("|"),")x?$"),"i");"audio"===e&&(a=new RegExp("^audio/(".concat(Object.values(Td).join("|"),")$"),"i"),t.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));var n,o=d(r.codecs);try{for(o.s();!(n=o.n()).done;){const e=n.value,t=e.mimeType.match(a);if(t){const r=t[1].toLowerCase();if(s[r]=i(i({},s[r]),{},{mimeType:e.mimeType}),e.scalabilityModes){let t=s[r].scalabilityModes||[];t=[...t,...e.scalabilityModes],s[r].scalabilityModes=[...new Set(t)]}e.channels&&(s[r].channels=e.channels)}}}catch(e){o.e(e)}finally{o.f()}r.codecs=Object.keys(s).map((e=>i({codec:e},s[e])))}return r}getTracks(){var e,t;return null===(e=this.peer)||void 0===e||null===(t=e.getSenders())||void 0===t?void 0:t.map((e=>e.track))}initStats(){this.peerConnectionStats?xd.warn("Cannot init peer stats: Already initialized"):this.peer?(this.peerConnectionStats=new Bc(this.peer),this.peerConnectionStats.init(),Rc(this.peerConnectionStats,this,[Mc])):xd.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var e;null===(e=this.peerConnectionStats)||void 0===e||e.stop(),this.peerConnectionStats=null}}const Nd=e=>(null==e?void 0:e.getAudioTracks().length)<=1&&(null==e?void 0:e.getVideoTracks().length)<=1,Ld=e=>{if(!e)return null;if(e instanceof MediaStream&&Nd(e))return e;if(!(e instanceof MediaStream)){xd.info("Creating MediaStream to add received tracks.");const n=new MediaStream;var t,r=d(e);try{for(r.s();!(t=r.n()).done;){const e=t.value;n.addTrack(e)}}catch(e){r.e(e)}finally{r.f()}if(Nd(n))return n}throw xd.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new Error("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},kd=(e,t)=>{const r=new RTCPeerConnection(t);return Dd(e,r),r},Dd=(e,t)=>{var r;t.ontrack=t=>{var r;if(xd.info("New track from peer."),xd.debug("Track event value: ",t),null!=t&&null!==(r=t.transceiver)&&void 0!==r&&r.resolve){const e=t.transceiver.resolve;delete t.transceiver.resolve,e(t.transceiver)}e.emit(Pd.track,t)},t.connectionState?t.onconnectionstatechange=r=>{xd.info("Peer connection state change: ",t.connectionState),e.emit(Pd.connectionStateChange,t.connectionState)}:t.oniceconnectionstatechange=r=>{xd.info("Peer ICE connection state change: ",t.iceConnectionState),e.emit(Pd.connectionStateChange,t.iceConnectionState)},t.onnegotiationneeded=(r=s((function*(e){if(!t.remoteDescription)return;xd.info("Peer onnegotiationneeded, updating local description");const r=yield t.createOffer();xd.info("Peer onnegotiationneeded, got local offer",r.sdp),r.sdp=dd.updateMissingVideoExtensions(r.sdp,t.remoteDescription.sdp),yield t.setLocalDescription(r);const n=dd.renegotiate(r.sdp,t.remoteDescription.sdp);xd.info("Peer onnegotiationneeded, updating remote description",n),yield t.setRemoteDescription({type:"answer",sdp:n}),xd.info("Peer onnegotiationneeded, renegotiation done")})),function(e){return r.apply(this,arguments)})},Md=(e,t,r)=>{xd.info("Adding mediaStream tracks to RTCPeerConnection");var n,i=d(t.getTracks());try{for(i.s();!(n=i.n()).done;){const i=n.value,o={streams:[t]};"audio"===i.kind&&(o.direction=r.disableAudio?"inactive":"sendonly"),"video"===i.kind&&(o.direction=r.disableVideo?"inactive":"sendonly",r.scalabilityMode&&(new od).isChrome()?(xd.debug("Video track with scalability mode: ".concat(r.scalabilityMode,".")),o.sendEncodings=[{scalabilityMode:r.scalabilityMode}]):r.scalabilityMode&&xd.warn("SVC is only supported in Google Chrome")),e.addTransceiver(i,o),xd.info("Track '".concat(i.label,"' added: "),"id: ".concat(i.id),"kind: ".concat(i.kind))}}catch(e){i.e(e)}finally{i.f()}},Bd=(e,t)=>{t.disableVideo||e.addTransceiver("video",{direction:"recvonly"}),t.disableAudio||e.addTransceiver("audio",{direction:"recvonly"});for(let r=0;r<t.multiplexedAudioTracks;r++)e.addTransceiver("audio",{direction:"recvonly"})},Fd=e=>{var t;const r=null!==(t=e.connectionState)&&void 0!==t?t:e.iceConnectionState;switch(r){case"checking":return"connecting";case"completed":return"connected";default:return r}},Ud=on.get("Director");let jd="",Vd="https://director.millicast.com";class Gd{static setEndpoint(e){Vd=e.replace(/\/$/,"")}static getEndpoint(){return Vd}static setLiveDomain(e){jd=e.replace(/\/$/,"")}static getLiveDomain(){return jd}static getPublisher(e){var t=arguments,r=this;return s((function*(){const n=zd(e,t.length>1&&void 0!==t[1]?t[1]:null,t.length>2&&void 0!==t[2]?t[2]:"WebRtc");Ud.info("Getting publisher connection path for stream name: ",n.streamName);const i={streamName:n.streamName,streamType:n.streamType},o={"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)},s="".concat(r.getEndpoint(),"/api/director/publish");try{let e=yield fetch(s,{method:"POST",headers:o,body:JSON.stringify(i)});return e=yield e.json(),e=qd(e),Ud.debug("Getting publisher response: ",e),e.data}catch(e){var a;throw Ud.error("Error while getting publisher connection path: ",null===(a=e.response)||void 0===a?void 0:a.data),e}}))()}static getSubscriber(e){var t=arguments,r=this;return s((function*(){const n=Yd(e,t.length>1&&void 0!==t[1]?t[1]:null,t.length>2&&void 0!==t[2]?t[2]:null);Ud.info("Getting subscriber connection data for stream name: ".concat(n.streamName," and account id: ").concat(n.streamAccountId));const o={streamAccountId:n.streamAccountId,streamName:n.streamName};let s={"Content-Type":"application/json"};n.subscriberToken&&(s=i(i({},s),{},{Authorization:"Bearer ".concat(n.subscriberToken)}));const a="".concat(r.getEndpoint(),"/api/director/subscribe");try{let e=yield fetch(a,{method:"POST",headers:s,body:JSON.stringify(o)});return e=yield e.json(),e=qd(e),Ud.debug("Getting subscriber response: ",e),e.data}catch(e){var c;throw Ud.error("Error while getting subscriber connection path: ",null===(c=e.response)||void 0===c?void 0:c.data),e}}))()}}const zd=(e,t,r)=>{let n="object"==typeof e?e:{};return 0===Object.keys(n).length&&(n={token:e,streamName:t,streamType:r}),n},Yd=(e,t,r)=>{let n="object"==typeof e?e:{};return 0===Object.keys(n).length&&(n={streamName:e,streamAccountId:t,subscriberToken:r}),n},qd=e=>{if(Gd.getLiveDomain()){const t=/\/\/(.*?)\//,r=e.data.urls.map((e=>{const r=t.exec(e);return e.replace(r[1],Gd.getLiveDomain())}));e.data.urls=r}return e};function $d(e){this.message=e}function Hd(e){this.message=e}let Wd;$d.prototype=new Error,$d.prototype.name="InvalidCharacterError","undefined"!=typeof window&&window.atob&&window.atob.bind(window),Hd.prototype=new Error,Hd.prototype.name="InvalidTokenError",p((function(e,t){!function(r){if(null!=t&&"number"!=typeof t.nodeType)e.exports=r();else{var n=r(),i="undefined"!=typeof self?self:$.global;"function"!=typeof i.btoa&&(i.btoa=n.btoa),"function"!=typeof i.atob&&(i.atob=n.atob)}}((function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(r){for(var n,i,o=String(r),s=0,a=e,c="";o.charAt(0|s)||(a="=",s%1);c+=a.charAt(63&n>>8-s%1*8)){if((i=o.charCodeAt(s+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return c},atob:function(r){var n=String(r).replace(/[=]+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,s=0,a=0,c="";o=n.charAt(a++);~o&&(i=s%4?64*i+o:o,s++%4)?c+=String.fromCharCode(255&i>>(-2*s&6)):0)o=e.indexOf(o);return c}}}))}));class Xd extends mc{constructor(e,t,r,n){if(super(),Wd=r,!e)throw Wd.error("Stream Name is required to construct this module."),new Error("Stream Name is required to construct this module.");if(!t)throw Wd.error("Token generator is required to construct this module."),new Error("Token generator is required to construct this module.");this.webRTCPeer=new _d,this.signaling=null,this.streamName=e,this.autoReconnect=n,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.tokenGenerator=t,this.options=null}getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var e;Wd.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null===(e=this.signaling)||void 0===e||e.close(),this.signaling=null,this.webRTCPeer=new _d}isActive(){const e=this.webRTCPeer.getRTCPeerStatus();return Wd.info("Broadcast status: ",e||"not_established"),"connected"===e}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(Ed,(()=>{!this.firstReconnection&&this.alreadyDisconnected||(this.firstReconnection=!1,this.reconnect())})),this.webRTCPeer.on(Pd.connectionStateChange,(e=>{("failed"===e||"disconnected"===e&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect()):"disconnected"===e?(this.alreadyDisconnected=!0,setTimeout((()=>this.reconnect()),1500)):this.alreadyDisconnected=!1})))}reconnect(){var e=this;return s((function*(){try{e.isActive()||(e.stop(),yield e.connect(e.options),e.alreadyDisconnected=!1,e.reconnectionInterval=1e3,e.firstReconnection=!0)}catch(t){e.reconnectionInterval=Kd(e.reconnectionInterval),Wd.error("Reconnection failed, retrying in ".concat(e.reconnectionInterval,"ms. Error was: "),t),e.emit("reconnect",{timeout:e.reconnectionInterval,error:t}),setTimeout((()=>e.reconnect()),e.reconnectionInterval)}}))()}}const Kd=e=>e<32e3?2*e:e;on.get("Publish");const Jd=on.get("View"),Qd={disableVideo:!1,disableAudio:!1,peerConfig:{}};class Zd extends Xd{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t,Jd,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),r&&this.on(Pd.track,(e=>{r.srcObject=e.streams[0]}))}connect(){var e=arguments,t=this;return s((function*(){let r=e.length>0&&void 0!==e[0]?e[0]:Qd;t.options=i(i(i({},Qd),r),{},{setSDPToPeer:!1}),yield t.initConnection({migrate:!1})}))()}select(){var e=arguments,t=this;return s((function*(){let r=e.length>0&&void 0!==e[0]?e[0]:{};Jd.debug("Viewer select layer values: ",r),yield t.signaling.cmd("select",{layer:r}),Jd.info("Connected to streamName: ",t.streamName)}))()}addRemoteTrack(e,t){var r=this;return s((function*(){return Jd.info("Viewer adding remote % track",e),r.webRTCPeer.addRemoteTrack(e,t)}))()}project(e,t){var r=this;return s((function*(){var n,i=d(t);try{for(i.s();!(n=i.n()).done;){const e=n.value;if(!e.trackId&&!e.media)throw Jd.error("Error in projection mapping, trackId or mediaId must be set"),new Error("Error in projection mapping, trackId or mediaId must be set");const t=r.webRTCPeer.getRTCPeer();if(e.mediaId&&!t.getTransceivers().find((t=>t.mid===e.mediaId)))throw Jd.error("Error in projection mapping, ".concat(e.mediaId," mid not found in local transceivers")),new Error("Error in projection mapping, ".concat(e.mediaId," mid not found in local transceivers"))}}catch(e){i.e(e)}finally{i.f()}Jd.debug("Viewer project source:%s layer mappings: ",e,t),yield r.signaling.cmd("project",{sourceId:e,mapping:t}),Jd.info("Projection done")}))()}unproject(e){var t=this;return s((function*(){Jd.debug("Viewer unproject mediaIds: ",e),yield t.signaling.cmd("unproject",{mediaIds:e}),Jd.info("Unprojection done")}))()}replaceConnection(){var e=this;return s((function*(){Jd.info("Migrating current connection"),yield e.initConnection({migrate:!0})}))()}initConnection(e){var t=this;return s((function*(){var r,n;let o,s;if(Jd.debug("Viewer connect options values: ",t.options),!e.migrate&&t.isActive())throw Jd.warn("Viewer currently subscribed"),new Error("Viewer currently subscribed");try{var a;s=yield t.tokenGenerator(),t.options.peerConfig.iceServers=null===(a=s)||void 0===a?void 0:a.iceServers}catch(e){throw Jd.error("Error generating token."),e}if(!s)throw Jd.error("Error while subscribing. Subscriber data required"),new Error("Subscriber data required");const c=new Cd({streamName:t.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)}),u=e.migrate?new _d:t.webRTCPeer;yield u.createRTCPeer(t.options.peerConfig),null===(r=t.stopReemitingWebRTCPeerInstanceEvents)||void 0===r||r.call(t),null===(n=t.stopReemitingSignalingInstanceEvents)||void 0===n||n.call(t),t.stopReemitingWebRTCPeerInstanceEvents=Rc(u,t,Object.values(Pd)),t.stopReemitingSignalingInstanceEvents=Rc(c,t,[Sd]);const l=u.getRTCLocalSDP(i(i({},t.options),{},{stereo:!0})),d=c.connect();o=yield Promise.all([l,d]);const f=o[0];let p=t.signaling;t.signaling=c;const h=t.signaling.subscribe(f,i(i({},t.options),{},{vad:t.options.multiplexedAudioTracks>0})),m=u.peer.setLocalDescription(u.sessionDescription);o=yield Promise.all([h,m]);const g=o[0];yield u.setRTCRemoteSDP(g),Jd.info("Connected to streamName: ",t.streamName);let v=t.webRTCPeer;t.webRTCPeer=u,t.setReconnect(),e.migrate&&t.webRTCPeer.on(Pd.connectionStateChange,(e=>{if("connected"===e)setTimeout((()=>{var e,t,r,n;null===(e=p)||void 0===e||null===(t=e.close)||void 0===t||t.call(e),null===(r=v)||void 0===r||null===(n=r.closeRTCPeer)||void 0===n||n.call(r),p=v=null,Jd.info("Current connection migrated")}),1e3);else if(["disconnected","failed","closed"].includes(e)){var t,r,n,i;null===(t=p)||void 0===t||null===(r=t.close)||void 0===r||r.call(t),null===(n=v)||void 0===n||null===(i=n.closeRTCPeer)||void 0===i||i.call(n),p=v=null}}))}))()}}var ef,tf,rf;!function(e){e[e.SLICE_NON_IDR=1]="SLICE_NON_IDR",e[e.SLICE_PARTITION_A=2]="SLICE_PARTITION_A",e[e.SLICE_PARTITION_B=3]="SLICE_PARTITION_B",e[e.SLICE_PARTITION_C=4]="SLICE_PARTITION_C",e[e.SLICE_IDR=5]="SLICE_IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.AUD=9]="AUD",e[e.END_SEQ=10]="END_SEQ",e[e.END_STREAM=11]="END_STREAM",e[e.FILLER_DATA=12]="FILLER_DATA",e[e.SPS_EXT=13]="SPS_EXT",e[e.PREFIX_NALU=14]="PREFIX_NALU",e[e.SUBSET_SPS=15]="SUBSET_SPS",e[e.DPS=16]="DPS",e[e.SLICE_AUX=19]="SLICE_AUX",e[e.SLICE_EXT=20]="SLICE_EXT",e[e.SLICE_LAYER_EXT=21]="SLICE_LAYER_EXT"}(ef=ef||(ef={}));for(const e of[100,110,122,244,44,83,86,118,128,138,139,134,135]);!function(e){e[e.BUFFERING_PERIOD=0]="BUFFERING_PERIOD",e[e.PIC_TIMING=1]="PIC_TIMING",e[e.PAN_SCAN_RECT=2]="PAN_SCAN_RECT",e[e.FILLER_PAYLOAD=3]="FILLER_PAYLOAD",e[e.USER_DATA_REGISTERED_ITU_T_T35=4]="USER_DATA_REGISTERED_ITU_T_T35",e[e.USER_DATA_UNREGISTERED=5]="USER_DATA_UNREGISTERED",e[e.RECOVERY_POINT=6]="RECOVERY_POINT",e[e.DEC_REF_PIC_MARKING_REPETITION=7]="DEC_REF_PIC_MARKING_REPETITION",e[e.SPARE_PIC=8]="SPARE_PIC",e[e.SCENE_INFO=9]="SCENE_INFO",e[e.SUB_SEQ_INFO=10]="SUB_SEQ_INFO",e[e.SUB_SEQ_LAYER_CHARACTERISTICS=11]="SUB_SEQ_LAYER_CHARACTERISTICS",e[e.SUB_SEQ_CHARACTERISTICS=12]="SUB_SEQ_CHARACTERISTICS",e[e.FULL_FRAME_FREEZE=13]="FULL_FRAME_FREEZE",e[e.FULL_FRAME_FREEZE_RELEASE=14]="FULL_FRAME_FREEZE_RELEASE",e[e.FULL_FRAME_SNAPSHOT=15]="FULL_FRAME_SNAPSHOT",e[e.PROGRESSIVE_REFINEMENT_SEGMENT_START=16]="PROGRESSIVE_REFINEMENT_SEGMENT_START",e[e.PROGRESSIVE_REFINEMENT_SEGMENT_END=17]="PROGRESSIVE_REFINEMENT_SEGMENT_END",e[e.MOTION_CONSTRAINED_SLICE_GROUP_SET=18]="MOTION_CONSTRAINED_SLICE_GROUP_SET",e[e.FILM_GRAIN_CHARACTERISTICS=19]="FILM_GRAIN_CHARACTERISTICS",e[e.DEBLOCKING_FILTER_DISPLAY_PREFERENCE=20]="DEBLOCKING_FILTER_DISPLAY_PREFERENCE",e[e.STEREO_VIDEO_INFO=21]="STEREO_VIDEO_INFO",e[e.POST_FILTER_HINT=22]="POST_FILTER_HINT",e[e.TONE_MAPPING_INFO=23]="TONE_MAPPING_INFO",e[e.SCALABILITY_INFO=24]="SCALABILITY_INFO",e[e.SUB_PIC_SCALABLE_LAYER=25]="SUB_PIC_SCALABLE_LAYER",e[e.NON_REQUIRED_LAYER_REP=26]="NON_REQUIRED_LAYER_REP",e[e.PRIORITY_LAYER_INFO=27]="PRIORITY_LAYER_INFO",e[e.LAYERS_NOT_PRESENT=28]="LAYERS_NOT_PRESENT",e[e.LAYER_DEPENDENCY_CHANGE=29]="LAYER_DEPENDENCY_CHANGE",e[e.SCALABLE_NESTING=30]="SCALABLE_NESTING",e[e.BASE_LAYER_TEMPORAL_HRD=31]="BASE_LAYER_TEMPORAL_HRD",e[e.QUALITY_LAYER_INTEGRITY_CHECK=32]="QUALITY_LAYER_INTEGRITY_CHECK",e[e.REDUNDANT_PIC_PROPERTY=33]="REDUNDANT_PIC_PROPERTY",e[e.TL0_DEP_REP_INDEX=34]="TL0_DEP_REP_INDEX",e[e.TL_SWITCHING_POINT=35]="TL_SWITCHING_POINT",e[e.PARALLEL_DECODING_INFO=36]="PARALLEL_DECODING_INFO",e[e.MVC_SCALABLE_NESTING=37]="MVC_SCALABLE_NESTING",e[e.VIEW_SCALABILITY_INFO=38]="VIEW_SCALABILITY_INFO",e[e.MULTIVIEW_SCENE_INFO=39]="MULTIVIEW_SCENE_INFO",e[e.MULTIVIEW_ACQUISITION_INFO=40]="MULTIVIEW_ACQUISITION_INFO",e[e.NON_REQUIRED_VIEW_COMPONENT=41]="NON_REQUIRED_VIEW_COMPONENT",e[e.VIEW_DEPENDENCY_CHANGE=42]="VIEW_DEPENDENCY_CHANGE",e[e.OPERATION_POINTS_NOT_PRESENT=43]="OPERATION_POINTS_NOT_PRESENT",e[e.BASE_VIEW_TEMPORAL_HRD=44]="BASE_VIEW_TEMPORAL_HRD",e[e.FRAME_PACKING_ARRANGEMENT=45]="FRAME_PACKING_ARRANGEMENT",e[e.MULTIVIEW_VIEW_POSITION=46]="MULTIVIEW_VIEW_POSITION",e[e.DISPLAY_ORIENTATION=47]="DISPLAY_ORIENTATION",e[e.MVCD_SCALABLE_NESTING=48]="MVCD_SCALABLE_NESTING",e[e.MVCD_VIEW_SCALABILITY_INFO=49]="MVCD_VIEW_SCALABILITY_INFO",e[e.DEPTH_REPRESENTATION_INFO=50]="DEPTH_REPRESENTATION_INFO",e[e.THREE_DIMENSIONAL_REFERENCE_DISPLAYS_INFO=51]="THREE_DIMENSIONAL_REFERENCE_DISPLAYS_INFO",e[e.DEPTH_TIMING=52]="DEPTH_TIMING",e[e.DEPTH_SAMPLING_INFO=53]="DEPTH_SAMPLING_INFO",e[e.CONSTRAINED_DEPTH_PARAMETER_SET_IDENTIFIER=54]="CONSTRAINED_DEPTH_PARAMETER_SET_IDENTIFIER",e[e.GREEN_METADATA=56]="GREEN_METADATA",e[e.MASTERING_DISPLAY_COLOUR_VOLUME=137]="MASTERING_DISPLAY_COLOUR_VOLUME",e[e.COLOUR_REMAPPING_INFO=142]="COLOUR_REMAPPING_INFO",e[e.CONTENT_LIGHT_LEVEL_INFO=144]="CONTENT_LIGHT_LEVEL_INFO",e[e.ALTERNATIVE_TRANSFER_CHARACTERISTICS=147]="ALTERNATIVE_TRANSFER_CHARACTERISTICS",e[e.AMBIENT_VIEWING_ENVIRONMENT=148]="AMBIENT_VIEWING_ENVIRONMENT",e[e.CONTENT_COLOUR_VOLUME=149]="CONTENT_COLOUR_VOLUME",e[e.EQUIRECTANGULAR_PROJECTION=150]="EQUIRECTANGULAR_PROJECTION",e[e.CUBEMAP_PROJECTION=151]="CUBEMAP_PROJECTION",e[e.SPHERE_ROTATION=154]="SPHERE_ROTATION",e[e.REGIONWISE_PACKING=155]="REGIONWISE_PACKING",e[e.OMNI_VIEWPORT=156]="OMNI_VIEWPORT",e[e.ALTERNATIVE_DEPTH_INFO=181]="ALTERNATIVE_DEPTH_INFO",e[e.SEI_MANIFEST=200]="SEI_MANIFEST",e[e.SEI_PREFIX_INDICATION=201]="SEI_PREFIX_INDICATION"}(tf=tf||(tf={})),function(e){e[e.PROGRESSIVE=0]="PROGRESSIVE",e[e.TOP=1]="TOP",e[e.BOTTOM=2]="BOTTOM",e[e.TOP_BOTTOM=3]="TOP_BOTTOM",e[e.BOTTOM_TOP=4]="BOTTOM_TOP",e[e.TOP_BOTTOM_TOP=5]="TOP_BOTTOM_TOP",e[e.BOTTOM_TOP_BOTTOM=6]="BOTTOM_TOP_BOTTOM",e[e.DOUBLING=7]="DOUBLING",e[e.TRIPLING=8]="TRIPLING"}(rf=rf||(rf={}));class nf{constructor(e,t,r){this.lastPts=e,this.queue=[[e,t]]}insert(e,t){(e-this.lastPts|0)<=0&&console.error(`PTS not strictly monotonic: had ${this.lastPts}, got ${e}`),this.queue.push([e,t]),this.lastPts=e}retrieve(e){for(;this.queue.length&&(this.queue[0][0]-e|0)<0;)this.queue.shift();if(this.queue.length&&this.queue[0][0]===e)return this.queue[0][1]}}class of{constructor(e,t){this.queueSize=e,this.resetThreshold=t}insert(e,t){!this.queue||Math.abs(e-this.queue.lastPts|0)>this.resetThreshold?(this.queue&&console.warn("reinitializing queue"),this.queue=new nf(e,t,this.queueSize)):this.queue.insert(e,t)}retrieve(e){return this.queue?this.queue.retrieve(e):void 0}}const sf={wrap:e=>[e,[]],unwrap:e=>({unwrapped:e})};function af(e,t,r={}){const[n,i]=r.options||[void 0,[]],o=((e=sf)=>(t,r)=>{const[n,i]=e.wrap(t);return[n,[...r,...i]]})(r.wrapping);if("RTCRtpScriptTransform"in window){const{RTCRtpScriptTransform:r}=window,s=new r(t,...o({type:"options",options:n},i));e.transform=s}else{const r=e.createEncodedStreams();t.postMessage(...o({type:"transformer",transformer:r,options:n},[r.readable,r.writable,...i]))}}let cf=0;function uf(e,t,r,n={}){const i=cf++,[o,s]=n.options||[void 0,[]],a=[{id:i,options:o},s];af(e,t,{...n,options:a});const c=((e=sf)=>(t,r)=>{const n=e.unwrap(t);n&&r(n.unwrapped)})(n.wrapping),u=e=>c(e.data,(t=>{if("ready"!==t.type&&"metadata"!==t.type)throw new Error(`received unexpected ${t.type} message`);t.id===i&&("ready"===t.type?d():r(t.metadata),e.stopImmediatePropagation())}));t.addEventListener("message",u);const l=()=>t.removeEventListener("message",u);let d;return new Promise((e=>d=e)).then((()=>l))}const lf=new Worker("./worker.umd.js",{name:"metadata-extractor"});var df=new URL(window.location.href);!df.searchParams.get("url")||df.searchParams.get("url");var ff=df.searchParams.get("endpoint"),pf=df.searchParams.get("streamName")?df.searchParams.get("streamName"):process.env.MILLICAST_STREAM_NAME,hf=df.searchParams.get("streamAccountId")?df.searchParams.get("streamAccountId"):process.env.MILLICAST_ACCOUNT_ID,mf="true"===df.searchParams.get("disableVideo"),gf="true"===df.searchParams.get("disableAudio"),vf="true"===df.searchParams.get("muted")||null===df.searchParams.get("muted"),yf="true"===df.searchParams.get("autoplay")||null===df.searchParams.get("autoplay"),bf="true"===df.searchParams.get("autoReconnect")||null===df.searchParams.get("autoReconnect");"true"===df.searchParams.get("disableControls")&&df.searchParams.get("disableControls");"true"===df.searchParams.get("disableVolume")&&df.searchParams.get("disableVolume"),"true"===df.searchParams.get("disablePlay")&&df.searchParams.get("disablePlay"),"true"===df.searchParams.get("disableFull")&&df.searchParams.get("disableFull");var wf,Ef=document.querySelector("#fullBtn"),Sf=document.querySelector("video"),If=document.getElementById("muteBtn"),Tf=document.getElementById("playBtn"),Cf=document.querySelector("#timecode"),Rf=document.querySelector("#vidPlaceholder"),Af=document.querySelector("#vidContainer");If.addEventListener("click",(function(){var e=If.querySelector("i");Sf.muted?(Sf.muted=!1,e.classList.remove("fa-volume-mute"),e.classList.add("fa-volume-up")):(Sf.muted=!0,e.classList.remove("fa-volume-up"),e.classList.add("fa-volume-mute"))})),Tf.addEventListener("click",(function(){var e=Tf.querySelector("i");Sf.paused?(Sf.play(),e.classList.remove("fa-play"),e.classList.add("fa-pause")):(Sf.pause(),e.classList.remove("fa-pause"),e.classList.add("fa-play"))})),document.getElementById("metadata-toggle").addEventListener("change",(function(){this.checked?canvas.style.display="block":canvas.style.display="none"}));var xf=null,Pf=function(){ff&&Gd.setEndpoint(ff);var e=new Zd(pf,(function(){return Gd.getSubscriber(pf,hf)}),null,bf);return e.on("broadcastEvent",(function(e){if(bf){var t=null!==e.data.layers?e.data.layers:{};"layers"===e.name&&Object.keys(t).length}})),e.on("track",(function(e){if("video"===e.track.kind)_f(e.streams[0],e.receiver);else if("createEncodedStreams"in e.receiver){var t=e.receiver.createEncodedStreams();t.readable.pipeTo(t.writable)}})),e},Of=function(){var e=Ef.children[0];document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),e.classList.remove("fa-expand"),e.classList.add("fa-compress")):(document.documentElement.requestFullscreen(),e.classList.remove("fa-compress"),e.classList.add("fa-expand"))},_f=function(e,t){var r;Sf.id=e.id,vf||Sf.removeAttribute("muted"),yf||(Sf.autoplay=!1,Sf.removeAttribute("autoplay")),null===(r=wf)||void 0===r||r(),Sf.srcObject=e,wf=function(e,t,r){const n=new class extends class extends class{stop(){this.cleanup&&(this.cleanup(),this.cleanup=void 0)}constructor(e,t,r,n,i={},o={}){this.queue=new of(0,(o.resetTime||5)*e);const s=uf(r,n,(e=>this.queue.insert(e.ts,e.metadata)),i),a=((e,t)=>{const r=(...i)=>{n=e.requestVideoFrameCallback(r),t(...i)};let n=e.requestVideoFrameCallback(r);return()=>e.cancelVideoFrameCallback(n)})(t,this.newFrame.bind(this));this.cleanup=()=>(a(),s.then((e=>e()))),this.ready=s.then((()=>{}))}newFrame(e,t){const r=t.rtpTimestamp;if(void 0===r)throw new Error("RTP timestamp not present; is video playing a WebRTC stream?");const n=this.queue.retrieve(r);this.metadata=n?this.transformMetadata(n,r):void 0}}{transformMetadata(e){return e}}{newFrame(e,r){super.newFrame(e,r);const i=r.expectedDisplayTime-e,o=n.metadata;if(!o)return void(t.textContent="");const s=`${new Date(Number(o)).toISOString().replace("T"," ")} (${Math.round(i).toString()})`;t.textContent=s}}(9e4,e,r,lf);return n.ready.then((()=>console.info("Metadata player initialized"))),n}(Sf,Cf,t),Rf.style.display="none",Af.style.display=null};var Nf,Lf=!1,kf=function(){var e,t;return Sf.srcObject=null,null===(e=xf)||void 0===e||null===(t=e.millicastSignaling)||void 0===t||t.close(),xf=null,Lf=!1,Promise.resolve({})},Df=(Nf=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}(t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==(r=xf)&&void 0!==r&&r.isActive()||Lf)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Lf=!0,n={disableVideo:mf,disableAudio:gf,absCaptureTime:!0,peerConfig:{encodedInsertableStreams:!0}},window.millicastView=xf=Pf(),e.next=8,xf.connect(n);case 8:e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(2),bf){e.next=14;break}return e.abrupt("return");case 14:xf.reconnect();case 15:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(){return Nf.apply(this,arguments)});document.addEventListener("DOMContentLoaded",(function(){var e,t,r,n=function(n){e&&clearInterval(e),e=setInterval((function(){var i=n.clientX,o=n.clientY;i===t&&o===r?clearInterval(e):(t=i,r=o)}),1e3)};Ef&&(Ef.onclick=Of),Sf.onmousemove=function(e){n(e)},Sf.addEventListener("touchstart",(function(e){n(e)}),!1),e=setInterval((function(){clearInterval(e)}),2e3),Df()}));window.__onGCastApiAvailable=function(e){if(!e)return!1;var t=cast.framework.CastContextEventType.CAST_STATE_CHANGED,r=cast.framework.CastContext.getInstance();r.setOptions({autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:"B5B8307B"}),r.addEventListener(t,(function(e){var t=e.castState;if(t===cast.framework.CastState.NOT_CONNECTED&&Df(),t===cast.framework.CastState.CONNECTED){var n=r.getCurrentSession(),i=new chrome.cast.media.MediaInfo(pf,"");i.customData={streamName:pf,streamAccountId:hf},i.streamType=chrome.cast.media.StreamType.LIVE;var o=new chrome.cast.media.LoadRequest(i);n.loadMedia(o).then(kf)}}))},e.toggleSwitchBtns=function(){},Object.defineProperty(e,"__esModule",{value:!0})}));
